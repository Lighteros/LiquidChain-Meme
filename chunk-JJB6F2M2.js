import{a as hn,b as xs,c as Si}from"./chunk-3DJS6E6H.js";import{a as sr,b as Ct,c as or,d as $e,f as yn,g as pn,h as gn,i as mn,j as bi,k as Ve,l as xe,m as As,n as ir,o as Es,p as Ot,q as vs,r as Rs,s as Ls,t as wi,w as ar,x as ki}from"./chunk-4I7G342N.js";import{a as dn,b as mi}from"./chunk-VAHX4GR7.js";import{a as ln,b as gi}from"./chunk-Z3SE2D4B.js";import{a as fn,b as yi}from"./chunk-HINDXNTT.js";import{d as _s,f as pi}from"./chunk-EEU3LH2V.js";import{F as Is,I as un,L as Bs,t as Ss}from"./chunk-QMRWXCSQ.js";import{a as N,b as F,f as qe,g as ie,h as it,i as an,k as Me,l as cn,n as g}from"./chunk-VNDKUXGB.js";function Bi(s,e,t,r){let n=s.sqr(t),o=s.sqr(r),i=s.add(s.mul(e.a,n),o),c=s.add(s.ONE,s.mul(e.d,s.mul(n,o)));return s.eql(i,c)}function _i(s,e={}){let t=Ls("edwards",s,e,e.FpFnLE),{Fp:r,Fn:n}=t,o=t.CURVE,{h:i}=o;gn(e,{},{uvRatio:"function"});let c=bn<<BigInt(n.BYTES*8)-ue,a=S=>r.create(S),f=e.uvRatio||((S,p)=>{try{return{isValid:!0,value:r.sqrt(r.div(S,p))}}catch{return{isValid:!1,value:Xe}}});if(!Bi(r,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function y(S,p,A=!1){let L=A?ue:Xe;return pn("coordinate "+S,p,L,c),p}function k(S){if(!(S instanceof h))throw new Error("ExtendedPoint expected")}let B=mn((S,p)=>{let{X:A,Y:L,Z:T}=S,Y=S.is0();p==null&&(p=Y?Ii:r.inv(T));let X=a(A*p),j=a(L*p),Q=r.mul(T,p);if(Y)return{x:Xe,y:ue};if(Q!==ue)throw new Error("invZ was invalid");return{x:X,y:j}}),m=mn(S=>{let{a:p,d:A}=o;if(S.is0())throw new Error("bad point: ZERO");let{X:L,Y:T,Z:Y,T:X}=S,j=a(L*L),Q=a(T*T),P=a(Y*Y),z=a(P*P),D=a(j*p),oe=a(P*a(D+Q)),ce=a(z+a(A*a(j*Q)));if(oe!==ce)throw new Error("bad point: equation left != right (1)");let re=a(L*T),Se=a(Y*X);if(re!==Se)throw new Error("bad point: equation left != right (2)");return!0});class h{constructor(p,A,L,T){this.X=y("x",p),this.Y=y("y",A),this.Z=y("z",L,!0),this.T=y("t",T),Object.freeze(this)}static CURVE(){return o}static fromAffine(p){if(p instanceof h)throw new Error("extended point not allowed");let{x:A,y:L}=p||{};return y("x",A),y("y",L),new h(A,L,ue,a(A*L))}static fromBytes(p,A=!1){let L=r.BYTES,{a:T,d:Y}=o;p=yn(Ct(p,L,"point")),sr(A,"zip215");let X=yn(p),j=p[L-1];X[L-1]=j&-129;let Q=or(X),P=A?c:r.ORDER;pn("point.y",Q,Xe,P);let z=a(Q*Q),D=a(z-ue),oe=a(Y*z-T),{isValid:ce,value:re}=f(D,oe);if(!ce)throw new Error("bad point: invalid y coordinate");let Se=(re&ue)===ue,Ee=(j&128)!==0;if(!A&&re===Xe&&Ee)throw new Error("bad point: x=0 and x_0=1");return Ee!==Se&&(re=a(-re)),h.fromAffine({x:re,y:Q})}static fromHex(p,A=!1){return h.fromBytes($e("point",p),A)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(p=8,A=!0){return b.createCache(this,p),A||this.multiply(bn),this}assertValidity(){m(this)}equals(p){k(p);let{X:A,Y:L,Z:T}=this,{X:Y,Y:X,Z:j}=p,Q=a(A*j),P=a(Y*T),z=a(L*j),D=a(X*T);return Q===P&&z===D}is0(){return this.equals(h.ZERO)}negate(){return new h(a(-this.X),this.Y,this.Z,a(-this.T))}double(){let{a:p}=o,{X:A,Y:L,Z:T}=this,Y=a(A*A),X=a(L*L),j=a(bn*a(T*T)),Q=a(p*Y),P=A+L,z=a(a(P*P)-Y-X),D=Q+X,oe=D-j,ce=Q-X,re=a(z*oe),Se=a(D*ce),Ee=a(z*ce),Je=a(oe*D);return new h(re,Se,Je,Ee)}add(p){k(p);let{a:A,d:L}=o,{X:T,Y,Z:X,T:j}=this,{X:Q,Y:P,Z:z,T:D}=p,oe=a(T*Q),ce=a(Y*P),re=a(j*L*D),Se=a(X*z),Ee=a((T+Y)*(Q+P)-oe-ce),Je=Se-re,ot=Se+re,De=a(ce-A*oe),Tt=a(Ee*Je),nr=a(ot*De),on=a(Ee*De),ks=a(Je*ot);return new h(Tt,nr,ks,on)}subtract(p){return this.add(p.negate())}multiply(p){if(!n.isValidNot0(p))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:A,f:L}=b.cached(this,p,T=>Ot(h,T));return Ot(h,[A,L])[0]}multiplyUnsafe(p,A=h.ZERO){if(!n.isValid(p))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return p===Xe?h.ZERO:this.is0()||p===ue?this:b.unsafe(this,p,L=>Ot(h,L),A)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return b.unsafe(this,o.n).is0()}toAffine(p){return B(this,p)}clearCofactor(){return i===ue?this:this.multiplyUnsafe(i)}toBytes(){let{x:p,y:A}=this.toAffine(),L=r.toBytes(A);return L[L.length-1]|=p&ue?128:0,L}toHex(){return Is(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(p){return Ot(h,p)}static msm(p,A){return Rs(h,n,p,A)}_setWindowSize(p){this.precompute(p)}toRawBytes(){return this.toBytes()}}h.BASE=new h(o.Gx,o.Gy,ue,a(o.Gx*o.Gy)),h.ZERO=new h(Xe,ue,ue,Xe),h.Fp=r,h.Fn=n;let b=new vs(h,n.BITS);return h.BASE.precompute(8),h}function Ai(s,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');gn(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:r}=t,{BASE:n,Fp:o,Fn:i}=s,c=t.randomBytes||Bs,a=t.adjustScalarBytes||(P=>P),f=t.domain||((P,z,D)=>{if(sr(D,"phflag"),z.length||D)throw new Error("Contexts/pre-hash are not supported");return P});function y(P){return i.create(or(P))}function k(P){let z=L.secretKey;P=$e("private key",P,z);let D=$e("hashed private key",e(P),2*z),oe=a(D.slice(0,z)),ce=D.slice(z,2*z),re=y(oe);return{head:oe,prefix:ce,scalar:re}}function B(P){let{head:z,prefix:D,scalar:oe}=k(P),ce=n.multiply(oe),re=ce.toBytes();return{head:z,prefix:D,scalar:oe,point:ce,pointBytes:re}}function m(P){return B(P).pointBytes}function h(P=Uint8Array.of(),...z){let D=un(...z);return y(e(f(D,$e("context",P),!!r)))}function b(P,z,D={}){P=$e("message",P),r&&(P=r(P));let{prefix:oe,scalar:ce,pointBytes:re}=B(z),Se=h(D.context,oe,P),Ee=n.multiply(Se).toBytes(),Je=h(D.context,Ee,re,P),ot=i.create(Se+Je*ce);if(!i.isValid(ot))throw new Error("sign failed: invalid s");let De=un(Ee,i.toBytes(ot));return Ct(De,L.signature,"result")}let S={zip215:!0};function p(P,z,D,oe=S){let{context:ce,zip215:re}=oe,Se=L.signature;P=$e("signature",P,Se),z=$e("message",z),D=$e("publicKey",D,L.publicKey),re!==void 0&&sr(re,"zip215"),r&&(z=r(z));let Ee=Se/2,Je=P.subarray(0,Ee),ot=or(P.subarray(Ee,Se)),De,Tt,nr;try{De=s.fromBytes(D,re),Tt=s.fromBytes(Je,re),nr=n.multiplyUnsafe(ot)}catch{return!1}if(!re&&De.isSmallOrder())return!1;let on=h(ce,Tt.toBytes(),De.toBytes(),z);return Tt.add(De.multiplyUnsafe(on)).subtract(nr).clearCofactor().is0()}let A=o.BYTES,L={secretKey:A,publicKey:A,signature:2*A,seed:A};function T(P=c(L.seed)){return Ct(P,L.seed,"seed")}function Y(P){let z=Q.randomSecretKey(P);return{secretKey:z,publicKey:m(z)}}function X(P){return Ss(P)&&P.length===i.BYTES}function j(P,z){try{return!!s.fromBytes(P,z)}catch{return!1}}let Q={getExtendedPublicKey:B,randomSecretKey:T,isValidSecretKey:X,isValidPublicKey:j,toMontgomery(P){let{y:z}=s.fromBytes(P),D=L.publicKey,oe=D===32;if(!oe&&D!==57)throw new Error("only defined for 25519 and 448");let ce=oe?o.div(ue+z,ue-z):o.div(z-ue,z+ue);return o.toBytes(ce)},toMontgomerySecret(P){let z=L.secretKey;Ct(P,z);let D=e(P.subarray(0,z));return a(D).subarray(0,z)},randomPrivateKey:T,precompute(P=8,z=s.BASE){return z.precompute(P,!1)}};return Object.freeze({keygen:Y,getPublicKey:m,sign:b,verify:p,utils:Q,Point:s,lengths:L})}function Ei(s){let e={a:s.a,d:s.d,p:s.Fp.ORDER,n:s.n,h:s.h,Gx:s.Gx,Gy:s.Gy},t=s.Fp,r=ir(e.n,s.nBitLength,!0),n={Fp:t,Fn:r,uvRatio:s.uvRatio},o={randomBytes:s.randomBytes,adjustScalarBytes:s.adjustScalarBytes,domain:s.domain,prehash:s.prehash,mapToCurve:s.mapToCurve};return{CURVE:e,curveOpts:n,hash:s.hash,eddsaOpts:o}}function vi(s,e){let t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:s,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function Ps(s){let{CURVE:e,curveOpts:t,hash:r,eddsaOpts:n}=Ei(s),o=_i(e,t),i=Ai(o,r,n);return vi(s,i)}var Xe,ue,bn,Ii,Ts=ie(()=>{"use strict";bi();wi();Es();Xe=BigInt(0),ue=BigInt(1),bn=BigInt(2),Ii=BigInt(8)});function Pi(s){let e=BigInt(10),t=BigInt(20),r=BigInt(40),n=BigInt(80),o=wn,c=s*s%o*s%o,a=xe(c,Cs,o)*c%o,f=xe(a,Ri,o)*s%o,y=xe(f,Li,o)*f%o,k=xe(y,e,o)*y%o,B=xe(k,t,o)*k%o,m=xe(B,r,o)*B%o,h=xe(m,n,o)*m%o,b=xe(h,n,o)*m%o,S=xe(b,e,o)*y%o;return{pow_p_5_8:xe(S,Cs,o)*s%o,b2:c}}function Ti(s){return s[0]&=248,s[31]&=127,s[31]|=64,s}function Ci(s,e){let t=wn,r=Ve(e*e*e,t),n=Ve(r*r*e,t),o=Pi(s*n).pow_p_5_8,i=Ve(s*r*o,t),c=Ve(e*i*i,t),a=i,f=Ve(i*Os,t),y=c===s,k=c===Ve(-s,t),B=c===Ve(-s*Os,t);return y&&(i=a),(k||B)&&(i=f),As(i,t)&&(i=Ve(-i,t)),{isValid:y||k,value:i}}var Ri,Cs,sf,Li,xi,wn,zs,Os,Oi,zi,at,Ns=ie(()=>{"use strict";pi();Ts();Es();Ri=BigInt(1),Cs=BigInt(2),sf=BigInt(3),Li=BigInt(5),xi=BigInt(8),wn=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),zs={p:wn,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:xi,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};Os=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");Oi=ir(zs.p,{isLE:!0}),zi=F(N({},zs),{Fp:Oi,hash:_s,adjustScalarBytes:Ti,uvRatio:Ci}),at=Ps(zi)});var Ks=it((cf,Us)=>{"use strict";var cr=Si().Buffer;function Ni(s){if(s.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<s.length;r++){var n=s.charAt(r),o=n.charCodeAt(0);if(e[o]!==255)throw new TypeError(n+" is ambiguous");e[o]=r}var i=s.length,c=s.charAt(0),a=Math.log(i)/Math.log(256),f=Math.log(256)/Math.log(i);function y(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=cr.from(m)),!cr.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var h=0,b=0,S=0,p=m.length;S!==p&&m[S]===0;)S++,h++;for(var A=(p-S)*f+1>>>0,L=new Uint8Array(A);S!==p;){for(var T=m[S],Y=0,X=A-1;(T!==0||Y<b)&&X!==-1;X--,Y++)T+=256*L[X]>>>0,L[X]=T%i>>>0,T=T/i>>>0;if(T!==0)throw new Error("Non-zero carry");b=Y,S++}for(var j=A-b;j!==A&&L[j]===0;)j++;for(var Q=c.repeat(h);j<A;++j)Q+=s.charAt(L[j]);return Q}function k(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return cr.alloc(0);for(var h=0,b=0,S=0;m[h]===c;)b++,h++;for(var p=(m.length-h)*a+1>>>0,A=new Uint8Array(p);h<m.length;){var L=m.charCodeAt(h);if(L>255)return;var T=e[L];if(T===255)return;for(var Y=0,X=p-1;(T!==0||Y<S)&&X!==-1;X--,Y++)T+=i*A[X]>>>0,A[X]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");S=Y,h++}for(var j=p-S;j!==p&&A[j]===0;)j++;var Q=cr.allocUnsafe(b+(p-j));Q.fill(0,0,b);for(var P=b;j!==p;)Q[P++]=A[j++];return Q}function B(m){var h=k(m);if(h)return h;throw new Error("Non-base"+i+" character")}return{encode:y,decodeUnsafe:k,decode:B}}Us.exports=Ni});var kn=it((uf,Ws)=>{"use strict";var Ui=Ks(),Ki="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Ws.exports=Ui(Ki)});var Fs={};an(Fs,{TextDecoder:()=>lr,TextEncoder:()=>dr});function je(s,e,t){return e<=s&&s<=t}function hr(s){if(s===void 0)return{};if(s===Object(s))return s;throw TypeError("Could not convert argument to dictionary")}function Wi(s){for(var e=String(s),t=e.length,r=0,n=[];r<t;){var o=e.charCodeAt(r);if(o<55296||o>57343)n.push(o);else if(56320<=o&&o<=57343)n.push(65533);else if(55296<=o&&o<=56319)if(r===t-1)n.push(65533);else{var i=s.charCodeAt(r+1);if(56320<=i&&i<=57343){var c=o&1023,a=i&1023;n.push(65536+(c<<10)+a),r+=1}else n.push(65533)}r+=1}return n}function Fi(s){for(var e="",t=0;t<s.length;++t){var r=s[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}function In(s){this.tokens=[].slice.call(s)}function Sn(s,e){if(s)throw TypeError("Decoder error");return e||65533}function Di(){}function qi(){}function lr(s,e){if(!(this instanceof lr))return new lr(s,e);if(s=s!==void 0?String(s).toLowerCase():fr,s!==fr)throw new Error("Encoding not supported. Only utf-8 is supported");e=hr(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function dr(s,e){if(!(this instanceof dr))return new dr(s,e);if(s=s!==void 0?String(s).toLowerCase():fr,s!==fr)throw new Error("Encoding not supported. Only utf-8 is supported");e=hr(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Mi(s){var e=s.fatal,t=0,r=0,n=0,o=128,i=191;this.handler=function(c,a){if(a===ur&&n!==0)return n=0,Sn(e);if(a===ur)return wt;if(n===0){if(je(a,0,127))return a;if(je(a,194,223))n=1,t=a-192;else if(je(a,224,239))a===224&&(o=160),a===237&&(i=159),n=2,t=a-224;else if(je(a,240,244))a===240&&(o=144),a===244&&(i=143),n=3,t=a-240;else return Sn(e);return t=t<<6*n,null}if(!je(a,o,i))return t=n=r=0,o=128,i=191,c.prepend(a),Sn(e);if(o=128,i=191,r+=1,t+=a-128<<6*(n-r),r!==n)return null;var f=t;return t=n=r=0,f}}function $i(s){var e=s.fatal;this.handler=function(t,r){if(r===ur)return wt;if(je(r,0,127))return r;var n,o;je(r,128,2047)?(n=1,o=192):je(r,2048,65535)?(n=2,o=224):je(r,65536,1114111)&&(n=3,o=240);for(var i=[(r>>6*n)+o];n>0;){var c=r>>6*(n-1);i.push(128|c&63),n-=1}return i}}var ur,wt,fr,Ds=ie(()=>{"use strict";ur=-1;In.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ur},prepend:function(s){if(Array.isArray(s))for(var e=s;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(s)},push:function(s){if(Array.isArray(s))for(var e=s;e.length;)this.tokens.push(e.shift());else this.tokens.push(s)}};wt=-1;Di.prototype={handler:function(s,e){}};qi.prototype={handler:function(s,e){}};fr="utf-8";lr.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=hr(t),this._streaming||(this._decoder=new Mi({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var n=new In(r),o=[],i;!n.endOfStream()&&(i=this._decoder.handler(n,n.read()),i!==wt);)i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));if(!this._streaming){do{if(i=this._decoder.handler(n,n.read()),i===wt)break;i!==null&&(Array.isArray(i)?o.push.apply(o,i):o.push(i))}while(!n.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),Fi(o)}};dr.prototype={encode:function(e,t){e=e?String(e):"",t=hr(t),this._streaming||(this._encoder=new $i(this._options)),this._streaming=!!t.stream;for(var r=[],n=new In(Wi(e)),o;!n.endOfStream()&&(o=this._encoder.handler(n,n.read()),o!==wt);)Array.isArray(o)?r.push.apply(r,o):r.push(o);if(!this._streaming){for(;o=this._encoder.handler(n,n.read()),o!==wt;)Array.isArray(o)?r.push.apply(r,o):r.push(o);this._encoder=null}return new Uint8Array(r)}}});var js=it(Z=>{"use strict";var Vi=Z&&Z.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),ji=Z&&Z.__setModuleDefault||(Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e}),Ce=Z&&Z.__decorate||function(s,e,t,r){var n=arguments.length,o=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,r);else for(var c=s.length-1;c>=0;c--)(i=s[c])&&(o=(n<3?i(o):n>3?i(e,t,o):i(e,t))||o);return n>3&&o&&Object.defineProperty(e,t,o),o},Hi=Z&&Z.__importStar||function(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t in s)t!=="default"&&Object.hasOwnProperty.call(s,t)&&Vi(e,s,t);return ji(e,s),e},qs=Z&&Z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Z,"__esModule",{value:!0});Z.deserializeUnchecked=Z.deserialize=Z.serialize=Z.BinaryReader=Z.BinaryWriter=Z.BorshError=Z.baseDecode=Z.baseEncode=void 0;var Ze=qs(xs()),Ms=qs(kn()),Gi=Hi((Ds(),cn(Fs))),Yi=typeof TextDecoder!="function"?Gi.TextDecoder:TextDecoder,Ji=new Yi("utf-8",{fatal:!0});function Xi(s){return typeof s=="string"&&(s=Buffer.from(s,"utf8")),Ms.default.encode(Buffer.from(s))}Z.baseEncode=Xi;function Zi(s){return Buffer.from(Ms.default.decode(s))}Z.baseDecode=Zi;var Bn=1024,de=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};Z.BorshError=de;var yr=class{constructor(){this.buf=Buffer.alloc(Bn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Bn)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ze.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ze.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ze.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ze.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(Bn)]),this.length+=e.length}writeString(e){this.maybeResize();let t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(let r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}};Z.BinaryWriter=yr;function Oe(s,e,t){let r=t.value;t.value=function(...n){try{return r.apply(this,n)}catch(o){if(o instanceof RangeError){let i=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(i)>=0)throw new de("Reached the end of buffer when deserializing")}throw o}}}var Ie=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new Ze.default(e,"le")}readU128(){let e=this.readBuffer(16);return new Ze.default(e,"le")}readU256(){let e=this.readBuffer(32);return new Ze.default(e,"le")}readU512(){let e=this.readBuffer(64);return new Ze.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new de(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return Ji.decode(t)}catch(r){throw new de(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}};Ce([Oe],Ie.prototype,"readU8",null);Ce([Oe],Ie.prototype,"readU16",null);Ce([Oe],Ie.prototype,"readU32",null);Ce([Oe],Ie.prototype,"readU64",null);Ce([Oe],Ie.prototype,"readU128",null);Ce([Oe],Ie.prototype,"readU256",null);Ce([Oe],Ie.prototype,"readU512",null);Ce([Oe],Ie.prototype,"readString",null);Ce([Oe],Ie.prototype,"readFixedArray",null);Ce([Oe],Ie.prototype,"readArray",null);Z.BinaryReader=Ie;function $s(s){return s.charAt(0).toUpperCase()+s.slice(1)}function ct(s,e,t,r,n){try{if(typeof r=="string")n[`write${$s(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new de(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);n.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new de(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let o=0;o<r[1];o++)ct(s,null,t[o],r[0],n)}else n.writeArray(t,o=>{ct(s,e,o,r[0],n)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?n.writeU8(0):(n.writeU8(1),ct(s,e,t,r.type,n));break}case"map":{n.writeU32(t.size),t.forEach((o,i)=>{ct(s,e,i,r.key,n),ct(s,e,o,r.value,n)});break}default:throw new de(`FieldType ${r} unrecognized`)}else Vs(s,t,n)}catch(o){throw o instanceof de&&o.addToFieldPath(e),o}}function Vs(s,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}let r=s.get(e.constructor);if(!r)throw new de(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([n,o])=>{ct(s,n,e[n],o,t)});else if(r.kind==="enum"){let n=e[r.field];for(let o=0;o<r.values.length;++o){let[i,c]=r.values[o];if(i===n){t.writeU8(o),ct(s,i,e[i],c,t);break}}}else throw new de(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function Qi(s,e,t=yr){let r=new t;return Vs(s,e,r),r.toArray()}Z.serialize=Qi;function ut(s,e,t,r){try{if(typeof t=="string")return r[`read${$s(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){let n=[];for(let o=0;o<t[1];o++)n.push(ut(s,null,t[0],r));return n}else return r.readArray(()=>ut(s,e,t[0],r))}if(t.kind==="option")return r.readU8()?ut(s,e,t.type,r):void 0;if(t.kind==="map"){let n=new Map,o=r.readU32();for(let i=0;i<o;i++){let c=ut(s,e,t.key,r),a=ut(s,e,t.value,r);n.set(c,a)}return n}return _n(s,t,r)}catch(n){throw n instanceof de&&n.addToFieldPath(e),n}}function _n(s,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);let r=s.get(e);if(!r)throw new de(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){let n={};for(let[o,i]of s.get(e).fields)n[o]=ut(s,o,i,t);return new e(n)}if(r.kind==="enum"){let n=t.readU8();if(n>=r.values.length)throw new de(`Enum index: ${n} is out of range`);let[o,i]=r.values[n],c=ut(s,o,i,t);return new e({[o]:c})}throw new de(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function ea(s,e,t,r=Ie){let n=new r(t),o=_n(s,e,n);if(n.offset<t.length)throw new de(`Unexpected ${t.length-n.offset} bytes after deserialized data`);return o}Z.deserialize=ea;function ta(s,e,t,r=Ie){let n=new r(t);return _n(s,e,n)}Z.deserializeUnchecked=ta});var Rn=it(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.s16=d.s8=d.nu64be=d.u48be=d.u40be=d.u32be=d.u24be=d.u16be=d.nu64=d.u48=d.u40=d.u32=d.u24=d.u16=d.u8=d.offset=d.greedy=d.Constant=d.UTF8=d.CString=d.Blob=d.Boolean=d.BitField=d.BitStructure=d.VariantLayout=d.Union=d.UnionLayoutDiscriminator=d.UnionDiscriminator=d.Structure=d.Sequence=d.DoubleBE=d.Double=d.FloatBE=d.Float=d.NearInt64BE=d.NearInt64=d.NearUInt64BE=d.NearUInt64=d.IntBE=d.Int=d.UIntBE=d.UInt=d.OffsetLayout=d.GreedyCount=d.ExternalLayout=d.bindConstructorLayout=d.nameWithProperty=d.Layout=d.uint8ArrayToBuffer=d.checkUint8Array=void 0;d.constant=d.utf8=d.cstr=d.blob=d.unionLayoutDiscriminator=d.union=d.seq=d.bits=d.struct=d.f64be=d.f64=d.f32be=d.f32=d.ns64be=d.s48be=d.s40be=d.s32be=d.s24be=d.s16be=d.ns64=d.s48=d.s40=d.s32=d.s24=void 0;var En=hn();function It(s){if(!(s instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}d.checkUint8Array=It;function M(s){return It(s),En.Buffer.from(s.buffer,s.byteOffset,s.length)}d.uint8ArrayToBuffer=M;var V=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};d.Layout=V;function vn(s,e){return e.property?s+"["+e.property+"]":s}d.nameWithProperty=vn;function ra(s,e){if(typeof s!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(s,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof V))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");s.layout_=e,e.boundConstructor_=s,e.makeDestinationObject=()=>new s,Object.defineProperty(s.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(s,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}d.bindConstructorLayout=ra;var pe=class extends V{isCount(){throw new Error("ExternalLayout is abstract")}};d.ExternalLayout=pe;var pr=class extends pe{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){It(e);let r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}};d.GreedyCount=pr;var zt=class extends pe{constructor(e,t=0,r){if(!(e instanceof V))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Be||this.layout instanceof ve}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}};d.OffsetLayout=zt;var Be=class extends V{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return M(e).readUIntLE(t,this.span)}encode(e,t,r=0){return M(t).writeUIntLE(e,r,this.span),this.span}};d.UInt=Be;var ve=class extends V{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return M(e).readUIntBE(t,this.span)}encode(e,t,r=0){return M(t).writeUIntBE(e,r,this.span),this.span}};d.UIntBE=ve;var He=class extends V{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return M(e).readIntLE(t,this.span)}encode(e,t,r=0){return M(t).writeIntLE(e,r,this.span),this.span}};d.Int=He;var Qe=class extends V{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return M(e).readIntBE(t,this.span)}encode(e,t,r=0){return M(t).writeIntBE(e,r,this.span),this.span}};d.IntBE=Qe;var An=Math.pow(2,32);function Tr(s){let e=Math.floor(s/An),t=s-e*An;return{hi32:e,lo32:t}}function Cr(s,e){return s*An+e}var gr=class extends V{constructor(e){super(8,e)}decode(e,t=0){let r=M(e),n=r.readUInt32LE(t),o=r.readUInt32LE(t+4);return Cr(o,n)}encode(e,t,r=0){let n=Tr(e),o=M(t);return o.writeUInt32LE(n.lo32,r),o.writeUInt32LE(n.hi32,r+4),8}};d.NearUInt64=gr;var mr=class extends V{constructor(e){super(8,e)}decode(e,t=0){let r=M(e),n=r.readUInt32BE(t),o=r.readUInt32BE(t+4);return Cr(n,o)}encode(e,t,r=0){let n=Tr(e),o=M(t);return o.writeUInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}};d.NearUInt64BE=mr;var br=class extends V{constructor(e){super(8,e)}decode(e,t=0){let r=M(e),n=r.readUInt32LE(t),o=r.readInt32LE(t+4);return Cr(o,n)}encode(e,t,r=0){let n=Tr(e),o=M(t);return o.writeUInt32LE(n.lo32,r),o.writeInt32LE(n.hi32,r+4),8}};d.NearInt64=br;var wr=class extends V{constructor(e){super(8,e)}decode(e,t=0){let r=M(e),n=r.readInt32BE(t),o=r.readUInt32BE(t+4);return Cr(n,o)}encode(e,t,r=0){let n=Tr(e),o=M(t);return o.writeInt32BE(n.hi32,r),o.writeUInt32BE(n.lo32,r+4),8}};d.NearInt64BE=wr;var kr=class extends V{constructor(e){super(4,e)}decode(e,t=0){return M(e).readFloatLE(t)}encode(e,t,r=0){return M(t).writeFloatLE(e,r),4}};d.Float=kr;var Sr=class extends V{constructor(e){super(4,e)}decode(e,t=0){return M(e).readFloatBE(t)}encode(e,t,r=0){return M(t).writeFloatBE(e,r),4}};d.FloatBE=Sr;var Ir=class extends V{constructor(e){super(8,e)}decode(e,t=0){return M(e).readDoubleLE(t)}encode(e,t,r=0){return M(t).writeDoubleLE(e,r),8}};d.Double=Ir;var Br=class extends V{constructor(e){super(8,e)}decode(e,t=0){return M(e).readDoubleBE(t)}encode(e,t,r=0){return M(t).writeDoubleBE(e,r),8}};d.DoubleBE=Br;var _r=class extends V{constructor(e,t,r){if(!(e instanceof V))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof pe&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof pe)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof pe&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let o=0;for(;o<n;)r+=this.elementLayout.getSpan(e,t+r),++o}return r}decode(e,t=0){let r=[],n=0,o=this.count;for(o instanceof pe&&(o=o.decode(e,t));n<o;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){let n=this.elementLayout,o=e.reduce((i,c)=>i+n.encode(c,t,r+i),0);return this.count instanceof pe&&this.count.encode(e.length,t,r),o}};d.Sequence=_r;var Ar=class extends V{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((o,i)=>o&&i instanceof V,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(let o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce((o,i)=>o+i.getSpan(),0)}catch{}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((n,o)=>{let i=o.getSpan(e,t);return t+=i,n+i},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){It(e);let r=this.makeDestinationObject();for(let n of this.fields)if(n.property!==void 0&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){let n=r,o=0,i=0;for(let c of this.fields){let a=c.span;if(i=0<a?a:0,c.property!==void 0){let f=e[c.property];f!==void 0&&(i=c.encode(f,t,r),0>a&&(a=c.getSpan(t,r)))}o=r,r+=a}return o+i-n}fromArray(e){let t=this.makeDestinationObject();for(let r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}};d.Structure=Ar;var Nt=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}};d.UnionDiscriminator=Nt;var St=class extends Nt{constructor(e,t){if(!(e instanceof pe&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}};d.UnionLayoutDiscriminator=St;var Ut=class extends V{constructor(e,t,r){let n;if(e instanceof Be||e instanceof ve)n=new St(new zt(e));else if(e instanceof pe&&e.isCount())n=new St(e);else if(e instanceof Nt)n=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof V))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof Be||e instanceof ve)&&(o+=n.layout.span)),super(o,r),this.discriminator=n,this.usesPrefixDiscriminator=e instanceof Be||e instanceof ve,this.defaultLayout=t,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return i(c)},this.configGetSourceVariant=function(c){i=c.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r,n=this.discriminator,o=n.decode(e,t),i=this.registry[o];if(i===void 0){let c=this.defaultLayout,a=0;this.usesPrefixDiscriminator&&(a=n.layout.span),r=this.makeDestinationObject(),r[n.property]=o,r[c.property]=c.decode(e,t+a)}else r=i.decode(e,t);return r}encode(e,t,r=0){let n=this.getSourceVariant(e);if(n===void 0){let o=this.discriminator,i=this.defaultLayout,c=0;return this.usesPrefixDiscriminator&&(c=o.layout.span),o.encode(e[o.property],t,r),c+i.encode(e[i.property],t,r+c)}return n.encode(e,t,r)}addVariant(e,t,r){let n=new Er(this,e,t,r);return this.registry[e]=n,n}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}};d.Union=Ut;var Er=class extends V{constructor(e,t,r,n){if(!(e instanceof Ut))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&n===void 0&&(n=r,r=null),r){if(!(r instanceof V))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof n!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=r?r.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,n),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let n=0;return this.layout&&(n=this.layout.getSpan(e,t+r)),r+n}decode(e,t=0){let r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+n):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let n=0;if(this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let o=n;if(this.layout&&(this.layout.encode(e[this.property],t,r+n),o+=this.layout.getSpan(t,r+n),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};d.VariantLayout=Er;function kt(s){return 0>s&&(s+=4294967296),s}var Kt=class extends V{constructor(e,t,r){if(!(e instanceof Be||e instanceof ve))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let n=0;this._packedSetValue=function(o){return n=kt(o),this},this._packedGetValue=function(){return n}}decode(e,t=0){let r=this.makeDestinationObject(),n=this.word.decode(e,t);this._packedSetValue(n);for(let o of this.fields)o.property!==void 0&&(r[o.property]=o.decode(e));return r}encode(e,t,r=0){let n=this.word.decode(t,r);this._packedSetValue(n);for(let o of this.fields)if(o.property!==void 0){let i=e[o.property];i!==void 0&&o.encode(i)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){let r=new Wt(this,e,t);return this.fields.push(r),r}addBoolean(e){let t=new vr(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};d.BitStructure=Kt;var Wt=class{constructor(e,t,r){if(!(e instanceof Kt))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let n=8*e.span,o=e.fields.reduce((i,c)=>i+c.bits,0);if(t+o>n)throw new Error("bits too long for span remainder ("+(n-o)+" of "+n+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=n-o-t),this.wordMask=kt(this.valueMask<<this.start),this.property=r}decode(e,t){let r=this.container._packedGetValue();return kt(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==kt(e&this.valueMask))throw new TypeError(vn("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),r=kt(e<<this.start);this.container._packedSetValue(kt(t&~this.wordMask)|r)}};d.BitField=Wt;var vr=class extends Wt{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};d.Boolean=vr;var Rr=class extends V{constructor(e,t){if(!(e instanceof pe&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof pe||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),M(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof pe&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(vn("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");let o=M(e);return M(t).write(o.toString("hex"),r,n,"hex"),this.length instanceof pe&&this.length.encode(n,t,r),n}};d.Blob=Rr;var Lr=class extends V{constructor(e){super(-1,e)}getSpan(e,t=0){It(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){let r=this.getSpan(e,t);return M(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));let n=En.Buffer.from(e,"utf8"),o=n.length;if(r+o>t.length)throw new RangeError("encoding overruns Buffer");let i=M(t);return n.copy(i,r),i[r+o]=0,o+1}};d.CString=Lr;var xr=class extends V{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return It(e),e.length-t}decode(e,t=0){let r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return M(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));let n=En.Buffer.from(e,"utf8"),o=n.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(r+o>t.length)throw new RangeError("encoding overruns Buffer");return n.copy(M(t),r),o}};d.UTF8=xr;var Pr=class extends V{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}};d.Constant=Pr;d.greedy=(s,e)=>new pr(s,e);d.offset=(s,e,t)=>new zt(s,e,t);d.u8=s=>new Be(1,s);d.u16=s=>new Be(2,s);d.u24=s=>new Be(3,s);d.u32=s=>new Be(4,s);d.u40=s=>new Be(5,s);d.u48=s=>new Be(6,s);d.nu64=s=>new gr(s);d.u16be=s=>new ve(2,s);d.u24be=s=>new ve(3,s);d.u32be=s=>new ve(4,s);d.u40be=s=>new ve(5,s);d.u48be=s=>new ve(6,s);d.nu64be=s=>new mr(s);d.s8=s=>new He(1,s);d.s16=s=>new He(2,s);d.s24=s=>new He(3,s);d.s32=s=>new He(4,s);d.s40=s=>new He(5,s);d.s48=s=>new He(6,s);d.ns64=s=>new br(s);d.s16be=s=>new Qe(2,s);d.s24be=s=>new Qe(3,s);d.s32be=s=>new Qe(4,s);d.s40be=s=>new Qe(5,s);d.s48be=s=>new Qe(6,s);d.ns64be=s=>new wr(s);d.f32=s=>new kr(s);d.f32be=s=>new Sr(s);d.f64=s=>new Ir(s);d.f64be=s=>new Br(s);d.struct=(s,e,t)=>new Ar(s,e,t);d.bits=(s,e,t)=>new Kt(s,e,t);d.seq=(s,e,t)=>new _r(s,e,t);d.union=(s,e,t)=>new Ut(s,e,t);d.unionLayoutDiscriminator=(s,e)=>new St(s,e);d.blob=(s,e)=>new Rr(s,e);d.cstr=s=>new Lr(s);d.utf8=(s,e)=>new xr(s,e);d.constant=(s,e)=>new Pr(s,e)});var Hs=it(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});var Or;function na(s){{let e=Buffer.from(s);e.reverse();let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return Or.toBigInt(s,!1)}Bt.toBigIntLE=na;function sa(s){{let e=s.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return Or.toBigInt(s,!0)}Bt.toBigIntBE=sa;function oa(s,e){{let t=s.toString(16),r=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}return Or.fromBigInt(s,Buffer.allocUnsafe(e),!1)}Bt.toBufferLE=oa;function ia(s,e){{let t=s.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}return Or.fromBigInt(s,Buffer.allocUnsafe(e),!0)}Bt.toBufferBE=ia});function aa(s){return Ft(s)&&typeof s[Symbol.iterator]=="function"}function Ft(s){return typeof s=="object"&&s!=null}function zr(s){return Ft(s)&&!Array.isArray(s)}function Pe(s){return typeof s=="symbol"?s.toString():typeof s=="string"?JSON.stringify(s):`${s}`}function ca(s){let{done:e,value:t}=s.next();return e?void 0:t}function ua(s,e,t,r){if(s===!0)return;s===!1?s={}:typeof s=="string"&&(s={message:s});let{path:n,branch:o}=e,{type:i}=t,{refinement:c,message:a=`Expected a value of type \`${i}\`${c?` with refinement \`${c}\``:""}, but received: \`${Pe(r)}\``}=s;return F(N({value:r,type:i,refinement:c,key:n[n.length-1],path:n,branch:o},s),{message:a})}function*Gs(s,e,t,r){aa(s)||(s=[s]);for(let n of s){let o=ua(n,e,t,r);o&&(yield o)}}function*xn(s,e,t={}){let{path:r=[],branch:n=[s],coerce:o=!1,mask:i=!1}=t,c={path:r,branch:n,mask:i};o&&(s=e.coercer(s,c));let a="valid";for(let f of e.validator(s,c))f.explanation=t.message,a="not_valid",yield[f,void 0];for(let[f,y,k]of e.entries(s,c)){let B=xn(y,k,{path:f===void 0?r:[...r,f],branch:f===void 0?n:[...n,y],coerce:o,mask:i,message:t.message});for(let m of B)m[0]?(a=m[0].refinement!=null?"not_refined":"not_valid",yield[m[0],void 0]):o&&(y=m[1],f===void 0?s=y:s instanceof Map?s.set(f,y):s instanceof Set?s.add(y):Ft(s)&&(y!==void 0||f in s)&&(s[f]=y))}if(a!=="not_valid")for(let f of e.refiner(s,c))f.explanation=t.message,a="not_refined",yield[f,void 0];a==="valid"&&(yield[void 0,s])}function Pn(s,e,t){let r=Dt(s,e,{message:t});if(r[0])throw r[0]}function _(s,e,t){let r=Dt(s,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function fa(s,e,t){let r=Dt(s,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function Ys(s,e){return!Dt(s,e)[0]}function Dt(s,e,t={}){let r=xn(s,e,t),n=ca(r);return n[0]?[new Ln(n[0],function*(){for(let i of r)i[0]&&(yield i[0])}),void 0]:[void 0,n[1]]}function ft(s,e){return new Le({type:s,schema:null,validator:e})}function Js(){return ft("any",()=>!0)}function v(s){return new Le({type:"array",schema:s,*entries(e){if(s&&Array.isArray(e))for(let[t,r]of e.entries())yield[t,r,s]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Pe(e)}`}})}function Te(){return ft("boolean",s=>typeof s=="boolean")}function Nr(s){return ft("instance",e=>e instanceof s||`Expected a \`${s.name}\` instance, but received: ${Pe(e)}`)}function ne(s){let e=Pe(s),t=typeof s;return new Le({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?s:null,validator(r){return r===s||`Expected the literal \`${e}\`, but received: ${Pe(r)}`}})}function la(){return ft("never",()=>!1)}function R(s){return new Le(F(N({},s),{validator:(e,t)=>e===null||s.validator(e,t),refiner:(e,t)=>e===null||s.refiner(e,t)}))}function l(){return ft("number",s=>typeof s=="number"&&!isNaN(s)||`Expected a number, but received: ${Pe(s)}`)}function C(s){return new Le(F(N({},s),{validator:(e,t)=>e===void 0||s.validator(e,t),refiner:(e,t)=>e===void 0||s.refiner(e,t)}))}function Tn(s,e){return new Le({type:"record",schema:null,*entries(t){if(Ft(t))for(let r in t){let n=t[r];yield[r,r,s],yield[r,n,e]}},validator(t){return zr(t)||`Expected an object, but received: ${Pe(t)}`},coercer(t){return zr(t)?N({},t):t}})}function I(){return ft("string",s=>typeof s=="string"||`Expected a string, but received: ${Pe(s)}`)}function Ur(s){let e=la();return new Le({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){let r=Math.max(s.length,t.length);for(let n=0;n<r;n++)yield[n,t[n],s[n]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Pe(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function w(s){let e=Object.keys(s);return new Le({type:"type",schema:s,*entries(t){if(Ft(t))for(let r of e)yield[r,t[r],s[r]]},validator(t){return zr(t)||`Expected an object, but received: ${Pe(t)}`},coercer(t){return zr(t)?N({},t):t}})}function ge(s){let e=s.map(t=>t.type).join(" | ");return new Le({type:"union",schema:null,coercer(t,r){for(let n of s){let[o,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!o)return i}return t},validator(t,r){let n=[];for(let o of s){let[...i]=xn(t,o,r),[c]=i;if(c[0])for(let[a]of i)a&&n.push(a);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Pe(t)}`,...n]}})}function lt(){return ft("unknown",()=>!0)}function _t(s,e,t){return new Le(F(N({},s),{coercer:(r,n)=>Ys(r,e)?s.coercer(t(r,n),n):s.coercer(r,n)}))}var Ln,Le,Xs=ie(()=>{"use strict";Ln=class extends TypeError{constructor(e,t){let r,f=e,{message:n,explanation:o}=f,i=qe(f,["message","explanation"]),{path:c}=e,a=c.length===0?n:`At path: ${c.join(".")} -- ${n}`;super(o??a),o!=null&&(this.cause=a),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}};Le=class{constructor(e){let{type:t,schema:r,validator:n,refiner:o,coercer:i=a=>a,entries:c=function*(){}}=e;this.type=t,this.schema=r,this.entries=c,this.coercer=i,n?this.validator=(a,f)=>{let y=n(a,f);return Gs(y,f,this,a)}:this.validator=()=>[],o?this.refiner=(a,f)=>{let y=o(a,f);return Gs(y,f,this,a)}:this.refiner=()=>[]}assert(e,t){return Pn(e,this,t)}create(e,t){return _(e,this,t)}is(e){return Ys(e,this)}mask(e,t){return fa(e,this,t)}validate(e,t={}){return Dt(e,this,t)}}});function qt(){if(!Kr&&(Kr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Kr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kr(da)}var Kr,da,Cn=ie(()=>{"use strict";da=new Uint8Array(16)});var Zs,Qs=ie(()=>{"use strict";Zs=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function ha(s){return typeof s=="string"&&Zs.test(s)}var et,Mt=ie(()=>{"use strict";Qs();et=ha});function ya(s){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(he[s[e+0]]+he[s[e+1]]+he[s[e+2]]+he[s[e+3]]+"-"+he[s[e+4]]+he[s[e+5]]+"-"+he[s[e+6]]+he[s[e+7]]+"-"+he[s[e+8]]+he[s[e+9]]+"-"+he[s[e+10]]+he[s[e+11]]+he[s[e+12]]+he[s[e+13]]+he[s[e+14]]+he[s[e+15]]).toLowerCase();if(!et(t))throw TypeError("Stringified UUID is invalid");return t}var he,Wr,tt,$t=ie(()=>{"use strict";Mt();he=[];for(Wr=0;Wr<256;++Wr)he.push((Wr+256).toString(16).substr(1));tt=ya});function pa(s,e,t){var r=e&&t||0,n=e||new Array(16);s=s||{};var o=s.node||eo,i=s.clockseq!==void 0?s.clockseq:On;if(o==null||i==null){var c=s.random||(s.rng||qt)();o==null&&(o=eo=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),i==null&&(i=On=(c[6]<<8|c[7])&16383)}var a=s.msecs!==void 0?s.msecs:Date.now(),f=s.nsecs!==void 0?s.nsecs:Nn+1,y=a-zn+(f-Nn)/1e4;if(y<0&&s.clockseq===void 0&&(i=i+1&16383),(y<0||a>zn)&&s.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");zn=a,Nn=f,On=i,a+=122192928e5;var k=((a&268435455)*1e4+f)%4294967296;n[r++]=k>>>24&255,n[r++]=k>>>16&255,n[r++]=k>>>8&255,n[r++]=k&255;var B=a/4294967296*1e4&268435455;n[r++]=B>>>8&255,n[r++]=B&255,n[r++]=B>>>24&15|16,n[r++]=B>>>16&255,n[r++]=i>>>8|128,n[r++]=i&255;for(var m=0;m<6;++m)n[r+m]=o[m];return e||tt(n)}var eo,On,zn,Nn,to,ro=ie(()=>{"use strict";Cn();$t();zn=0,Nn=0;to=pa});function ga(s){if(!et(s))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(s.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(s.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(s.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(s.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(s.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var Fr,Un=ie(()=>{"use strict";Mt();Fr=ga});function ma(s){s=unescape(encodeURIComponent(s));for(var e=[],t=0;t<s.length;++t)e.push(s.charCodeAt(t));return e}function Dr(s,e,t){function r(n,o,i,c){if(typeof n=="string"&&(n=ma(n)),typeof o=="string"&&(o=Fr(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+n.length);if(a.set(o),a.set(n,o.length),a=t(a),a[6]=a[6]&15|e,a[8]=a[8]&63|128,i){c=c||0;for(var f=0;f<16;++f)i[c+f]=a[f];return i}return tt(a)}try{r.name=s}catch{}return r.DNS=ba,r.URL=wa,r}var ba,wa,Kn=ie(()=>{"use strict";$t();Un();ba="6ba7b810-9dad-11d1-80b4-00c04fd430c8",wa="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function ka(s){if(typeof s=="string"){var e=unescape(encodeURIComponent(s));s=new Uint8Array(e.length);for(var t=0;t<e.length;++t)s[t]=e.charCodeAt(t)}return Sa(Ia(Ba(s),s.length*8))}function Sa(s){for(var e=[],t=s.length*32,r="0123456789abcdef",n=0;n<t;n+=8){var o=s[n>>5]>>>n%32&255,i=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);e.push(i)}return e}function no(s){return(s+64>>>9<<4)+14+1}function Ia(s,e){s[e>>5]|=128<<e%32,s[no(e)-1]=e;for(var t=1732584193,r=-271733879,n=-1732584194,o=271733878,i=0;i<s.length;i+=16){var c=t,a=r,f=n,y=o;t=me(t,r,n,o,s[i],7,-680876936),o=me(o,t,r,n,s[i+1],12,-389564586),n=me(n,o,t,r,s[i+2],17,606105819),r=me(r,n,o,t,s[i+3],22,-1044525330),t=me(t,r,n,o,s[i+4],7,-176418897),o=me(o,t,r,n,s[i+5],12,1200080426),n=me(n,o,t,r,s[i+6],17,-1473231341),r=me(r,n,o,t,s[i+7],22,-45705983),t=me(t,r,n,o,s[i+8],7,1770035416),o=me(o,t,r,n,s[i+9],12,-1958414417),n=me(n,o,t,r,s[i+10],17,-42063),r=me(r,n,o,t,s[i+11],22,-1990404162),t=me(t,r,n,o,s[i+12],7,1804603682),o=me(o,t,r,n,s[i+13],12,-40341101),n=me(n,o,t,r,s[i+14],17,-1502002290),r=me(r,n,o,t,s[i+15],22,1236535329),t=be(t,r,n,o,s[i+1],5,-165796510),o=be(o,t,r,n,s[i+6],9,-1069501632),n=be(n,o,t,r,s[i+11],14,643717713),r=be(r,n,o,t,s[i],20,-373897302),t=be(t,r,n,o,s[i+5],5,-701558691),o=be(o,t,r,n,s[i+10],9,38016083),n=be(n,o,t,r,s[i+15],14,-660478335),r=be(r,n,o,t,s[i+4],20,-405537848),t=be(t,r,n,o,s[i+9],5,568446438),o=be(o,t,r,n,s[i+14],9,-1019803690),n=be(n,o,t,r,s[i+3],14,-187363961),r=be(r,n,o,t,s[i+8],20,1163531501),t=be(t,r,n,o,s[i+13],5,-1444681467),o=be(o,t,r,n,s[i+2],9,-51403784),n=be(n,o,t,r,s[i+7],14,1735328473),r=be(r,n,o,t,s[i+12],20,-1926607734),t=we(t,r,n,o,s[i+5],4,-378558),o=we(o,t,r,n,s[i+8],11,-2022574463),n=we(n,o,t,r,s[i+11],16,1839030562),r=we(r,n,o,t,s[i+14],23,-35309556),t=we(t,r,n,o,s[i+1],4,-1530992060),o=we(o,t,r,n,s[i+4],11,1272893353),n=we(n,o,t,r,s[i+7],16,-155497632),r=we(r,n,o,t,s[i+10],23,-1094730640),t=we(t,r,n,o,s[i+13],4,681279174),o=we(o,t,r,n,s[i],11,-358537222),n=we(n,o,t,r,s[i+3],16,-722521979),r=we(r,n,o,t,s[i+6],23,76029189),t=we(t,r,n,o,s[i+9],4,-640364487),o=we(o,t,r,n,s[i+12],11,-421815835),n=we(n,o,t,r,s[i+15],16,530742520),r=we(r,n,o,t,s[i+2],23,-995338651),t=ke(t,r,n,o,s[i],6,-198630844),o=ke(o,t,r,n,s[i+7],10,1126891415),n=ke(n,o,t,r,s[i+14],15,-1416354905),r=ke(r,n,o,t,s[i+5],21,-57434055),t=ke(t,r,n,o,s[i+12],6,1700485571),o=ke(o,t,r,n,s[i+3],10,-1894986606),n=ke(n,o,t,r,s[i+10],15,-1051523),r=ke(r,n,o,t,s[i+1],21,-2054922799),t=ke(t,r,n,o,s[i+8],6,1873313359),o=ke(o,t,r,n,s[i+15],10,-30611744),n=ke(n,o,t,r,s[i+6],15,-1560198380),r=ke(r,n,o,t,s[i+13],21,1309151649),t=ke(t,r,n,o,s[i+4],6,-145523070),o=ke(o,t,r,n,s[i+11],10,-1120210379),n=ke(n,o,t,r,s[i+2],15,718787259),r=ke(r,n,o,t,s[i+9],21,-343485551),t=rt(t,c),r=rt(r,a),n=rt(n,f),o=rt(o,y)}return[t,r,n,o]}function Ba(s){if(s.length===0)return[];for(var e=s.length*8,t=new Uint32Array(no(e)),r=0;r<e;r+=8)t[r>>5]|=(s[r/8]&255)<<r%32;return t}function rt(s,e){var t=(s&65535)+(e&65535),r=(s>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function _a(s,e){return s<<e|s>>>32-e}function qr(s,e,t,r,n,o){return rt(_a(rt(rt(e,s),rt(r,o)),n),t)}function me(s,e,t,r,n,o,i){return qr(e&t|~e&r,s,e,n,o,i)}function be(s,e,t,r,n,o,i){return qr(e&r|t&~r,s,e,n,o,i)}function we(s,e,t,r,n,o,i){return qr(e^t^r,s,e,n,o,i)}function ke(s,e,t,r,n,o,i){return qr(t^(e|~r),s,e,n,o,i)}var so,oo=ie(()=>{"use strict";so=ka});var Aa,io,ao=ie(()=>{"use strict";Kn();oo();Aa=Dr("v3",48,so),io=Aa});function Ea(s,e,t){s=s||{};var r=s.random||(s.rng||qt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var n=0;n<16;++n)e[t+n]=r[n];return e}return tt(r)}var co,uo=ie(()=>{"use strict";Cn();$t();co=Ea});function va(s,e,t,r){switch(s){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function Wn(s,e){return s<<e|s>>>32-e}function Ra(s){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof s=="string"){var r=unescape(encodeURIComponent(s));s=[];for(var n=0;n<r.length;++n)s.push(r.charCodeAt(n))}else Array.isArray(s)||(s=Array.prototype.slice.call(s));s.push(128);for(var o=s.length/4+2,i=Math.ceil(o/16),c=new Array(i),a=0;a<i;++a){for(var f=new Uint32Array(16),y=0;y<16;++y)f[y]=s[a*64+y*4]<<24|s[a*64+y*4+1]<<16|s[a*64+y*4+2]<<8|s[a*64+y*4+3];c[a]=f}c[i-1][14]=(s.length-1)*8/Math.pow(2,32),c[i-1][14]=Math.floor(c[i-1][14]),c[i-1][15]=(s.length-1)*8&4294967295;for(var k=0;k<i;++k){for(var B=new Uint32Array(80),m=0;m<16;++m)B[m]=c[k][m];for(var h=16;h<80;++h)B[h]=Wn(B[h-3]^B[h-8]^B[h-14]^B[h-16],1);for(var b=t[0],S=t[1],p=t[2],A=t[3],L=t[4],T=0;T<80;++T){var Y=Math.floor(T/20),X=Wn(b,5)+va(Y,S,p,A)+L+e[Y]+B[T]>>>0;L=A,A=p,p=Wn(S,30)>>>0,S=b,b=X}t[0]=t[0]+b>>>0,t[1]=t[1]+S>>>0,t[2]=t[2]+p>>>0,t[3]=t[3]+A>>>0,t[4]=t[4]+L>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var fo,lo=ie(()=>{"use strict";fo=Ra});var La,ho,yo=ie(()=>{"use strict";Kn();lo();La=Dr("v5",80,fo),ho=La});var po,go=ie(()=>{"use strict";po="00000000-0000-0000-0000-000000000000"});function xa(s){if(!et(s))throw TypeError("Invalid UUID");return parseInt(s.substr(14,1),16)}var mo,bo=ie(()=>{"use strict";Mt();mo=xa});var Fn={};an(Fn,{NIL:()=>po,parse:()=>Fr,stringify:()=>tt,v1:()=>to,v3:()=>io,v4:()=>co,v5:()=>ho,validate:()=>et,version:()=>mo});var Dn=ie(()=>{"use strict";ro();ao();uo();yo();go();bo();Mt();$t();Un()});var ko=it((Qf,wo)=>{"use strict";var Pa=(Dn(),cn(Fn)).v4,Ta=function(s,e,t,r){if(typeof s!="string")throw new TypeError(s+" must be a string");r=r||{};let n=typeof r.version=="number"?r.version:2;if(n!==1&&n!==2)throw new TypeError(n+" must be 1 or 2");let o={method:s};if(n===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof t>"u"){let i=typeof r.generator=="function"?r.generator:function(){return Pa()};o.id=i(o,r)}else n===2&&t===null?r.notificationIdNull&&(o.id=null):o.id=t;return o};wo.exports=Ta});var Io=it((el,So)=>{"use strict";var Ca=(Dn(),cn(Fn)).v4,Oa=ko(),Vt=function(s,e){if(!(this instanceof Vt))return new Vt(s,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Ca()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=s};So.exports=Vt;Vt.prototype.request=function(s,e,t,r){let n=this,o=null,i=Array.isArray(s)&&typeof e=="function";if(this.options.version===1&&i)throw new TypeError("JSON-RPC 1.0 does not support batching");if(i||!i&&s&&typeof s=="object"&&typeof e=="function")r=e,o=s;else{typeof t=="function"&&(r=t,t=void 0);let f=typeof r=="function";try{o=Oa(s,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(y){if(f){r(y);return}throw y}if(!f)return o}let a;try{a=JSON.stringify(o,this.options.replacer)}catch(f){r(f);return}return this.callServer(a,function(f,y){n._parseResponse(f,y,r)}),o};Vt.prototype._parseResponse=function(s,e,t){if(s){t(s);return}if(!e){t();return}let r;try{r=JSON.parse(e,this.options.reviver)}catch(n){t(n);return}if(t.length===3)if(Array.isArray(r)){let n=function(i){return typeof i.error<"u"},o=function(i){return!n(i)};t(null,r.filter(n),r.filter(o));return}else{t(null,r.error,r.result);return}t(null,r)}});function _o(s,e){return new za(s,e)}var Bo,za,Na,Ao,Eo=ie(()=>{"use strict";Bo=Me(hn(),1);mi();za=class extends dn.default{socket;constructor(s,e){super(),this.socket=new window.WebSocket(s,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(s,e,t){let r=t||e;try{this.socket.send(s),r()}catch(n){r(n)}}close(s,e){this.socket.close(s,e)}addEventListener(s,e,t){this.socket.addEventListener(s,e,t)}};Na=class{encode(s){return JSON.stringify(s)}decode(s){return JSON.parse(s)}},Ao=class extends dn.default{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(s,e="ws://localhost:8080",f={},c,a){var y=f,{autoconnect:t=!0,reconnect:r=!0,reconnect_interval:n=1e3,max_reconnects:o=5}=y,i=qe(y,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);super(),this.webSocketFactory=s,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=n,this.max_reconnects=o,this.rest_options=i,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),a?this.dataPack=a:this.dataPack=new Na,this.autoconnect&&this._connect(this.address,N({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}connect(){this.socket||this._connect(this.address,N({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}call(s,e,t,r){return!r&&typeof t=="object"&&(r=t,t=null),new Promise((n,o)=>{if(!this.ready)return o(new Error("socket not ready"));let i=this.generate_request_id(s,e),c={jsonrpc:"2.0",method:s,params:e||void 0,id:i};this.socket.send(this.dataPack.encode(c),r,a=>{if(a)return o(a);this.queue[i]={promise:[n,o]},t&&(this.queue[i].timeout=setTimeout(()=>{delete this.queue[i],o(new Error("reply timeout"))},t))})})}login(s){return g(this,null,function*(){let e=yield this.call("rpc.login",s);if(!e)throw new Error("authentication failed");return e})}listMethods(){return g(this,null,function*(){return yield this.call("__listMethods")})}notify(s,e){return new Promise((t,r)=>{if(!this.ready)return r(new Error("socket not ready"));let n={jsonrpc:"2.0",method:s,params:e};this.socket.send(this.dataPack.encode(n),o=>{if(o)return r(o);t()})})}subscribe(s){return g(this,null,function*(){typeof s=="string"&&(s=[s]);let e=yield this.call("rpc.on",s);if(typeof s=="string"&&e[s]!=="ok")throw new Error("Failed subscribing to an event '"+s+"' with: "+e[s]);return e})}unsubscribe(s){return g(this,null,function*(){typeof s=="string"&&(s=[s]);let e=yield this.call("rpc.off",s);if(typeof s=="string"&&e[s]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e})}close(s,e){this.socket&&this.socket.close(s||1e3,e)}setAutoReconnect(s){this.reconnect=s}setReconnectInterval(s){this.reconnect_interval=s}setMaxReconnects(s){this.max_reconnects=s}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(s,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(s,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=Bo.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);let r=[t.notification];if(t.params.constructor===Object)r.push(t.params);else for(let n=0;n<t.params.length;n++)r.push(t.params[n]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",t,r),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(s,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",t,r),1))})}}});var $u={};an($u,{Account:()=>Jn,AddressLookupTableAccount:()=>Zt,AddressLookupTableInstruction:()=>us,AddressLookupTableProgram:()=>er,Authorized:()=>en,BLOCKHASH_CACHE_TIMEOUT_MS:()=>ti,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>Fa,BPF_LOADER_PROGRAM_ID:()=>oc,BpfLoader:()=>ns,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Ue,ComputeBudgetInstruction:()=>fs,ComputeBudgetProgram:()=>tr,Connection:()=>cs,Ed25519Program:()=>Zr,Enum:()=>Yn,EpochSchedule:()=>Yr,FeeCalculatorLayout:()=>Zo,Keypair:()=>Xr,LAMPORTS_PER_SOL:()=>Mu,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>Ye,Loader:()=>rs,Lockup:()=>gt,MAX_SEED_LENGTH:()=>Go,Message:()=>Fe,MessageAccountKeys:()=>yt,MessageV0:()=>At,NONCE_ACCOUNT_LENGTH:()=>es,NonceAccount:()=>Gr,PACKET_DATA_SIZE:()=>st,PUBLIC_KEY_LENGTH:()=>We,PublicKey:()=>E,SIGNATURE_LENGTH_IN_BYTES:()=>Yt,SOLANA_SCHEMA:()=>Ht,STAKE_CONFIG_ID:()=>di,STAKE_INSTRUCTION_LAYOUTS:()=>fe,SYSTEM_INSTRUCTION_LAYOUTS:()=>te,SYSVAR_CLOCK_PUBKEY:()=>ze,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>Ja,SYSVAR_INSTRUCTIONS_PUBKEY:()=>Xa,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>$r,SYSVAR_RENT_PUBKEY:()=>Et,SYSVAR_REWARDS_PUBKEY:()=>Za,SYSVAR_SLOT_HASHES_PUBKEY:()=>Qa,SYSVAR_SLOT_HISTORY_PUBKEY:()=>ec,SYSVAR_STAKE_HISTORY_PUBKEY:()=>Vr,Secp256k1Program:()=>Qr,SendTransactionError:()=>pt,SolanaJSONRPCError:()=>x,SolanaJSONRPCErrorCode:()=>tc,StakeAuthorizationLayout:()=>Ou,StakeInstruction:()=>ls,StakeProgram:()=>Rt,Struct:()=>Gt,SystemInstruction:()=>ts,SystemProgram:()=>ye,Transaction:()=>G,TransactionExpiredBlockheightExceededError:()=>Jt,TransactionExpiredNonceInvalidError:()=>nt,TransactionExpiredTimeoutError:()=>Xt,TransactionInstruction:()=>J,TransactionMessage:()=>Xn,TransactionStatus:()=>Ge,VALIDATOR_INFO_KEY:()=>hi,VERSION_PREFIX_MASK:()=>rn,VOTE_PROGRAM_ID:()=>Uu,ValidatorInfo:()=>hs,VersionedMessage:()=>gs,VersionedTransaction:()=>Zn,VoteAccount:()=>ys,VoteAuthorizationLayout:()=>zu,VoteInit:()=>tn,VoteInstruction:()=>ds,VoteProgram:()=>Lt,clusterApiUrl:()=>Du,sendAndConfirmRawTransaction:()=>qu,sendAndConfirmTransaction:()=>Qn});function Ro(s){try{return at.ExtendedPoint.fromHex(s),!0}catch{return!1}}function Wa(s){return s._bn!==void 0}function Yo(s,e){let t=n=>{if(n.span>=0)return n.span;if(typeof n.alloc=="function")return n.alloc(e[n.property]);if("count"in n&&"elementLayout"in n){let o=e[n.property];if(Array.isArray(o))return o.length*t(n.elementLayout)}else if("fields"in n)return Yo({layout:n},e[n.property]);return 0},r=0;return s.layout.fields.forEach(n=>{r+=t(n)}),r}function _e(s){let e=0,t=0;for(;;){let r=s.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function Re(s,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){s.push(r);break}else r|=128,s.push(r)}}function $(s,e){if(!s)throw new Error(e||"Assertion failed")}function Ne(s){if(s.length===0)throw new Error(Jo);return s.shift()}function Ae(s,...e){let[t]=e;if(e.length===2?t+(e[1]??0)>s.length:t>=s.length)throw new Error(Jo);return s.splice(...e)}function Qn(s,e,t,r){return g(this,null,function*(){let n=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},o=yield s.sendTransaction(e,t,n),i;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)i=(yield s.confirmTransaction({abortSignal:r?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r&&r.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:c}=e.nonceInfo,a=c.keys[0].pubkey;i=(yield s.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:a,nonceValue:e.nonceInfo.nonce,signature:o},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),i=(yield s.confirmTransaction(o,r&&r.commitment)).value;if(i.err)throw o!=null?new pt({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(i)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(i)})`);return o})}function dt(s){return new Promise(e=>setTimeout(e,s))}function q(s,e){let t=s.layout.span>=0?s.layout.span:Yo(s,e),r=O.Buffer.alloc(t),n=Object.assign({instruction:s.index},e);return s.layout.encode(n,r),r}function H(s,e){let t;try{t=s.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.instruction!==s.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${s.index}`);return t}function ic(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function ac(){if(xo)return qn;xo=1;var s=Object.prototype.toString,e=Object.keys||function(r){var n=[];for(var o in r)n.push(o);return n};function t(r,n){var o,i,c,a,f,y,k;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),n);if(k=s.call(r),k==="[object Array]"){for(c="[",i=r.length-1,o=0;o<i;o++)c+=t(r[o],!0)+",";return i>-1&&(c+=t(r[o],!0)),c+"]"}else if(k==="[object Object]"){for(a=e(r).sort(),i=a.length,c="",o=0;o<i;)f=a[o],y=t(r[f],!1),y!==void 0&&(c&&(c+=","),c+=JSON.stringify(f)+":"+y),o++;return"{"+c+"}"}else return JSON.stringify(r);case"function":case"undefined":return n?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return qn=function(r){var n=t(r,!1);if(n!==void 0)return""+n},qn}function Mn(s){let e=0;for(;s>1;)s/=2,e++;return e}function uc(s){return s===0?1:(s--,s|=s>>1,s|=s>>2,s|=s>>4,s|=s>>8,s|=s>>16,s|=s>>32,s+1)}function lc(s,e){let t;try{t=s.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==s.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${s.index}`);return t}function yc(s){let e=s.match(hc);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${s}\``);let[t,r,n,o]=e,i=s.startsWith("https:")?"wss:":"ws:",c=n==null?null:parseInt(n.slice(1),10),a=c==null?"":`:${c+1}`;return`${i}//${r}${a}${o}`}function pc(s){if(/^https?:/.test(s)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return s}function ee(s){let e,t;if(typeof s=="string")e=s;else if(s){let r=s,{commitment:n}=r,o=qe(r,["commitment"]);e=n,t=o}return{commitment:e,config:t}}function Co(s){return s.map(e=>"memcmp"in e?F(N({},e),{memcmp:F(N({},e.memcmp),{encoding:e.memcmp.encoding??"base58"})}):e)}function ri(s){return ge([w({jsonrpc:ne("2.0"),id:I(),result:s}),w({jsonrpc:ne("2.0"),id:I(),error:w({code:lt(),message:I(),data:C(Js())})})])}function U(s){return _t(ri(s),gc,e=>"error"in e?e:F(N({},e),{result:_(e.result,s)}))}function ae(s){return U(w({context:w({slot:l()}),value:s}))}function nn(s){return w({context:w({slot:l()}),value:s})}function $n(s,e){return s===0?new At({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new E(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:le.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Fe(e)}function xc(s,e,t,r,n,o){let i=t||fc,c;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let a;return r&&(a=(y,k)=>g(this,null,function*(){let B=yield new Promise((m,h)=>{try{r(y,k,(b,S)=>m([b,S]))}catch(b){h(b)}});return yield i(...B)})),new jo.default((y,k)=>g(this,null,function*(){let B={method:"POST",body:y,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},xu)};try{let m=5,h,b=500;for(;a?h=yield a(s,B):h=yield i(s,B),!(h.status!==429||n===!0||(m-=1,m===0));)console.error(`Server responded with ${h.status} ${h.statusText}.  Retrying after ${b}ms delay...`),yield dt(b),b*=2;let S=yield h.text();h.ok?k(null,S):k(new Error(`${h.status} ${h.statusText}: ${S}`))}catch(m){m instanceof Error&&k(m)}}),{})}function Pc(s){return(e,t)=>new Promise((r,n)=>{s.request(e,t,(o,i)=>{if(o){n(o);return}r(i)})})}function Tc(s){return e=>new Promise((t,r)=>{e.length===0&&t([]);let n=e.map(o=>s.request(o.methodName,o.args));s.request(n,(o,i)=>{if(o){r(o);return}t(i)})})}function Wu({authorizedVoter:s,epoch:e}){return{epoch:e,authorizedVoter:new E(s)}}function Mo({authorizedPubkey:s,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new E(s),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function Fu({buf:s,idx:e,isEmpty:t}){return t?[]:[...s.slice(e+1).map(Mo),...s.slice(0,e).map(Mo)]}function Du(s,e){let t=e===!1?"http":"https";if(!s)return $o[t].devnet;let r=$o[t][s];if(!r)throw new Error(`Unknown ${t} cluster: ${s}`);return r}function qu(s,e,t,r){return g(this,null,function*(){let n,o;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(n=t,o=r):o=t;let i=o&&{skipPreflight:o.skipPreflight,preflightCommitment:o.preflightCommitment||o.commitment,minContextSlot:o.minContextSlot},c=yield s.sendRawTransaction(e,i),a=o&&o.commitment,y=(yield n?s.confirmTransaction(n,a):s.confirmTransaction(c,a)).value;if(y.err)throw c!=null?new pt({action:i?.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(y)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(y)})`);return c})}var O,Gn,le,xt,u,Vo,rr,jo,Ua,vo,jr,ps,Ka,K,Gt,Yn,Ht,Ho,Go,We,Lo,E,Jn,Fa,st,rn,Yt,Jt,Xt,nt,yt,W,Da,ht,qa,Ma,$a,Va,Hr,Jo,Fe,At,gs,Ge,ja,J,G,Xn,Zn,Ha,Ga,Ya,Xo,ze,Ja,Xa,$r,Et,Za,Qa,ec,Vr,pt,tc,x,Zo,Qo,es,Gr,rc,nc,vt,ts,te,ye,sc,rs,oc,ns,qn,xo,cc,Po,jt,Yr,fc,ss,To,Zt,dc,hc,se,ei,ms,ti,gc,mc,bc,wc,kc,Sc,Ic,Bc,mt,_c,Ac,Ec,vc,Rc,Oo,Lc,Cc,Oc,zc,Nc,Uc,Kc,Wc,Fc,os,Dc,qc,is,Mc,$c,Qt,Vc,jc,as,Hc,Gc,Yc,Jc,Xc,Zc,Qc,eu,tu,ru,nu,su,ou,iu,zo,au,cu,uu,fu,lu,ni,bs,si,oi,ii,ai,du,hu,ci,ui,Jr,fi,sn,ws,Pt,bt,yu,pu,gu,mu,bu,wu,ku,No,Vn,Mr,Su,Iu,Bu,_u,Au,Eu,vu,Ru,Lu,xu,cs,Xr,Ye,us,er,fs,Ue,tr,Uo,Ko,Wo,Fo,Zr,Pu,Tu,Do,jn,qo,Cu,Hn,Qr,li,di,en,gt,ls,fe,Ou,Rt,tn,ds,Ke,zu,Lt,hi,Nu,hs,Uu,Ku,ys,$o,Mu,Vu=ie(()=>{O=Me(hn());Ns();Gn=Me(xs()),le=Me(kn());gi();xt=Me(js()),u=Me(Rn()),Vo=Me(Rn()),rr=Me(Hs());Xs();jo=Me(Io());Eo();yi();ki();Ua=at.utils.randomPrivateKey,vo=()=>{let s=at.utils.randomPrivateKey(),e=jr(s),t=new Uint8Array(64);return t.set(s),t.set(e,32),{publicKey:e,secretKey:t}},jr=at.getPublicKey;ps=(s,e)=>at.sign(s,e.slice(0,32)),Ka=at.verify,K=s=>O.Buffer.isBuffer(s)?s:s instanceof Uint8Array?O.Buffer.from(s.buffer,s.byteOffset,s.byteLength):O.Buffer.from(s),Gt=class{constructor(e){Object.assign(this,e)}encode(){return O.Buffer.from((0,xt.serialize)(Ht,this))}static decode(e){return(0,xt.deserialize)(Ht,this,e)}static decodeUnchecked(e){return(0,xt.deserializeUnchecked)(Ht,this,e)}},Yn=class extends Gt{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}},Ht=new Map,Go=32,We=32;Lo=1,E=class s extends Gt{constructor(e){if(super({}),this._bn=void 0,Wa(e))this._bn=e._bn;else{if(typeof e=="string"){let t=le.default.decode(e);if(t.length!=We)throw new Error("Invalid public key input");this._bn=new Gn.default(t)}else this._bn=new Gn.default(e);if(this._bn.byteLength()>We)throw new Error("Invalid public key input")}}static unique(){let e=new s(Lo);return Lo+=1,new s(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return le.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(O.Buffer);if(e.length===We)return e;let t=O.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static createWithSeed(e,t,r){return g(this,null,function*(){let n=O.Buffer.concat([e.toBuffer(),O.Buffer.from(t),r.toBuffer()]),o=ln(n);return new s(o)})}static createProgramAddressSync(e,t){let r=O.Buffer.alloc(0);e.forEach(function(o){if(o.length>Go)throw new TypeError("Max seed length exceeded");r=O.Buffer.concat([r,K(o)])}),r=O.Buffer.concat([r,t.toBuffer(),O.Buffer.from("ProgramDerivedAddress")]);let n=ln(r);if(Ro(n))throw new Error("Invalid seeds, address must fall off the curve");return new s(n)}static createProgramAddress(e,t){return g(this,null,function*(){return this.createProgramAddressSync(e,t)})}static findProgramAddressSync(e,t){let r=255,n;for(;r!=0;){try{let o=e.concat(O.Buffer.from([r]));n=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static findProgramAddress(e,t){return g(this,null,function*(){return this.findProgramAddressSync(e,t)})}static isOnCurve(e){let t=new s(e);return Ro(t.toBytes())}};Ho=E;E.default=new Ho("11111111111111111111111111111111");Ht.set(E,{kind:"struct",fields:[["_bn","u256"]]});Jn=class{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){let t=K(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=K(Ua()),this._publicKey=K(jr(this._secretKey))}get publicKey(){return new E(this._publicKey)}get secretKey(){return O.Buffer.concat([this._secretKey,this._publicKey],64)}},Fa=new E("BPFLoader1111111111111111111111111111111111"),st=1232,rn=127,Yt=64,Jt=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Jt.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});Xt=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Xt.prototype,"name",{value:"TransactionExpiredTimeoutError"});nt=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(nt.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});yt=class{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let r=new Map;this.keySegments().flat().forEach((o,i)=>{r.set(o.toBase58(),i)});let n=o=>{let i=r.get(o.toBase58());if(i===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return i};return e.map(o=>({programIdIndex:n(o.programId),accountKeyIndexes:o.keys.map(i=>n(i.pubkey)),data:o.data}))}},W=(s="publicKey")=>u.blob(32,s),Da=(s="signature")=>u.blob(64,s),ht=(s="string")=>{let e=u.struct([u.u32("length"),u.u32("lengthPadding"),u.blob(u.offset(u.u32(),-8),"chars")],s),t=e.decode.bind(e),r=e.encode.bind(e),n=e;return n.decode=(o,i)=>t(o,i).chars.toString(),n.encode=(o,i,c)=>{let a={chars:O.Buffer.from(o,"utf8")};return r(a,i,c)},n.alloc=o=>u.u32().span+u.u32().span+O.Buffer.from(o,"utf8").length,n},qa=(s="authorized")=>u.struct([W("staker"),W("withdrawer")],s),Ma=(s="lockup")=>u.struct([u.ns64("unixTimestamp"),u.ns64("epoch"),W("custodian")],s),$a=(s="voteInit")=>u.struct([W("nodePubkey"),W("authorizedVoter"),W("authorizedWithdrawer"),u.u8("commission")],s),Va=(s="voteAuthorizeWithSeedArgs")=>u.struct([u.u32("voteAuthorizationType"),W("currentAuthorityDerivedKeyOwnerPubkey"),ht("currentAuthorityDerivedKeySeed"),W("newAuthorized")],s);Hr=class s{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let r=new Map,n=i=>{let c=i.toBase58(),a=r.get(c);return a===void 0&&(a={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,a)),a},o=n(t);o.isSigner=!0,o.isWritable=!0;for(let i of e){n(i.programId).isInvoked=!0;for(let c of i.keys){let a=n(c.pubkey);a.isSigner||=c.isSigner,a.isWritable||=c.isWritable}}return new s(t,r)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];$(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,a])=>a.isSigner&&a.isWritable),r=e.filter(([,a])=>a.isSigner&&!a.isWritable),n=e.filter(([,a])=>!a.isSigner&&a.isWritable),o=e.filter(([,a])=>!a.isSigner&&!a.isWritable),i={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:o.length};{$(t.length>0,"Expected at least one writable signer key");let[a]=t[0];$(a===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let c=[...t.map(([a])=>new E(a)),...r.map(([a])=>new E(a)),...n.map(([a])=>new E(a)),...o.map(([a])=>new E(a))];return[i,c]}extractTableLookup(e){let[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&i.isWritable),[n,o]=this.drainKeysFoundInLookupTable(e.state.addresses,i=>!i.isSigner&&!i.isInvoked&&!i.isWritable);if(!(t.length===0&&n.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:o}]}drainKeysFoundInLookupTable(e,t){let r=new Array,n=new Array;for(let[o,i]of this.keyMetaMap.entries())if(t(i)){let c=new E(o),a=e.findIndex(f=>f.equals(c));a>=0&&($(a<256,"Max lookup table index exceeded"),r.push(a),n.push(c),this.keyMetaMap.delete(o))}return[r,n]}},Jo="Reached end of buffer unexpectedly";Fe=class s{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new E(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:le.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new yt(this.staticAccountKeys)}static compile(e){let t=Hr.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new yt(n).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:le.default.encode(c.data)}));return new s({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let r=e-t,o=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<o}else{let r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];Re(t,e);let r=this.instructions.map(k=>{let{accounts:B,programIdIndex:m}=k,h=Array.from(le.default.decode(k.data)),b=[];Re(b,B.length);let S=[];return Re(S,h.length),{programIdIndex:m,keyIndicesCount:O.Buffer.from(b),keyIndices:B,dataLength:O.Buffer.from(S),data:h}}),n=[];Re(n,r.length);let o=O.Buffer.alloc(st);O.Buffer.from(n).copy(o);let i=n.length;r.forEach(k=>{let m=u.struct([u.u8("programIdIndex"),u.blob(k.keyIndicesCount.length,"keyIndicesCount"),u.seq(u.u8("keyIndex"),k.keyIndices.length,"keyIndices"),u.blob(k.dataLength.length,"dataLength"),u.seq(u.u8("userdatum"),k.data.length,"data")]).encode(k,o,i);i+=m}),o=o.slice(0,i);let c=u.struct([u.blob(1,"numRequiredSignatures"),u.blob(1,"numReadonlySignedAccounts"),u.blob(1,"numReadonlyUnsignedAccounts"),u.blob(t.length,"keyCount"),u.seq(W("key"),e,"keys"),W("recentBlockhash")]),a={numRequiredSignatures:O.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:O.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:O.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:O.Buffer.from(t),keys:this.accountKeys.map(k=>K(k.toBytes())),recentBlockhash:le.default.decode(this.recentBlockhash)},f=O.Buffer.alloc(2048),y=c.encode(a,f);return o.copy(f,y),f.slice(0,y+o.length)}static from(e){let t=[...e],r=Ne(t);if(r!==(r&rn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let n=Ne(t),o=Ne(t),i=_e(t),c=[];for(let B=0;B<i;B++){let m=Ae(t,0,We);c.push(new E(O.Buffer.from(m)))}let a=Ae(t,0,We),f=_e(t),y=[];for(let B=0;B<f;B++){let m=Ne(t),h=_e(t),b=Ae(t,0,h),S=_e(t),p=Ae(t,0,S),A=le.default.encode(O.Buffer.from(p));y.push({programIdIndex:m,accounts:b,data:A})}let k={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:o},recentBlockhash:le.default.encode(O.Buffer.from(a)),accountKeys:c,instructions:y};return new s(k)}},At=class s{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new yt(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){let n=e-r,o=this.addressTableLookups.reduce((i,c)=>i+c.writableIndexes.length,0);return n<o}else if(e>=this.header.numRequiredSignatures){let n=e-t,i=r-t-this.header.numReadonlyUnsignedAccounts;return n<i}else{let n=t-this.header.numReadonlySignedAccounts;return e<n}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let r of this.addressTableLookups){let n=e.find(o=>o.key.equals(r.accountKey));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(let o of r.writableIndexes)if(o<n.state.addresses.length)t.writable.push(n.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`);for(let o of r.readonlyIndexes)if(o<n.state.addresses.length)t.readonly.push(n.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){let t=Hr.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(let y of o){let k=t.extractTableLookup(y);if(k!==void 0){let[B,{writable:m,readonly:h}]=k;r.push(B),n.writable.push(...m),n.readonly.push(...h)}}let[i,c]=t.getMessageComponents(),f=new yt(c,n).compileInstructions(e.instructions);return new s({header:i,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:f,addressTableLookups:r})}serialize(){let e=Array();Re(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),r=Array();Re(r,this.compiledInstructions.length);let n=this.serializeAddressTableLookups(),o=Array();Re(o,this.addressTableLookups.length);let i=u.struct([u.u8("prefix"),u.struct([u.u8("numRequiredSignatures"),u.u8("numReadonlySignedAccounts"),u.u8("numReadonlyUnsignedAccounts")],"header"),u.blob(e.length,"staticAccountKeysLength"),u.seq(W(),this.staticAccountKeys.length,"staticAccountKeys"),W("recentBlockhash"),u.blob(r.length,"instructionsLength"),u.blob(t.length,"serializedInstructions"),u.blob(o.length,"addressTableLookupsLength"),u.blob(n.length,"serializedAddressTableLookups")]),c=new Uint8Array(st),f=i.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(y=>y.toBytes()),recentBlockhash:le.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:n},c);return c.slice(0,f)}serializeInstructions(){let e=0,t=new Uint8Array(st);for(let r of this.compiledInstructions){let n=Array();Re(n,r.accountKeyIndexes.length);let o=Array();Re(o,r.data.length);let i=u.struct([u.u8("programIdIndex"),u.blob(n.length,"encodedAccountKeyIndexesLength"),u.seq(u.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),u.blob(o.length,"encodedDataLength"),u.blob(r.data.length,"data")]);e+=i.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(st);for(let r of this.addressTableLookups){let n=Array();Re(n,r.writableIndexes.length);let o=Array();Re(o,r.readonlyIndexes.length);let i=u.struct([W("accountKey"),u.blob(n.length,"encodedWritableIndexesLength"),u.seq(u.u8(),r.writableIndexes.length,"writableIndexes"),u.blob(o.length,"encodedReadonlyIndexesLength"),u.seq(u.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=i.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],r=Ne(t),n=r&rn;$(r!==n,"Expected versioned message but received legacy message");let o=n;$(o===0,`Expected versioned message with version 0 but found version ${o}`);let i={numRequiredSignatures:Ne(t),numReadonlySignedAccounts:Ne(t),numReadonlyUnsignedAccounts:Ne(t)},c=[],a=_e(t);for(let h=0;h<a;h++)c.push(new E(Ae(t,0,We)));let f=le.default.encode(Ae(t,0,We)),y=_e(t),k=[];for(let h=0;h<y;h++){let b=Ne(t),S=_e(t),p=Ae(t,0,S),A=_e(t),L=new Uint8Array(Ae(t,0,A));k.push({programIdIndex:b,accountKeyIndexes:p,data:L})}let B=_e(t),m=[];for(let h=0;h<B;h++){let b=new E(Ae(t,0,We)),S=_e(t),p=Ae(t,0,S),A=_e(t),L=Ae(t,0,A);m.push({accountKey:b,writableIndexes:p,readonlyIndexes:L})}return new s({header:i,staticAccountKeys:c,recentBlockhash:f,compiledInstructions:k,addressTableLookups:m})}},gs={deserializeMessageVersion(s){let e=s[0],t=e&rn;return t===e?"legacy":t},deserialize:s=>{let e=gs.deserializeMessageVersion(s);if(e==="legacy")return Fe.from(s);if(e===0)return At.deserialize(s);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},Ge=function(s){return s[s.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",s[s.PROCESSED=1]="PROCESSED",s[s.TIMED_OUT=2]="TIMED_OUT",s[s.NONCE_INVALID=3]="NONCE_INVALID",s}({}),ja=O.Buffer.alloc(Yt).fill(0),J=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=O.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}},G=class s{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{let{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new J(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let b=0;b<t.length;b++)if(t[b].programId===void 0)throw new Error(`Transaction instruction index ${b} has undefined program id`);let n=[],o=[];t.forEach(b=>{b.keys.forEach(p=>{o.push(N({},p))});let S=b.programId.toString();n.includes(S)||n.push(S)}),n.forEach(b=>{o.push({pubkey:new E(b),isSigner:!1,isWritable:!1})});let i=[];o.forEach(b=>{let S=b.pubkey.toString(),p=i.findIndex(A=>A.pubkey.toString()===S);p>-1?(i[p].isWritable=i[p].isWritable||b.isWritable,i[p].isSigner=i[p].isSigner||b.isSigner):i.push(b)}),i.sort(function(b,S){if(b.isSigner!==S.isSigner)return b.isSigner?-1:1;if(b.isWritable!==S.isWritable)return b.isWritable?-1:1;let p={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return b.pubkey.toBase58().localeCompare(S.pubkey.toBase58(),"en",p)});let c=i.findIndex(b=>b.pubkey.equals(r));if(c>-1){let[b]=i.splice(c,1);b.isSigner=!0,b.isWritable=!0,i.unshift(b)}else i.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(let b of this.signatures){let S=i.findIndex(p=>p.pubkey.equals(b.publicKey));if(S>-1)i[S].isSigner||(i[S].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${b.publicKey.toString()}`)}let a=0,f=0,y=0,k=[],B=[];i.forEach(({pubkey:b,isSigner:S,isWritable:p})=>{S?(k.push(b.toString()),a+=1,p||(f+=1)):(B.push(b.toString()),p||(y+=1))});let m=k.concat(B),h=t.map(b=>{let{data:S,programId:p}=b;return{programIdIndex:m.indexOf(p.toString()),accounts:b.keys.map(A=>m.indexOf(A.pubkey.toString())),data:le.default.encode(S)}});return h.forEach(b=>{$(b.programIdIndex>=0),b.accounts.forEach(S=>$(S>=0))}),new Fe({header:{numRequiredSignatures:a,numReadonlySignedAccounts:f,numReadonlyUnsignedAccounts:y},accountKeys:m,recentBlockhash:e,instructions:h})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((n,o)=>t[o].equals(n.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}getEstimatedFee(e){return g(this,null,function*(){return(yield e.getFeeForMessage(this.compileMessage())).value})}setSigners(...e){if(e.length===0)throw new Error("No signers");let t=new Set;this.signatures=e.filter(r=>{let n=r.toString();return t.has(n)?!1:(t.add(n),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let o of e){let i=o.publicKey.toString();t.has(i)||(t.add(i),r.push(o))}this.signatures=r.map(o=>({signature:null,publicKey:o.publicKey}));let n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,r=[];for(let o of e){let i=o.publicKey.toString();t.has(i)||(t.add(i),r.push(o))}let n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){let r=e.serialize();t.forEach(n=>{let o=ps(r,n.secretKey);this._addSignature(n.publicKey,K(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){$(t.length===64);let r=this.signatures.findIndex(n=>e.equals(n.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=O.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let r={};for(let{signature:n,publicKey:o}of this.signatures)n===null?t&&(r.missing||=[]).push(o):Ka(n,e,o.toBytes())||(r.invalid||=[]).push(o);return r.invalid||r.missing?r:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){let o=this._getMessageSignednessErrors(n,t);if(o){let i="Signature verification failed.";throw o.invalid&&(i+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),o.missing&&(i+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(i)}}return this._serialize(n)}_serialize(e){let{signatures:t}=this,r=[];Re(r,t.length);let n=r.length+t.length*64+e.length,o=O.Buffer.alloc(n);return $(t.length<256),O.Buffer.from(r).copy(o,0),t.forEach(({signature:i},c)=>{i!==null&&($(i.length===64,"signature has invalid length"),O.Buffer.from(i).copy(o,r.length+c*64))}),e.copy(o,r.length+t.length*64),$(o.length<=st,`Transaction too large: ${o.length} > ${st}`),o}get keys(){return $(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return $(this.instructions.length===1),this.instructions[0].programId}get data(){return $(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e],r=_e(t),n=[];for(let o=0;o<r;o++){let i=Ae(t,0,Yt);n.push(le.default.encode(O.Buffer.from(i)))}return s.populate(Fe.from(t),n)}static populate(e,t=[]){let r=new s;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((n,o)=>{let i={signature:n==le.default.encode(ja)?null:le.default.decode(n),publicKey:e.accountKeys[o]};r.signatures.push(i)}),e.instructions.forEach(n=>{let o=n.accounts.map(i=>{let c=e.accountKeys[i];return{pubkey:c,isSigner:r.signatures.some(a=>a.publicKey.toString()===c.toString())||e.isAccountSigner(i),isWritable:e.isAccountWritable(i)}});r.instructions.push(new J({keys:o,programId:e.accountKeys[n.programIdIndex],data:le.default.decode(n.data)}))}),r._message=e,r._json=r.toJSON(),r}},Xn=class s{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){let{header:r,compiledInstructions:n,recentBlockhash:o}=e,{numRequiredSignatures:i,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:a}=r,f=i-c;$(f>0,"Message header is invalid");let y=e.staticAccountKeys.length-i-a;$(y>=0,"Message header is invalid");let k=e.getAccountKeys(t),B=k.get(0);if(B===void 0)throw new Error("Failed to decompile message because no account keys were found");let m=[];for(let h of n){let b=[];for(let p of h.accountKeyIndexes){let A=k.get(p);if(A===void 0)throw new Error(`Failed to find key for account key index ${p}`);let L=p<i,T;L?T=p<f:p<k.staticAccountKeys.length?T=p-i<y:T=p-k.staticAccountKeys.length<k.accountKeysFromLookups.writable.length,b.push({pubkey:A,isSigner:p<r.numRequiredSignatures,isWritable:T})}let S=k.get(h.programIdIndex);if(S===void 0)throw new Error(`Failed to find program id for program id index ${h.programIdIndex}`);m.push(new J({programId:S,data:K(h.data),keys:b}))}return new s({payerKey:B,instructions:m,recentBlockhash:o})}compileToLegacyMessage(){return Fe.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return At.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}},Zn=class s{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)$(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let r=[];for(let n=0;n<e.header.numRequiredSignatures;n++)r.push(new Uint8Array(Yt));this.signatures=r}this.message=e}serialize(){let e=this.message.serialize(),t=Array();Re(t,this.signatures.length);let r=u.struct([u.blob(t.length,"encodedSignaturesLength"),u.seq(Da(),this.signatures.length,"signatures"),u.blob(e.length,"serializedMessage")]),n=new Uint8Array(2048),o=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,o)}static deserialize(e){let t=[...e],r=[],n=_e(t);for(let i=0;i<n;i++)r.push(new Uint8Array(Ae(t,0,Yt)));let o=gs.deserialize(new Uint8Array(t));return new s(o,r)}sign(e){let t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let n of e){let o=r.findIndex(i=>i.equals(n.publicKey));$(o>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[o]=ps(t,n.secretKey)}}addSignature(e,t){$(t.byteLength===64,"Signature must be 64 bytes long");let n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));$(n>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=t}},Ha=160,Ga=64,Ya=Ha/Ga,Xo=1e3/Ya,ze=new E("SysvarC1ock11111111111111111111111111111111"),Ja=new E("SysvarEpochSchedu1e111111111111111111111111"),Xa=new E("Sysvar1nstructions1111111111111111111111111"),$r=new E("SysvarRecentB1ockHashes11111111111111111111"),Et=new E("SysvarRent111111111111111111111111111111111"),Za=new E("SysvarRewards111111111111111111111111111111"),Qa=new E("SysvarS1otHashes111111111111111111111111111"),ec=new E("SysvarS1otHistory11111111111111111111111111"),Vr=new E("SysvarStakeHistory1111111111111111111111111"),pt=class extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){let o=n?`Logs: 
${JSON.stringify(n.slice(-10),null,2)}. `:"",i="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",c;switch(e){case"send":c=`Transaction ${t} resulted in an error. 
${r}. `+o+i;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+o+i;break;default:c=`Unknown action '${(a=>a)(e)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}getLogs(e){return g(this,null,function*(){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(n=>{if(n&&n.meta&&n.meta.logMessages){let o=n.meta.logMessages;this.transactionLogs=o,t(o)}else r(new Error("Log messages not found"))}).catch(r)})),yield this.transactionLogs})}},tc={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},x=class extends Error{constructor({code:e,message:t,data:r},n){super(n!=null?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}};Zo=u.nu64("lamportsPerSignature"),Qo=u.struct([u.u32("version"),u.u32("state"),W("authorizedPubkey"),W("nonce"),u.struct([Zo],"feeCalculator")]),es=Qo.span,Gr=class s{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=Qo.decode(K(e),0);return new s({authorizedPubkey:new E(t.authorizedPubkey),nonce:new E(t.nonce).toString(),feeCalculator:t.feeCalculator})}},rc=s=>{let e=s.decode.bind(s),t=s.encode.bind(s);return{decode:e,encode:t}},nc=s=>e=>{let t=(0,Vo.blob)(s,e),{encode:r,decode:n}=rc(t),o=t;return o.decode=(i,c)=>{let a=n(i,c);return(0,rr.toBigIntLE)(O.Buffer.from(a))},o.encode=(i,c,a)=>{let f=(0,rr.toBufferLE)(i,s);return r(f,c,a)},o},vt=nc(8),ts=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=u.u32("instruction").decode(e.data),n;for(let[o,i]of Object.entries(te))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a SystemInstruction");return n}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t,space:r,programId:n}=H(te.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:r,programId:new E(n)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{lamports:t}=H(te.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t,seed:r,programId:n}=H(te.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:r,programId:new E(n)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{space:t}=H(te.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,space:n,programId:o}=H(te.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new E(t),seed:r,space:n,programId:new E(o)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{programId:t}=H(te.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new E(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);let{base:t,seed:r,programId:n}=H(te.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new E(t),seed:r,programId:new E(n)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{base:t,seed:r,lamports:n,space:o,programId:i}=H(te.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new E(t),seed:r,lamports:n,space:o,programId:new E(i)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{authorized:t}=H(te.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new E(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),H(te.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=H(te.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t}=H(te.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new E(t)}}static checkProgramId(e){if(!e.equals(ye.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},te=Object.freeze({Create:{index:0,layout:u.struct([u.u32("instruction"),u.ns64("lamports"),u.ns64("space"),W("programId")])},Assign:{index:1,layout:u.struct([u.u32("instruction"),W("programId")])},Transfer:{index:2,layout:u.struct([u.u32("instruction"),vt("lamports")])},CreateWithSeed:{index:3,layout:u.struct([u.u32("instruction"),W("base"),ht("seed"),u.ns64("lamports"),u.ns64("space"),W("programId")])},AdvanceNonceAccount:{index:4,layout:u.struct([u.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:u.struct([u.u32("instruction"),u.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:u.struct([u.u32("instruction"),W("authorized")])},AuthorizeNonceAccount:{index:7,layout:u.struct([u.u32("instruction"),W("authorized")])},Allocate:{index:8,layout:u.struct([u.u32("instruction"),u.ns64("space")])},AllocateWithSeed:{index:9,layout:u.struct([u.u32("instruction"),W("base"),ht("seed"),u.ns64("space"),W("programId")])},AssignWithSeed:{index:10,layout:u.struct([u.u32("instruction"),W("base"),ht("seed"),W("programId")])},TransferWithSeed:{index:11,layout:u.struct([u.u32("instruction"),vt("lamports"),ht("seed"),W("programId")])},UpgradeNonceAccount:{index:12,layout:u.struct([u.u32("instruction")])}}),ye=class s{constructor(){}static createAccount(e){let t=te.Create,r=q(t,{lamports:e.lamports,space:e.space,programId:K(e.programId.toBuffer())});return new J({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(e){let t,r;if("basePubkey"in e){let n=te.TransferWithSeed;t=q(n,{lamports:BigInt(e.lamports),seed:e.seed,programId:K(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let n=te.Transfer;t=q(n,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new J({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;if("basePubkey"in e){let n=te.AssignWithSeed;t=q(n,{base:K(e.basePubkey.toBuffer()),seed:e.seed,programId:K(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=te.Assign;t=q(n,{programId:K(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new J({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=te.CreateWithSeed,r=q(t,{base:K(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:K(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||n.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new J({keys:n,programId:this.programId,data:r})}static createNonceAccount(e){let t=new G;"basePubkey"in e&&"seed"in e?t.add(s.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:es,programId:this.programId})):t.add(s.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:es,programId:this.programId}));let r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){let t=te.InitializeNonceAccount,r=q(t,{authorized:K(e.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:$r,isSigner:!1,isWritable:!1},{pubkey:Et,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new J(n)}static nonceAdvance(e){let t=te.AdvanceNonceAccount,r=q(t),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:$r,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new J(n)}static nonceWithdraw(e){let t=te.WithdrawNonceAccount,r=q(t,{lamports:e.lamports});return new J({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:$r,isSigner:!1,isWritable:!1},{pubkey:Et,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(e){let t=te.AuthorizeNonceAccount,r=q(t,{authorized:K(e.newAuthorizedPubkey.toBuffer())});return new J({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(e){let t,r;if("basePubkey"in e){let n=te.AllocateWithSeed;t=q(n,{base:K(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:K(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let n=te.Allocate;t=q(n,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new J({keys:r,programId:this.programId,data:t})}};ye.programId=new E("11111111111111111111111111111111");sc=st-300,rs=(()=>{class s{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/s.chunkSize)+1+1)}static load(t,r,n,o,i){return g(this,null,function*(){{let B=yield t.getMinimumBalanceForRentExemption(i.length),m=yield t.getAccountInfo(n.publicKey,"confirmed"),h=null;if(m!==null){if(m.executable)return console.error("Program load failed, account is already executable"),!1;m.data.length!==i.length&&(h=h||new G,h.add(ye.allocate({accountPubkey:n.publicKey,space:i.length}))),m.owner.equals(o)||(h=h||new G,h.add(ye.assign({accountPubkey:n.publicKey,programId:o}))),m.lamports<B&&(h=h||new G,h.add(ye.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:B-m.lamports})))}else h=new G().add(ye.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:B>0?B:1,space:i.length,programId:o}));h!==null&&(yield Qn(t,h,[r,n],{commitment:"confirmed"}))}let c=u.struct([u.u32("instruction"),u.u32("offset"),u.u32("bytesLength"),u.u32("bytesLengthPadding"),u.seq(u.u8("byte"),u.offset(u.u32(),-8),"bytes")]),a=s.chunkSize,f=0,y=i,k=[];for(;y.length>0;){let B=y.slice(0,a),m=O.Buffer.alloc(a+16);c.encode({instruction:0,offset:f,bytes:B,bytesLength:0,bytesLengthPadding:0},m);let h=new G().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:m});k.push(Qn(t,h,[r,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&(yield dt(1e3/4)),f+=a,y=y.slice(a)}yield Promise.all(k);{let B=u.struct([u.u32("instruction")]),m=O.Buffer.alloc(B.span);B.encode({instruction:1},m);let h=new G().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Et,isSigner:!1,isWritable:!1}],programId:o,data:m}),b="processed",S=yield t.sendTransaction(h,[r,n],{preflightCommitment:b}),{context:p,value:A}=yield t.confirmTransaction({signature:S,lastValidBlockHeight:h.lastValidBlockHeight,blockhash:h.recentBlockhash},b);if(A.err)throw new Error(`Transaction ${S} failed (${JSON.stringify(A)})`);for(;;){try{if((yield t.getSlot({commitment:b}))>p.slot)break}catch{}yield new Promise(L=>setTimeout(L,Math.round(Xo/2)))}}return!0})}}return s.chunkSize=sc,s})(),oc=new E("BPFLoader2111111111111111111111111111111111"),ns=class{static getMinNumSignatures(e){return rs.getMinNumSignatures(e)}static load(e,t,r,n,o){return rs.load(e,t,r,o,n)}};cc=ac(),Po=ic(cc),jt=32;Yr=class{constructor(e,t,r,n,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){let t=Mn(uc(e+jt+1))-Mn(jt)-1,r=this.getSlotsInEpoch(t),n=e-(r-jt);return[t,n]}else{let t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),n=this.firstNormalEpoch+r,o=t%this.slotsPerEpoch;return[n,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*jt:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Mn(jt)):this.slotsPerEpoch}},fc=globalThis.fetch,ss=class extends Ao{constructor(e,t,r){let n=o=>{let i=_o(o,N({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},t));return"socket"in i?this.underlyingSocket=i.socket:this.underlyingSocket=i,i};super(n,e,t,r),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}};To=56,Zt=class{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=lc(dc,e),r=e.length-To;$(r>=0,"lookup table is invalid"),$(r%32===0,"lookup table is invalid");let n=r/32,{addresses:o}=u.struct([u.seq(W(),n,"addresses")]).decode(e.slice(To));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new E(t.authority[0]):void 0,addresses:o.map(i=>new E(i))}}},dc={index:1,layout:u.struct([u.u32("typeIndex"),vt("deactivationSlot"),u.nu64("lastExtendedSlot"),u.u8("lastExtendedStartIndex"),u.u8(),u.seq(W(),u.offset(u.u8(),-1),"authority")])},hc=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;se=_t(Nr(E),I(),s=>new E(s)),ei=Ur([I(),ne("base64")]),ms=_t(Nr(O.Buffer),ei,s=>O.Buffer.from(s[0],"base64")),ti=30*1e3;gc=ri(lt());mc=w({foundation:l(),foundationTerm:l(),initial:l(),taper:l(),terminal:l()}),bc=U(v(R(w({epoch:l(),effectiveSlot:l(),amount:l(),postBalance:l(),commission:C(R(l()))})))),wc=v(w({slot:l(),prioritizationFee:l()})),kc=w({total:l(),validator:l(),foundation:l(),epoch:l()}),Sc=w({epoch:l(),slotIndex:l(),slotsInEpoch:l(),absoluteSlot:l(),blockHeight:C(l()),transactionCount:C(l())}),Ic=w({slotsPerEpoch:l(),leaderScheduleSlotOffset:l(),warmup:Te(),firstNormalEpoch:l(),firstNormalSlot:l()}),Bc=Tn(I(),v(l())),mt=R(ge([w({}),I()])),_c=w({err:mt}),Ac=ne("receivedSignature"),Ec=w({"solana-core":I(),"feature-set":C(l())}),vc=w({program:I(),programId:se,parsed:lt()}),Rc=w({programId:se,accounts:v(se),data:I()}),Oo=ae(w({err:R(ge([w({}),I()])),logs:R(v(I())),accounts:C(R(v(R(w({executable:Te(),owner:I(),lamports:l(),data:v(I()),rentEpoch:C(l())}))))),unitsConsumed:C(l()),returnData:C(R(w({programId:I(),data:Ur([I(),ne("base64")])}))),innerInstructions:C(R(v(w({index:l(),instructions:v(ge([vc,Rc]))}))))})),Lc=ae(w({byIdentity:Tn(I(),v(l())),range:w({firstSlot:l(),lastSlot:l()})}));Cc=U(mc),Oc=U(kc),zc=U(wc),Nc=U(Sc),Uc=U(Ic),Kc=U(Bc),Wc=U(l()),Fc=ae(w({total:l(),circulating:l(),nonCirculating:l(),nonCirculatingAccounts:v(se)})),os=w({amount:I(),uiAmount:R(l()),decimals:l(),uiAmountString:C(I())}),Dc=ae(v(w({address:se,amount:I(),uiAmount:R(l()),decimals:l(),uiAmountString:C(I())}))),qc=ae(v(w({pubkey:se,account:w({executable:Te(),owner:se,lamports:l(),data:ms,rentEpoch:l()})}))),is=w({program:I(),parsed:lt(),space:l()}),Mc=ae(v(w({pubkey:se,account:w({executable:Te(),owner:se,lamports:l(),data:is,rentEpoch:l()})}))),$c=ae(v(w({lamports:l(),address:se}))),Qt=w({executable:Te(),owner:se,lamports:l(),data:ms,rentEpoch:l()}),Vc=w({pubkey:se,account:Qt}),jc=_t(ge([Nr(O.Buffer),is]),ge([ei,is]),s=>Array.isArray(s)?_(s,ms):s),as=w({executable:Te(),owner:se,lamports:l(),data:jc,rentEpoch:l()}),Hc=w({pubkey:se,account:as}),Gc=w({state:ge([ne("active"),ne("inactive"),ne("activating"),ne("deactivating")]),active:l(),inactive:l()}),Yc=U(v(w({signature:I(),slot:l(),err:mt,memo:R(I()),blockTime:C(R(l()))}))),Jc=U(v(w({signature:I(),slot:l(),err:mt,memo:R(I()),blockTime:C(R(l()))}))),Xc=w({subscription:l(),result:nn(Qt)}),Zc=w({pubkey:se,account:Qt}),Qc=w({subscription:l(),result:nn(Zc)}),eu=w({parent:l(),slot:l(),root:l()}),tu=w({subscription:l(),result:eu}),ru=ge([w({type:ge([ne("firstShredReceived"),ne("completed"),ne("optimisticConfirmation"),ne("root")]),slot:l(),timestamp:l()}),w({type:ne("createdBank"),parent:l(),slot:l(),timestamp:l()}),w({type:ne("frozen"),slot:l(),timestamp:l(),stats:w({numTransactionEntries:l(),numSuccessfulTransactions:l(),numFailedTransactions:l(),maxTransactionsPerEntry:l()})}),w({type:ne("dead"),slot:l(),timestamp:l(),err:I()})]),nu=w({subscription:l(),result:ru}),su=w({subscription:l(),result:nn(ge([_c,Ac]))}),ou=w({subscription:l(),result:l()}),iu=w({pubkey:I(),gossip:R(I()),tpu:R(I()),rpc:R(I()),version:R(I())}),zo=w({votePubkey:I(),nodePubkey:I(),activatedStake:l(),epochVoteAccount:Te(),epochCredits:v(Ur([l(),l(),l()])),commission:l(),lastVote:l(),rootSlot:R(l())}),au=U(w({current:v(zo),delinquent:v(zo)})),cu=ge([ne("processed"),ne("confirmed"),ne("finalized")]),uu=w({slot:l(),confirmations:R(l()),err:mt,confirmationStatus:C(cu)}),fu=ae(v(R(uu))),lu=U(l()),ni=w({accountKey:se,writableIndexes:v(l()),readonlyIndexes:v(l())}),bs=w({signatures:v(I()),message:w({accountKeys:v(I()),header:w({numRequiredSignatures:l(),numReadonlySignedAccounts:l(),numReadonlyUnsignedAccounts:l()}),instructions:v(w({accounts:v(l()),data:I(),programIdIndex:l()})),recentBlockhash:I(),addressTableLookups:C(v(ni))})}),si=w({pubkey:se,signer:Te(),writable:Te(),source:C(ge([ne("transaction"),ne("lookupTable")]))}),oi=w({accountKeys:v(si),signatures:v(I())}),ii=w({parsed:lt(),program:I(),programId:se}),ai=w({accounts:v(se),data:I(),programId:se}),du=ge([ai,ii]),hu=ge([w({parsed:lt(),program:I(),programId:I()}),w({accounts:v(I()),data:I(),programId:I()})]),ci=_t(du,hu,s=>"accounts"in s?_(s,ai):_(s,ii)),ui=w({signatures:v(I()),message:w({accountKeys:v(si),instructions:v(ci),recentBlockhash:I(),addressTableLookups:C(R(v(ni)))})}),Jr=w({accountIndex:l(),mint:I(),owner:C(I()),programId:C(I()),uiTokenAmount:os}),fi=w({writable:v(se),readonly:v(se)}),sn=w({err:mt,fee:l(),innerInstructions:C(R(v(w({index:l(),instructions:v(w({accounts:v(l()),data:I(),programIdIndex:l()}))})))),preBalances:v(l()),postBalances:v(l()),logMessages:C(R(v(I()))),preTokenBalances:C(R(v(Jr))),postTokenBalances:C(R(v(Jr))),loadedAddresses:C(fi),computeUnitsConsumed:C(l())}),ws=w({err:mt,fee:l(),innerInstructions:C(R(v(w({index:l(),instructions:v(ci)})))),preBalances:v(l()),postBalances:v(l()),logMessages:C(R(v(I()))),preTokenBalances:C(R(v(Jr))),postTokenBalances:C(R(v(Jr))),loadedAddresses:C(fi),computeUnitsConsumed:C(l())}),Pt=ge([ne(0),ne("legacy")]),bt=w({pubkey:I(),lamports:l(),postBalance:R(l()),rewardType:R(I()),commission:C(R(l()))}),yu=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),transactions:v(w({transaction:bs,meta:R(sn),version:C(Pt)})),rewards:C(v(bt)),blockTime:R(l()),blockHeight:R(l())}))),pu=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),rewards:C(v(bt)),blockTime:R(l()),blockHeight:R(l())}))),gu=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),transactions:v(w({transaction:oi,meta:R(sn),version:C(Pt)})),rewards:C(v(bt)),blockTime:R(l()),blockHeight:R(l())}))),mu=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),transactions:v(w({transaction:ui,meta:R(ws),version:C(Pt)})),rewards:C(v(bt)),blockTime:R(l()),blockHeight:R(l())}))),bu=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),transactions:v(w({transaction:oi,meta:R(ws),version:C(Pt)})),rewards:C(v(bt)),blockTime:R(l()),blockHeight:R(l())}))),wu=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),rewards:C(v(bt)),blockTime:R(l()),blockHeight:R(l())}))),ku=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),transactions:v(w({transaction:bs,meta:R(sn)})),rewards:C(v(bt)),blockTime:R(l())}))),No=U(R(w({blockhash:I(),previousBlockhash:I(),parentSlot:l(),signatures:v(I()),blockTime:R(l())}))),Vn=U(R(w({slot:l(),meta:R(sn),blockTime:C(R(l())),transaction:bs,version:C(Pt)}))),Mr=U(R(w({slot:l(),transaction:ui,meta:R(ws),blockTime:C(R(l())),version:C(Pt)}))),Su=ae(w({blockhash:I(),lastValidBlockHeight:l()})),Iu=ae(Te()),Bu=w({slot:l(),numTransactions:l(),numSlots:l(),samplePeriodSecs:l()}),_u=U(v(Bu)),Au=ae(R(w({feeCalculator:w({lamportsPerSignature:l()})}))),Eu=U(I()),vu=U(I()),Ru=w({err:mt,logs:v(I()),signature:I()}),Lu=w({result:nn(Ru),subscription:l()}),xu={"solana-client":"js/1.0.0-maintenance"},cs=class{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let f={};return y=>g(this,null,function*(){let{commitment:k,config:B}=ee(y),m=this._buildArgs([],k,void 0,B),h=Po(m);return f[h]=f[h]??g(this,null,function*(){try{let b=yield this._rpcRequest("getBlockHeight",m),S=_(b,U(l()));if("error"in S)throw new x(S.error,"failed to get block height information");return S.result}finally{delete f[h]}}),yield f[h]})})();let r,n,o,i,c,a;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,o=t.fetch,i=t.fetchMiddleware,c=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=pc(e),this._rpcWsEndpoint=r||yc(e),this._rpcClient=xc(e,n,o,i,c,a),this._rpcRequest=Pc(this._rpcClient),this._rpcBatchRequest=Tc(this._rpcClient),this._rpcWebSocket=new ss(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}getBalanceAndContext(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgs([e.toBase58()],r,void 0,n),i=yield this._rpcRequest("getBalance",o),c=_(i,ae(l()));if("error"in c)throw new x(c.error,`failed to get balance for ${e.toBase58()}`);return c.result})}getBalance(e,t){return g(this,null,function*(){return yield this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})})}getBlockTime(e){return g(this,null,function*(){let t=yield this._rpcRequest("getBlockTime",[e]),r=_(t,U(R(l())));if("error"in r)throw new x(r.error,`failed to get block time for slot ${e}`);return r.result})}getMinimumLedgerSlot(){return g(this,null,function*(){let e=yield this._rpcRequest("minimumLedgerSlot",[]),t=_(e,U(l()));if("error"in t)throw new x(t.error,"failed to get minimum ledger slot");return t.result})}getFirstAvailableBlock(){return g(this,null,function*(){let e=yield this._rpcRequest("getFirstAvailableBlock",[]),t=_(e,Wc);if("error"in t)throw new x(t.error,"failed to get first available block");return t.result})}getSupply(e){return g(this,null,function*(){let t={};typeof e=="string"?t={commitment:e}:e?t=F(N({},e),{commitment:e&&e.commitment||this.commitment}):t={commitment:this.commitment};let r=yield this._rpcRequest("getSupply",[t]),n=_(r,Fc);if("error"in n)throw new x(n.error,"failed to get supply");return n.result})}getTokenSupply(e,t){return g(this,null,function*(){let r=this._buildArgs([e.toBase58()],t),n=yield this._rpcRequest("getTokenSupply",r),o=_(n,ae(os));if("error"in o)throw new x(o.error,"failed to get token supply");return o.result})}getTokenAccountBalance(e,t){return g(this,null,function*(){let r=this._buildArgs([e.toBase58()],t),n=yield this._rpcRequest("getTokenAccountBalance",r),o=_(n,ae(os));if("error"in o)throw new x(o.error,"failed to get token account balance");return o.result})}getTokenAccountsByOwner(e,t,r){return g(this,null,function*(){let{commitment:n,config:o}=ee(r),i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});let c=this._buildArgs(i,n,"base64",o),a=yield this._rpcRequest("getTokenAccountsByOwner",c),f=_(a,qc);if("error"in f)throw new x(f.error,`failed to get token accounts owned by account ${e.toBase58()}`);return f.result})}getParsedTokenAccountsByOwner(e,t,r){return g(this,null,function*(){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});let o=this._buildArgs(n,r,"jsonParsed"),i=yield this._rpcRequest("getTokenAccountsByOwner",o),c=_(i,Mc);if("error"in c)throw new x(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result})}getLargestAccounts(e){return g(this,null,function*(){let t=F(N({},e),{commitment:e&&e.commitment||this.commitment}),r=t.filter||t.commitment?[t]:[],n=yield this._rpcRequest("getLargestAccounts",r),o=_(n,$c);if("error"in o)throw new x(o.error,"failed to get largest accounts");return o.result})}getTokenLargestAccounts(e,t){return g(this,null,function*(){let r=this._buildArgs([e.toBase58()],t),n=yield this._rpcRequest("getTokenLargestAccounts",r),o=_(n,Dc);if("error"in o)throw new x(o.error,"failed to get token largest accounts");return o.result})}getAccountInfoAndContext(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgs([e.toBase58()],r,"base64",n),i=yield this._rpcRequest("getAccountInfo",o),c=_(i,ae(R(Qt)));if("error"in c)throw new x(c.error,`failed to get info about account ${e.toBase58()}`);return c.result})}getParsedAccountInfo(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",n),i=yield this._rpcRequest("getAccountInfo",o),c=_(i,ae(R(as)));if("error"in c)throw new x(c.error,`failed to get info about account ${e.toBase58()}`);return c.result})}getAccountInfo(e,t){return g(this,null,function*(){try{return(yield this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}})}getMultipleParsedAccounts(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=e.map(f=>f.toBase58()),i=this._buildArgs([o],r,"jsonParsed",n),c=yield this._rpcRequest("getMultipleAccounts",i),a=_(c,ae(v(R(as))));if("error"in a)throw new x(a.error,`failed to get info for accounts ${o}`);return a.result})}getMultipleAccountsInfoAndContext(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=e.map(f=>f.toBase58()),i=this._buildArgs([o],r,"base64",n),c=yield this._rpcRequest("getMultipleAccounts",i),a=_(c,ae(v(R(Qt))));if("error"in a)throw new x(a.error,`failed to get info for accounts ${o}`);return a.result})}getMultipleAccountsInfo(e,t){return g(this,null,function*(){return(yield this.getMultipleAccountsInfoAndContext(e,t)).value})}getStakeActivation(e,t,r){return g(this,null,function*(){let{commitment:n,config:o}=ee(t),i=this._buildArgs([e.toBase58()],n,void 0,F(N({},o),{epoch:r??o?.epoch})),c=yield this._rpcRequest("getStakeActivation",i),a=_(c,U(Gc));if("error"in a)throw new x(a.error,`failed to get Stake Activation ${e.toBase58()}`);return a.result})}getProgramAccounts(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),k=n||{},{encoding:o}=k,i=qe(k,["encoding"]),c=this._buildArgs([e.toBase58()],r,o||"base64",N(N({},i),i.filters?{filters:Co(i.filters)}:null)),a=yield this._rpcRequest("getProgramAccounts",c),f=v(Vc),y=i.withContext===!0?_(a,ae(f)):_(a,U(f));if("error"in y)throw new x(y.error,`failed to get accounts owned by program ${e.toBase58()}`);return y.result})}getParsedProgramAccounts(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgs([e.toBase58()],r,"jsonParsed",n),i=yield this._rpcRequest("getProgramAccounts",o),c=_(i,U(v(Hc)));if("error"in c)throw new x(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result})}confirmTransaction(e,t){return g(this,null,function*(){let r;if(typeof e=="string")r=e;else{let o=e;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let n;try{n=le.default.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return $(n.length===64,"signature has invalid length"),typeof e=="string"?yield this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?yield this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):yield this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,o=!1,i=new Promise((a,f)=>{try{r=this.onSignature(t,(k,B)=>{r=void 0;let m={context:B,value:k};a({__type:Ge.PROCESSED,response:m})},e);let y=new Promise(k=>{r==null?k():n=this._onSubscriptionStateChange(r,B=>{B==="subscribed"&&k()})});g(this,null,function*(){if(yield y,o)return;let k=yield this.getSignatureStatus(t);if(o||k==null)return;let{context:B,value:m}=k;if(m!=null)if(m?.err)f(m.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(m.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(m.confirmationStatus==="processed"||m.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,a({__type:Ge.PROCESSED,response:{context:B,value:m}})}})}catch(y){f(y)}});return{abortConfirmation:()=>{n&&(n(),n=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:i}}confirmTransactionUsingBlockHeightExceedanceStrategy(o){return g(this,arguments,function*({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1,c=new Promise(B=>{let m=()=>g(this,null,function*(){try{return yield this.getBlockHeight(e)}catch{return-1}});g(this,null,function*(){let h=yield m();if(!i){for(;h<=r;)if(yield dt(1e3),i||(h=yield m(),i))return;B({__type:Ge.BLOCKHEIGHT_EXCEEDED})}})}),{abortConfirmation:a,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),y=this.getCancellationPromise(t),k;try{let B=yield Promise.race([y,f,c]);if(B.__type===Ge.PROCESSED)k=B.response;else throw new Jt(n)}finally{i=!0,a()}return k})}confirmTransactionUsingDurableNonceStrategy(c){return g(this,arguments,function*({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:o,signature:i}}){let a=!1,f=new Promise(h=>{let b=o,S=null,p=()=>g(this,null,function*(){try{let{context:A,value:L}=yield this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return S=A.slot,L?.nonce}catch{return b}});g(this,null,function*(){if(b=yield p(),!a)for(;;){if(o!==b){h({__type:Ge.NONCE_INVALID,slotInWhichNonceDidAdvance:S});return}if(yield dt(2e3),a||(b=yield p(),a))return}})}),{abortConfirmation:y,confirmationPromise:k}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),B=this.getCancellationPromise(t),m;try{let h=yield Promise.race([B,k,f]);if(h.__type===Ge.PROCESSED)m=h.response;else{let b;for(;;){let S=yield this.getSignatureStatus(i);if(S==null)break;if(S.context.slot<(h.slotInWhichNonceDidAdvance??r)){yield dt(400);continue}b=S;break}if(b?.value){let S=e||"finalized",{confirmationStatus:p}=b.value;switch(S){case"processed":case"recent":if(p!=="processed"&&p!=="confirmed"&&p!=="finalized")throw new nt(i);break;case"confirmed":case"single":case"singleGossip":if(p!=="confirmed"&&p!=="finalized")throw new nt(i);break;case"finalized":case"max":case"root":if(p!=="finalized")throw new nt(i);break;default:}m={context:b.context,value:{err:b.value.err}}}else throw new nt(i)}}finally{a=!0,y()}return m})}confirmTransactionUsingLegacyTimeoutStrategy(r){return g(this,arguments,function*({commitment:e,signature:t}){let n,o=new Promise(f=>{let y=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{y=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:Ge.TIMED_OUT,timeoutMs:y}),y)}),{abortConfirmation:i,confirmationPromise:c}=this.getTransactionConfirmationPromise({commitment:e,signature:t}),a;try{let f=yield Promise.race([c,o]);if(f.__type===Ge.PROCESSED)a=f.response;else throw new Xt(t,f.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a})}getClusterNodes(){return g(this,null,function*(){let e=yield this._rpcRequest("getClusterNodes",[]),t=_(e,U(v(iu)));if("error"in t)throw new x(t.error,"failed to get cluster nodes");return t.result})}getVoteAccounts(e){return g(this,null,function*(){let t=this._buildArgs([],e),r=yield this._rpcRequest("getVoteAccounts",t),n=_(r,au);if("error"in n)throw new x(n.error,"failed to get vote accounts");return n.result})}getSlot(e){return g(this,null,function*(){let{commitment:t,config:r}=ee(e),n=this._buildArgs([],t,void 0,r),o=yield this._rpcRequest("getSlot",n),i=_(o,U(l()));if("error"in i)throw new x(i.error,"failed to get slot");return i.result})}getSlotLeader(e){return g(this,null,function*(){let{commitment:t,config:r}=ee(e),n=this._buildArgs([],t,void 0,r),o=yield this._rpcRequest("getSlotLeader",n),i=_(o,U(I()));if("error"in i)throw new x(i.error,"failed to get slot leader");return i.result})}getSlotLeaders(e,t){return g(this,null,function*(){let r=[e,t],n=yield this._rpcRequest("getSlotLeaders",r),o=_(n,U(v(se)));if("error"in o)throw new x(o.error,"failed to get slot leaders");return o.result})}getSignatureStatus(e,t){return g(this,null,function*(){let{context:r,value:n}=yield this.getSignatureStatuses([e],t);$(n.length===1);let o=n[0];return{context:r,value:o}})}getSignatureStatuses(e,t){return g(this,null,function*(){let r=[e];t&&r.push(t);let n=yield this._rpcRequest("getSignatureStatuses",r),o=_(n,fu);if("error"in o)throw new x(o.error,"failed to get signature status");return o.result})}getTransactionCount(e){return g(this,null,function*(){let{commitment:t,config:r}=ee(e),n=this._buildArgs([],t,void 0,r),o=yield this._rpcRequest("getTransactionCount",n),i=_(o,U(l()));if("error"in i)throw new x(i.error,"failed to get transaction count");return i.result})}getTotalSupply(e){return g(this,null,function*(){return(yield this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total})}getInflationGovernor(e){return g(this,null,function*(){let t=this._buildArgs([],e),r=yield this._rpcRequest("getInflationGovernor",t),n=_(r,Cc);if("error"in n)throw new x(n.error,"failed to get inflation");return n.result})}getInflationReward(e,t,r){return g(this,null,function*(){let{commitment:n,config:o}=ee(r),i=this._buildArgs([e.map(f=>f.toBase58())],n,void 0,F(N({},o),{epoch:t??o?.epoch})),c=yield this._rpcRequest("getInflationReward",i),a=_(c,bc);if("error"in a)throw new x(a.error,"failed to get inflation reward");return a.result})}getInflationRate(){return g(this,null,function*(){let e=yield this._rpcRequest("getInflationRate",[]),t=_(e,Oc);if("error"in t)throw new x(t.error,"failed to get inflation rate");return t.result})}getEpochInfo(e){return g(this,null,function*(){let{commitment:t,config:r}=ee(e),n=this._buildArgs([],t,void 0,r),o=yield this._rpcRequest("getEpochInfo",n),i=_(o,Nc);if("error"in i)throw new x(i.error,"failed to get epoch info");return i.result})}getEpochSchedule(){return g(this,null,function*(){let e=yield this._rpcRequest("getEpochSchedule",[]),t=_(e,Uc);if("error"in t)throw new x(t.error,"failed to get epoch schedule");let r=t.result;return new Yr(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)})}getLeaderSchedule(){return g(this,null,function*(){let e=yield this._rpcRequest("getLeaderSchedule",[]),t=_(e,Kc);if("error"in t)throw new x(t.error,"failed to get leader schedule");return t.result})}getMinimumBalanceForRentExemption(e,t){return g(this,null,function*(){let r=this._buildArgs([e],t),n=yield this._rpcRequest("getMinimumBalanceForRentExemption",r),o=_(n,lu);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result})}getRecentBlockhashAndContext(e){return g(this,null,function*(){let{context:t,value:{blockhash:r}}=yield this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}})}getRecentPerformanceSamples(e){return g(this,null,function*(){let t=yield this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=_(t,_u);if("error"in r)throw new x(r.error,"failed to get recent performance samples");return r.result})}getFeeCalculatorForBlockhash(e,t){return g(this,null,function*(){let r=this._buildArgs([e],t),n=yield this._rpcRequest("getFeeCalculatorForBlockhash",r),o=_(n,Au);if("error"in o)throw new x(o.error,"failed to get fee calculator");let{context:i,value:c}=o.result;return{context:i,value:c!==null?c.feeCalculator:null}})}getFeeForMessage(e,t){return g(this,null,function*(){let r=K(e.serialize()).toString("base64"),n=this._buildArgs([r],t),o=yield this._rpcRequest("getFeeForMessage",n),i=_(o,ae(R(l())));if("error"in i)throw new x(i.error,"failed to get fee for message");if(i.result===null)throw new Error("invalid blockhash");return i.result})}getRecentPrioritizationFees(e){return g(this,null,function*(){let t=e?.lockedWritableAccounts?.map(i=>i.toBase58()),r=t?.length?[t]:[],n=yield this._rpcRequest("getRecentPrioritizationFees",r),o=_(n,zc);if("error"in o)throw new x(o.error,"failed to get recent prioritization fees");return o.result})}getRecentBlockhash(e){return g(this,null,function*(){try{return(yield this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}})}getLatestBlockhash(e){return g(this,null,function*(){try{return(yield this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}})}getLatestBlockhashAndContext(e){return g(this,null,function*(){let{commitment:t,config:r}=ee(e),n=this._buildArgs([],t,void 0,r),o=yield this._rpcRequest("getLatestBlockhash",n),i=_(o,Su);if("error"in i)throw new x(i.error,"failed to get latest blockhash");return i.result})}isBlockhashValid(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgs([e],r,void 0,n),i=yield this._rpcRequest("isBlockhashValid",o),c=_(i,Iu);if("error"in c)throw new x(c.error,"failed to determine if the blockhash `"+e+"`is valid");return c.result})}getVersion(){return g(this,null,function*(){let e=yield this._rpcRequest("getVersion",[]),t=_(e,U(Ec));if("error"in t)throw new x(t.error,"failed to get version");return t.result})}getGenesisHash(){return g(this,null,function*(){let e=yield this._rpcRequest("getGenesisHash",[]),t=_(e,U(I()));if("error"in t)throw new x(t.error,"failed to get genesis hash");return t.result})}getBlock(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,n),i=yield this._rpcRequest("getBlock",o);try{switch(n?.transactionDetails){case"accounts":{let c=_(i,gu);if("error"in c)throw c.error;return c.result}case"none":{let c=_(i,pu);if("error"in c)throw c.error;return c.result}default:{let c=_(i,yu);if("error"in c)throw c.error;let{result:a}=c;return a?F(N({},a),{transactions:a.transactions.map(({transaction:f,meta:y,version:k})=>({meta:y,transaction:F(N({},f),{message:$n(k,f.message)}),version:k}))}):null}}}catch(c){throw new x(c,"failed to get confirmed block")}})}getParsedBlock(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),i=yield this._rpcRequest("getBlock",o);try{switch(n?.transactionDetails){case"accounts":{let c=_(i,bu);if("error"in c)throw c.error;return c.result}case"none":{let c=_(i,wu);if("error"in c)throw c.error;return c.result}default:{let c=_(i,mu);if("error"in c)throw c.error;return c.result}}}catch(c){throw new x(c,"failed to get block")}})}getBlockProduction(e){return g(this,null,function*(){let t,r;if(typeof e=="string")r=e;else if(e){let c=e,{commitment:a}=c,f=qe(c,["commitment"]);r=a,t=f}let n=this._buildArgs([],r,"base64",t),o=yield this._rpcRequest("getBlockProduction",n),i=_(o,Lc);if("error"in i)throw new x(i.error,"failed to get block production information");return i.result})}getTransaction(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgsAtLeastConfirmed([e],r,void 0,n),i=yield this._rpcRequest("getTransaction",o),c=_(i,Vn);if("error"in c)throw new x(c.error,"failed to get transaction");let a=c.result;return a&&F(N({},a),{transaction:F(N({},a.transaction),{message:$n(a.version,a.transaction.message)})})})}getParsedTransaction(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),i=yield this._rpcRequest("getTransaction",o),c=_(i,Mr);if("error"in c)throw new x(c.error,"failed to get transaction");return c.result})}getParsedTransactions(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=e.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],r,"jsonParsed",n)}));return(yield this._rpcBatchRequest(o)).map(a=>{let f=_(a,Mr);if("error"in f)throw new x(f.error,"failed to get transactions");return f.result})})}getTransactions(e,t){return g(this,null,function*(){let{commitment:r,config:n}=ee(t),o=e.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],r,void 0,n)}));return(yield this._rpcBatchRequest(o)).map(a=>{let f=_(a,Vn);if("error"in f)throw new x(f.error,"failed to get transactions");let y=f.result;return y&&F(N({},y),{transaction:F(N({},y.transaction),{message:$n(y.version,y.transaction.message)})})})})}getConfirmedBlock(e,t){return g(this,null,function*(){let r=this._buildArgsAtLeastConfirmed([e],t),n=yield this._rpcRequest("getBlock",r),o=_(n,ku);if("error"in o)throw new x(o.error,"failed to get confirmed block");let i=o.result;if(!i)throw new Error("Confirmed block "+e+" not found");let c=F(N({},i),{transactions:i.transactions.map(({transaction:a,meta:f})=>{let y=new Fe(a.message);return{meta:f,transaction:F(N({},a),{message:y})}})});return F(N({},c),{transactions:c.transactions.map(({transaction:a,meta:f})=>({meta:f,transaction:G.populate(a.message,a.signatures)}))})})}getBlocks(e,t,r){return g(this,null,function*(){let n=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),o=yield this._rpcRequest("getBlocks",n),i=_(o,U(v(l())));if("error"in i)throw new x(i.error,"failed to get blocks");return i.result})}getBlockSignatures(e,t){return g(this,null,function*(){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=yield this._rpcRequest("getBlock",r),o=_(n,No);if("error"in o)throw new x(o.error,"failed to get block");let i=o.result;if(!i)throw new Error("Block "+e+" not found");return i})}getConfirmedBlockSignatures(e,t){return g(this,null,function*(){let r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=yield this._rpcRequest("getBlock",r),o=_(n,No);if("error"in o)throw new x(o.error,"failed to get confirmed block");let i=o.result;if(!i)throw new Error("Confirmed block "+e+" not found");return i})}getConfirmedTransaction(e,t){return g(this,null,function*(){let r=this._buildArgsAtLeastConfirmed([e],t),n=yield this._rpcRequest("getTransaction",r),o=_(n,Vn);if("error"in o)throw new x(o.error,"failed to get transaction");let i=o.result;if(!i)return i;let c=new Fe(i.transaction.message),a=i.transaction.signatures;return F(N({},i),{transaction:G.populate(c,a)})})}getParsedConfirmedTransaction(e,t){return g(this,null,function*(){let r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=yield this._rpcRequest("getTransaction",r),o=_(n,Mr);if("error"in o)throw new x(o.error,"failed to get confirmed transaction");return o.result})}getParsedConfirmedTransactions(e,t){return g(this,null,function*(){let r=e.map(i=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([i],t,"jsonParsed")}));return(yield this._rpcBatchRequest(r)).map(i=>{let c=_(i,Mr);if("error"in c)throw new x(c.error,"failed to get confirmed transactions");return c.result})})}getConfirmedSignaturesForAddress(e,t,r){return g(this,null,function*(){let n={},o=yield this.getFirstAvailableBlock();for(;!("until"in n)&&(t--,!(t<=0||t<o));)try{let a=yield this.getConfirmedBlockSignatures(t,"finalized");a.signatures.length>0&&(n.until=a.signatures[a.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}let i=yield this.getSlot("finalized");for(;!("before"in n)&&(r++,!(r>i));)try{let a=yield this.getConfirmedBlockSignatures(r);a.signatures.length>0&&(n.before=a.signatures[a.signatures.length-1].toString())}catch(a){if(a instanceof Error&&a.message.includes("skipped"))continue;throw a}return(yield this.getConfirmedSignaturesForAddress2(e,n)).map(a=>a.signature)})}getConfirmedSignaturesForAddress2(e,t,r){return g(this,null,function*(){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=yield this._rpcRequest("getConfirmedSignaturesForAddress2",n),i=_(o,Yc);if("error"in i)throw new x(i.error,"failed to get confirmed signatures for address");return i.result})}getSignaturesForAddress(e,t,r){return g(this,null,function*(){let n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),o=yield this._rpcRequest("getSignaturesForAddress",n),i=_(o,Jc);if("error"in i)throw new x(i.error,"failed to get signatures for address");return i.result})}getAddressLookupTable(e,t){return g(this,null,function*(){let{context:r,value:n}=yield this.getAccountInfoAndContext(e,t),o=null;return n!==null&&(o=new Zt({key:e,state:Zt.deserialize(n.data)})),{context:r,value:o}})}getNonceAndContext(e,t){return g(this,null,function*(){let{context:r,value:n}=yield this.getAccountInfoAndContext(e,t),o=null;return n!==null&&(o=Gr.fromAccountData(n.data)),{context:r,value:o}})}getNonce(e,t){return g(this,null,function*(){return yield this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})})}requestAirdrop(e,t){return g(this,null,function*(){let r=yield this._rpcRequest("requestAirdrop",[e.toBase58(),t]),n=_(r,Eu);if("error"in n)throw new x(n.error,`airdrop to ${e.toBase58()} failed`);return n.result})}_blockhashWithExpiryBlockHeight(e){return g(this,null,function*(){if(!e){for(;this._pollingBlockhash;)yield dt(100);let r=Date.now()-this._blockhashInfo.lastFetch>=ti;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return yield this._pollNewBlockhash()})}_pollNewBlockhash(){return g(this,null,function*(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let n=0;n<50;n++){let o=yield this.getLatestBlockhash("finalized");if(r!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;yield dt(Xo/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}})}getStakeMinimumDelegation(e){return g(this,null,function*(){let{commitment:t,config:r}=ee(e),n=this._buildArgs([],t,"base64",r),o=yield this._rpcRequest("getStakeMinimumDelegation",n),i=_(o,ae(l()));if("error"in i)throw new x(i.error,"failed to get stake minimum delegation");return i.result})}simulateTransaction(e,t,r){return g(this,null,function*(){if("message"in e){let b=e.serialize(),S=O.Buffer.from(b).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");let p=t||{};p.encoding="base64","commitment"in p||(p.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(p.innerInstructions=t.innerInstructions);let A=[S,p],L=yield this._rpcRequest("simulateTransaction",A),T=_(L,Oo);if("error"in T)throw new Error("failed to simulate transaction: "+T.error.message);return T.result}let n;if(e instanceof G){let h=e;n=new G,n.feePayer=h.feePayer,n.instructions=e.instructions,n.nonceInfo=h.nonceInfo,n.signatures=h.signatures}else n=G.populate(e),n._message=n._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");let o=t;if(n.nonceInfo&&o)n.sign(...o);else{let h=this._disableBlockhashCaching;for(;;){let b=yield this._blockhashWithExpiryBlockHeight(h);if(n.lastValidBlockHeight=b.lastValidBlockHeight,n.recentBlockhash=b.blockhash,!o)break;if(n.sign(...o),!n.signature)throw new Error("!signature");let S=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(S)&&!this._blockhashInfo.transactionSignatures.includes(S)){this._blockhashInfo.simulatedSignatures.push(S);break}else h=!0}}let i=n._compile(),c=i.serialize(),f=n._serialize(c).toString("base64"),y={encoding:"base64",commitment:this.commitment};if(r){let h=(Array.isArray(r)?r:i.nonProgramIds()).map(b=>b.toBase58());y.accounts={encoding:"base64",addresses:h}}o&&(y.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(y.innerInstructions=t.innerInstructions);let k=[f,y],B=yield this._rpcRequest("simulateTransaction",k),m=_(B,Oo);if("error"in m){let h;if("data"in m.error&&(h=m.error.data.logs,h&&Array.isArray(h))){let b=`
    `,S=b+h.join(b);console.error(m.error.message,S)}throw new pt({action:"simulate",signature:"",transactionMessage:m.error.message,logs:h})}return m.result})}sendTransaction(e,t,r){return g(this,null,function*(){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");let i=e.serialize();return yield this.sendRawTransaction(i,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");let n=t;if(e.nonceInfo)e.sign(...n);else{let i=this._disableBlockhashCaching;for(;;){let c=yield this._blockhashWithExpiryBlockHeight(i);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");let a=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(a))i=!0;else{this._blockhashInfo.transactionSignatures.push(a);break}}}let o=e.serialize();return yield this.sendRawTransaction(o,r)})}sendRawTransaction(e,t){return g(this,null,function*(){let r=K(e).toString("base64");return yield this.sendEncodedTransaction(r,t)})}sendEncodedTransaction(e,t){return g(this,null,function*(){let r={encoding:"base64"},n=t&&t.skipPreflight,o=n===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),o&&(r.preflightCommitment=o);let i=[e,r],c=yield this._rpcRequest("sendTransaction",i),a=_(c,vu);if("error"in a){let f;throw"data"in a.error&&(f=a.error.data.logs),new pt({action:n?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:f})}return a.result})}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{g(this,null,function*(){try{yield this._rpcWebSocket.notify("ping")}catch{}})},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,F(N({},r),{state:"pending"}))})}_setSubscription(e,t){let r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){let n=this._subscriptionStateChangeCallbacksByHash[e];n&&n.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){let r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};let n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),n.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}_updateSubscriptions(){return g(this,null,function*(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;yield Promise.all(Object.keys(this._subscriptionsByHash).map(r=>g(this,null,function*(){let n=this._subscriptionsByHash[r];if(n!==void 0)switch(n.state){case"pending":case"unsubscribed":if(n.callbacks.size===0){delete this._subscriptionsByHash[r],n.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],yield this._updateSubscriptions();return}yield g(this,null,function*(){let{args:o,method:i}=n;try{this._setSubscription(r,F(N({},n),{state:"subscribing"}));let c=yield this._rpcWebSocket.call(i,o);this._setSubscription(r,F(N({},n),{serverSubscriptionId:c,state:"subscribed"})),this._subscriptionCallbacksByServerSubscriptionId[c]=n.callbacks,yield this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:o,error:c}),!t())return;this._setSubscription(r,F(N({},n),{state:"pending"})),yield this._updateSubscriptions()}});break;case"subscribed":n.callbacks.size===0&&(yield g(this,null,function*(){let{serverSubscriptionId:o,unsubscribeMethod:i}=n;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(r,F(N({},n),{state:"unsubscribing"})),this._setSubscription(r,F(N({},n),{state:"unsubscribing"}));try{yield this._rpcWebSocket.call(i,[o])}catch(c){if(c instanceof Error&&console.error(`${i} error:`,c.message),!t())return;this._setSubscription(r,F(N({},n),{state:"subscribed"})),yield this._updateSubscriptions();return}}this._setSubscription(r,F(N({},n),{state:"unsubscribed"})),yield this._updateSubscriptions()}));break}})))})}_handleServerNotification(e,t){let r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(n=>{try{n(...t)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){let{result:t,subscription:r}=_(e,Xc);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){let r=this._nextClientSubscriptionId++,n=Po([e.method,t]),o=this._subscriptionsByHash[n];return o===void 0?this._subscriptionsByHash[n]=F(N({},e),{args:t,callbacks:new Set([e.callback]),state:"pending"}):o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=()=>g(this,null,function*(){delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];let i=this._subscriptionsByHash[n];$(i!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),i.callbacks.delete(e.callback),yield this._updateSubscriptions()}),this._updateSubscriptions(),r}onAccountChange(e,t,r){let{commitment:n,config:o}=ee(r),i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",o);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},i)}removeAccountChangeListener(e){return g(this,null,function*(){yield this._unsubscribeClientSubscription(e,"account change")})}_wsOnProgramAccountNotification(e){let{result:t,subscription:r}=_(e,Qc);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){let{commitment:o,config:i}=ee(r),c=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",i||(n?{filters:Co(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}removeProgramAccountChangeListener(e){return g(this,null,function*(){yield this._unsubscribeClientSubscription(e,"program account change")})}onLogs(e,t,r){let n=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}removeOnLogsListener(e){return g(this,null,function*(){yield this._unsubscribeClientSubscription(e,"logs")})}_wsOnLogsNotification(e){let{result:t,subscription:r}=_(e,Lu);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:r}=_(e,tu);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}removeSlotChangeListener(e){return g(this,null,function*(){yield this._unsubscribeClientSubscription(e,"slot change")})}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:r}=_(e,nu);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}removeSlotUpdateListener(e){return g(this,null,function*(){yield this._unsubscribeClientSubscription(e,"slot update")})}_unsubscribeClientSubscription(e,t){return g(this,null,function*(){let r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?yield r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)})}_buildArgs(e,t,r,n){let o=t||this._commitment;if(o||r||n){let i={};r&&(i.encoding=r),o&&(i.commitment=o),n&&(i=Object.assign(i,n)),e.push(i)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){let o=t||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){let{result:t,subscription:r}=_(e,su);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){let n=this._buildArgs([e],r||this._commitment||"finalized"),o=this._makeSubscription({callback:(i,c)=>{if(i.type==="status"){t(i.result,c);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return o}onSignatureWithOptions(e,t,r){let a=F(N({},r),{commitment:r&&r.commitment||this._commitment||"finalized"}),{commitment:n}=a,o=qe(a,["commitment"]),i=this._buildArgs([e],n,void 0,o),c=this._makeSubscription({callback:(f,y)=>{t(f,y);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return c}removeSignatureListener(e){return g(this,null,function*(){yield this._unsubscribeClientSubscription(e,"signature result")})}_wsOnRootNotification(e){let{result:t,subscription:r}=_(e,ou);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}removeRootChangeListener(e){return g(this,null,function*(){yield this._unsubscribeClientSubscription(e,"root change")})}},Xr=class s{constructor(e){this._keypair=void 0,this._keypair=e??vo()}static generate(){return new s(vo())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");let r=e.slice(32,64);if(!t||!t.skipValidation){let n=e.slice(0,32),o=jr(n);for(let i=0;i<32;i++)if(r[i]!==o[i])throw new Error("provided secretKey is invalid")}return new s({publicKey:r,secretKey:e})}static fromSeed(e){let t=jr(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new s({publicKey:t,secretKey:r})}get publicKey(){return new E(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Ye=Object.freeze({CreateLookupTable:{index:0,layout:u.struct([u.u32("instruction"),vt("recentSlot"),u.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:u.struct([u.u32("instruction")])},ExtendLookupTable:{index:2,layout:u.struct([u.u32("instruction"),vt(),u.seq(W(),u.offset(u.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:u.struct([u.u32("instruction")])},CloseLookupTable:{index:4,layout:u.struct([u.u32("instruction")])}}),us=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=u.u32("instruction").decode(e.data),n;for(let[o,i]of Object.entries(Ye))if(i.index==r){n=o;break}if(!n)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return n}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);let{recentSlot:t}=H(Ye.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);let{addresses:t}=H(Ye.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(r=>new E(r))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(er.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},er=class{constructor(){}static createLookupTable(e){let[t,r]=E.findProgramAddressSync([e.authority.toBuffer(),(0,rr.toBufferLE)(BigInt(e.recentSlot),8)],this.programId),n=Ye.CreateLookupTable,o=q(n,{recentSlot:BigInt(e.recentSlot),bumpSeed:r}),i=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ye.programId,isSigner:!1,isWritable:!1}];return[new J({programId:this.programId,keys:i,data:o}),t]}static freezeLookupTable(e){let t=Ye.FreezeLookupTable,r=q(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new J({programId:this.programId,keys:n,data:r})}static extendLookupTable(e){let t=Ye.ExtendLookupTable,r=q(t,{addresses:e.addresses.map(o=>o.toBytes())}),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&n.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:ye.programId,isSigner:!1,isWritable:!1}),new J({programId:this.programId,keys:n,data:r})}static deactivateLookupTable(e){let t=Ye.DeactivateLookupTable,r=q(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new J({programId:this.programId,keys:n,data:r})}static closeLookupTable(e){let t=Ye.CloseLookupTable,r=q(t),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new J({programId:this.programId,keys:n,data:r})}};er.programId=new E("AddressLookupTab1e1111111111111111111111111");fs=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=u.u8("instruction").decode(e.data),n;for(let[o,i]of Object.entries(Ue))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return n}static decodeRequestUnits(e){this.checkProgramId(e.programId);let{units:t,additionalFee:r}=H(Ue.RequestUnits,e.data);return{units:t,additionalFee:r}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);let{bytes:t}=H(Ue.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);let{units:t}=H(Ue.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);let{microLamports:t}=H(Ue.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(tr.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}},Ue=Object.freeze({RequestUnits:{index:0,layout:u.struct([u.u8("instruction"),u.u32("units"),u.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:u.struct([u.u8("instruction"),u.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:u.struct([u.u8("instruction"),u.u32("units")])},SetComputeUnitPrice:{index:3,layout:u.struct([u.u8("instruction"),vt("microLamports")])}}),tr=class{constructor(){}static requestUnits(e){let t=Ue.RequestUnits,r=q(t,e);return new J({keys:[],programId:this.programId,data:r})}static requestHeapFrame(e){let t=Ue.RequestHeapFrame,r=q(t,e);return new J({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(e){let t=Ue.SetComputeUnitLimit,r=q(t,e);return new J({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(e){let t=Ue.SetComputeUnitPrice,r=q(t,{microLamports:BigInt(e.microLamports)});return new J({keys:[],programId:this.programId,data:r})}};tr.programId=new E("ComputeBudget111111111111111111111111111111");Uo=64,Ko=32,Wo=64,Fo=u.struct([u.u8("numSignatures"),u.u8("padding"),u.u16("signatureOffset"),u.u16("signatureInstructionIndex"),u.u16("publicKeyOffset"),u.u16("publicKeyInstructionIndex"),u.u16("messageDataOffset"),u.u16("messageDataSize"),u.u16("messageInstructionIndex")]),Zr=class s{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,instructionIndex:o}=e;$(t.length===Ko,`Public Key must be ${Ko} bytes but received ${t.length} bytes`),$(n.length===Wo,`Signature must be ${Wo} bytes but received ${n.length} bytes`);let i=Fo.span,c=i+t.length,a=c+n.length,f=1,y=O.Buffer.alloc(a+r.length),k=o??65535;return Fo.encode({numSignatures:f,padding:0,signatureOffset:c,signatureInstructionIndex:k,publicKeyOffset:i,publicKeyInstructionIndex:k,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:k},y),y.fill(t,i),y.fill(n,c),y.fill(r,a),new J({keys:[],programId:s.programId,data:y})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;$(t.length===Uo,`Private key must be ${Uo} bytes but received ${t.length} bytes`);try{let o=Xr.fromSecretKey(t),i=o.publicKey.toBytes(),c=ps(r,o.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:c,instructionIndex:n})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Zr.programId=new E("Ed25519SigVerify111111111111111111111111111");Pu=(s,e)=>{let t=ar.sign(s,e);return[t.toCompactRawBytes(),t.recovery]};ar.utils.isValidPrivateKey;Tu=ar.getPublicKey,Do=32,jn=20,qo=64,Cu=11,Hn=u.struct([u.u8("numSignatures"),u.u16("signatureOffset"),u.u8("signatureInstructionIndex"),u.u16("ethAddressOffset"),u.u8("ethAddressInstructionIndex"),u.u16("messageDataOffset"),u.u16("messageDataSize"),u.u8("messageInstructionIndex"),u.blob(20,"ethAddress"),u.blob(64,"signature"),u.u8("recoveryId")]),Qr=class s{constructor(){}static publicKeyToEthAddress(e){$(e.length===qo,`Public key must be ${qo} bytes but received ${e.length} bytes`);try{return O.Buffer.from(fn(K(e))).slice(-jn)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:r,signature:n,recoveryId:o,instructionIndex:i}=e;return s.createInstructionWithEthAddress({ethAddress:s.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:o,instructionIndex:i})}static createInstructionWithEthAddress(e){let{ethAddress:t,message:r,signature:n,recoveryId:o,instructionIndex:i=0}=e,c;typeof t=="string"?t.startsWith("0x")?c=O.Buffer.from(t.substr(2),"hex"):c=O.Buffer.from(t,"hex"):c=t,$(c.length===jn,`Address must be ${jn} bytes but received ${c.length} bytes`);let a=1+Cu,f=a,y=a+c.length,k=y+n.length+1,B=1,m=O.Buffer.alloc(Hn.span+r.length);return Hn.encode({numSignatures:B,signatureOffset:y,signatureInstructionIndex:i,ethAddressOffset:f,ethAddressInstructionIndex:i,messageDataOffset:k,messageDataSize:r.length,messageInstructionIndex:i,signature:K(n),ethAddress:K(c),recoveryId:o},m),m.fill(K(r),Hn.span),new J({keys:[],programId:s.programId,data:m})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:r,instructionIndex:n}=e;$(t.length===Do,`Private key must be ${Do} bytes but received ${t.length} bytes`);try{let o=K(t),i=Tu(o,!1).slice(1),c=O.Buffer.from(fn(K(r))),[a,f]=Pu(c,o);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:a,recoveryId:f,instructionIndex:n})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};Qr.programId=new E("KeccakSecp256k11111111111111111111111111111");di=new E("StakeConfig11111111111111111111111111111111"),en=class{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}},gt=class{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}};li=gt;gt.default=new li(0,0,E.default);ls=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=u.u32("instruction").decode(e.data),n;for(let[o,i]of Object.entries(fe))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a StakeInstruction");return n}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{authorized:t,lockup:r}=H(fe.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new en(new E(t.staker),new E(t.withdrawer)),lockup:new gt(r.unixTimestamp,r.epoch,new E(r.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),H(fe.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,stakeAuthorizationType:r}=H(fe.Authorize,e.data),n={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new E(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(n.custodianPubkey=e.keys[3].pubkey),n}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);let{newAuthorized:t,stakeAuthorizationType:r,authoritySeed:n,authorityOwner:o}=H(fe.AuthorizeWithSeed,e.data),i={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:n,authorityOwner:new E(o),newAuthorizedPubkey:new E(t),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=H(fe.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),H(fe.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);let{lamports:t}=H(fe.Withdraw,e.data),r={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(r.custodianPubkey=e.keys[5].pubkey),r}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),H(fe.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Rt.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},fe=Object.freeze({Initialize:{index:0,layout:u.struct([u.u32("instruction"),qa(),Ma()])},Authorize:{index:1,layout:u.struct([u.u32("instruction"),W("newAuthorized"),u.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:u.struct([u.u32("instruction")])},Split:{index:3,layout:u.struct([u.u32("instruction"),u.ns64("lamports")])},Withdraw:{index:4,layout:u.struct([u.u32("instruction"),u.ns64("lamports")])},Deactivate:{index:5,layout:u.struct([u.u32("instruction")])},Merge:{index:7,layout:u.struct([u.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:u.struct([u.u32("instruction"),W("newAuthorized"),u.u32("stakeAuthorizationType"),ht("authoritySeed"),W("authorityOwner")])}}),Ou=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Rt=class{constructor(){}static initialize(e){let{stakePubkey:t,authorized:r,lockup:n}=e,o=n||gt.default,i=fe.Initialize,c=q(i,{authorized:{staker:K(r.staker.toBuffer()),withdrawer:K(r.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:K(o.custodian.toBuffer())}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Et,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new J(a)}static createAccountWithSeed(e){let t=new G;t.add(ye.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static createAccount(e){let t=new G;t.add(ye.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:r,authorized:n,lockup:o}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:o}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,o=fe.Delegate,i=q(o);return new G().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:Vr,isSigner:!1,isWritable:!1},{pubkey:di,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){let{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:o,custodianPubkey:i}=e,c=fe.Authorize,a=q(c,{newAuthorized:K(n.toBuffer()),stakeAuthorizationType:o.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&f.push({pubkey:i,isSigner:!0,isWritable:!1}),new G().add({keys:f,programId:this.programId,data:a})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:o,newAuthorizedPubkey:i,stakeAuthorizationType:c,custodianPubkey:a}=e,f=fe.AuthorizeWithSeed,y=q(f,{newAuthorized:K(i.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:n,authorityOwner:K(o.toBuffer())}),k=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1}];return a&&k.push({pubkey:a,isSigner:!0,isWritable:!1}),new G().add({keys:k,programId:this.programId,data:y})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:o}=e,i=fe.Split,c=q(i,{lamports:o});return new J({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(e,t){let r=new G;return r.add(ye.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:o,basePubkey:i,seed:c,lamports:a}=e,f=new G;return f.add(ye.allocate({accountPubkey:o,basePubkey:i,seed:c,space:this.space,programId:this.programId})),t&&t>0&&f.add(ye.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:t})),f.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:o,lamports:a}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,o=fe.Merge,i=q(o);return new G().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:Vr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:o,custodianPubkey:i}=e,c=fe.Withdraw,a=q(c,{lamports:o}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:Vr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return i&&f.push({pubkey:i,isSigner:!0,isWritable:!1}),new G().add({keys:f,programId:this.programId,data:a})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:r}=e,n=fe.Deactivate,o=q(n);return new G().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Rt.programId=new E("Stake11111111111111111111111111111111111111");Rt.space=200;tn=class{constructor(e,t,r,n){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=r,this.commission=n}},ds=class{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);let r=u.u32("instruction").decode(e.data),n;for(let[o,i]of Object.entries(Ke))if(i.index==r){n=o;break}if(!n)throw new Error("Instruction type incorrect; not a VoteInstruction");return n}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);let{voteInit:t}=H(Ke.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new tn(new E(t.nodePubkey),new E(t.authorizedVoter),new E(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{newAuthorized:t,voteAuthorizationType:r}=H(Ke.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new E(t),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:r,newAuthorized:n,voteAuthorizationType:o}}=H(Ke.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new E(t),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new E(n),voteAuthorizationType:{index:o},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);let{lamports:t}=H(Ke.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Lt.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}},Ke=Object.freeze({InitializeAccount:{index:0,layout:u.struct([u.u32("instruction"),$a()])},Authorize:{index:1,layout:u.struct([u.u32("instruction"),W("newAuthorized"),u.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:u.struct([u.u32("instruction"),u.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:u.struct([u.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:u.struct([u.u32("instruction"),Va()])}}),zu=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Lt=class s{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:r,voteInit:n}=e,o=Ke.InitializeAccount,i=q(o,{voteInit:{nodePubkey:K(n.nodePubkey.toBuffer()),authorizedVoter:K(n.authorizedVoter.toBuffer()),authorizedWithdrawer:K(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),c={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Et,isSigner:!1,isWritable:!1},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new J(c)}static createAccount(e){let t=new G;return t.add(ye.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:o}=e,i=Ke.Authorize,c=q(i,{newAuthorized:K(n.toBuffer()),voteAuthorizationType:o.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new G().add({keys:a,programId:this.programId,data:c})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:o,voteAuthorizationType:i,votePubkey:c}=e,a=Ke.AuthorizeWithSeed,f=q(a,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:K(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:K(o.toBuffer()),voteAuthorizationType:i.index}}),y=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:ze,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new G().add({keys:y,programId:this.programId,data:f})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:o}=e,i=Ke.Withdraw,c=q(i,{lamports:n}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new G().add({keys:a,programId:this.programId,data:c})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return s.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,o=Ke.UpdateValidatorIdentity,i=q(o),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new G().add({keys:c,programId:this.programId,data:i})}};Lt.programId=new E("Vote111111111111111111111111111111111111111");Lt.space=3762;hi=new E("Va1idator1nfo111111111111111111111111111111"),Nu=w({name:I(),website:C(I()),details:C(I()),iconUrl:C(I()),keybaseUsername:C(I())}),hs=class s{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(_e(t)!==2)return null;let n=[];for(let o=0;o<2;o++){let i=new E(Ae(t,0,We)),c=Ne(t)===1;n.push({publicKey:i,isSigner:c})}if(n[0].publicKey.equals(hi)&&n[1].isSigner){let o=ht().decode(O.Buffer.from(t)),i=JSON.parse(o);return Pn(i,Nu),new s(n[1].publicKey,i)}return null}},Uu=new E("Vote111111111111111111111111111111111111111"),Ku=u.struct([W("nodePubkey"),W("authorizedWithdrawer"),u.u8("commission"),u.nu64(),u.seq(u.struct([u.nu64("slot"),u.u32("confirmationCount")]),u.offset(u.u32(),-8),"votes"),u.u8("rootSlotValid"),u.nu64("rootSlot"),u.nu64(),u.seq(u.struct([u.nu64("epoch"),W("authorizedVoter")]),u.offset(u.u32(),-8),"authorizedVoters"),u.struct([u.seq(u.struct([W("authorizedPubkey"),u.nu64("epochOfLastAuthorizedSwitch"),u.nu64("targetEpoch")]),32,"buf"),u.nu64("idx"),u.u8("isEmpty")],"priorVoters"),u.nu64(),u.seq(u.struct([u.nu64("epoch"),u.nu64("credits"),u.nu64("prevCredits")]),u.offset(u.u32(),-8),"epochCredits"),u.struct([u.nu64("slot"),u.nu64("timestamp")],"lastTimestamp")]),ys=class s{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){let r=Ku.decode(K(e),4),n=r.rootSlot;return r.rootSlotValid||(n=null),new s({nodePubkey:new E(r.nodePubkey),authorizedWithdrawer:new E(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:n,authorizedVoters:r.authorizedVoters.map(Wu),priorVoters:Fu(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}};$o={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};Mu=1e9});export{at as a,Ns as b,Ks as c,kn as d,js as e,Rn as f,Io as g,_o as h,Ao as i,Eo as j,Hs as k,Gt as l,Yn as m,Ht as n,Go as o,We as p,E as q,Jn as r,Fa as s,st as t,rn as u,Yt as v,Jt as w,Xt as x,nt as y,yt as z,Fe as A,At as B,gs as C,Ge as D,J as E,G as F,Xn as G,Zn as H,ze as I,Ja as J,Xa as K,$r as L,Et as M,Za as N,Qa as O,ec as P,Vr as Q,pt as R,tc as S,x as T,Qn as U,Zo as V,es as W,Gr as X,ts as Y,te as Z,ye as _,rs as $,oc as aa,ns as ba,Yr as ca,Zt as da,ti as ea,cs as fa,Xr as ga,Ye as ha,us as ia,er as ja,fs as ka,Ue as la,tr as ma,Zr as na,Qr as oa,di as pa,en as qa,gt as ra,ls as sa,fe as ta,Ou as ua,Rt as va,tn as wa,ds as xa,zu as ya,Lt as za,hi as Aa,hs as Ba,Uu as Ca,ys as Da,Du as Ea,qu as Fa,Mu as Ga,$u as Ha,Vu as Ia};
