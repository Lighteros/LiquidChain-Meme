import{e as Cn,j as Mr,n as at,o as Vr,u as ot,v as jr,w as st,x as $r}from"./chunk-4I7G342N.js";import{Ba as Un,Ca as Gn,Ga as In,L as En,Na as Dn,Z as Sn,c as U,e as gn,ha as rt,s as On,t as nt,y as Bn}from"./chunk-AX3MU5C4.js";import{D as Tn,F as pe,q as An}from"./chunk-ZRBE6OMV.js";import{a as vn,b as Rr}from"./chunk-Z3SE2D4B.js";import{aa as bn,o as fn}from"./chunk-5LQ6A2AX.js";import{Eb as dn,Fb as ln,Gb as xn,I as D,Ra as un,S as se,Z as w,e as y,ea as k,eb as ie,gb as cn,hb as mn,nb as jt,qb as yn,ta as z,za as tt}from"./chunk-5G3DVQVW.js";import{a as pn,b as kr}from"./chunk-HINDXNTT.js";import{c as hn,d as wn,e as Pn,f as zr}from"./chunk-EEU3LH2V.js";import{a as f,b as h,f as E,i as Ve,n as l}from"./chunk-VNDKUXGB.js";var M={};Ve(M,{IntegerOutOfRangeError:()=>yt,InvalidHexBooleanError:()=>dt,InvalidHexTypeError:()=>We,InvalidHexValueError:()=>Je,InvalidLengthError:()=>Xt,SizeExceedsPaddingSizeError:()=>Ke,SizeOverflowError:()=>_e,SliceOffsetOutOfBoundsError:()=>fe,assert:()=>Xn,concat:()=>$,from:()=>ye,fromBoolean:()=>Xr,fromBytes:()=>P,fromNumber:()=>A,fromString:()=>lt,isEqual:()=>Zr,padLeft:()=>Zt,padRight:()=>ut,random:()=>Yr,size:()=>G,slice:()=>I,toBigInt:()=>ft,toBoolean:()=>ea,toBytes:()=>ta,toNumber:()=>Kn,toString:()=>na,trimLeft:()=>qe,trimRight:()=>Qr,validate:()=>xt});Mr();var Hn=Cn;var Ln="0.1.1";function Fn(){return Ln}var b=class e extends Error{constructor(t,n={}){let r=(()=>{if(n.cause instanceof e){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause?.message?n.cause.message:n.details})(),a=n.cause instanceof e&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${a??""}`,i=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a?["",r?`Details: ${r}`:void 0,a?`See: ${s}`:void 0]:[]].filter(u=>typeof u=="string").join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Fn()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=a,this.shortMessage=t}walk(t){return kn(this,t)}};function kn(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?kn(e.cause,t):t?null:e}var Nr="#__bigint";function j(e,t,n){return JSON.stringify(e,(r,a)=>typeof t=="function"?t(r,a):typeof a=="bigint"?a.toString()+Nr:a,n)}function $e(e,t){if(K(e)>t)throw new it({givenSize:K(e),maxSize:t})}function zn(e,t){if(typeof t=="number"&&t>0&&t>K(e)-1)throw new Ne({offset:t,position:"start",size:K(e)})}function Rn(e,t,n){if(typeof t=="number"&&typeof n=="number"&&K(e)!==n-t)throw new Ne({offset:n,position:"end",size:K(e)})}var R={zero:48,nine:57,A:65,F:70,a:97,f:102};function $t(e){if(e>=R.zero&&e<=R.nine)return e-R.zero;if(e>=R.A&&e<=R.F)return e-(R.A-10);if(e>=R.a&&e<=R.f)return e-(R.a-10)}function Mn(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new pt({size:e.length,targetSize:r,type:"Bytes"});let a=new Uint8Array(r);for(let o=0;o<r;o++){let s=n==="right";a[s?o:r-o-1]=e[s?o:e.length-o-1]}return a}function Vn(e,t={}){let{dir:n="left"}=t,r=e,a=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r}function W(e,t){if(G(e)>t)throw new _e({givenSize:G(e),maxSize:t})}function $n(e,t){if(typeof t=="number"&&t>0&&t>G(e)-1)throw new fe({offset:t,position:"start",size:G(e)})}function Nn(e,t,n){if(typeof t=="number"&&typeof n=="number"&&G(e)!==n-t)throw new fe({offset:n,position:"end",size:G(e)})}function Nt(e,t={}){let{dir:n,size:r=32}=t;if(r===0)return e;let a=e.replace("0x","");if(a.length>r*2)throw new Ke({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}function _t(e,t={}){let{dir:n="left"}=t,r=e.replace("0x",""),a=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)a++;return r=n==="left"?r.slice(a):r.slice(0,r.length-a),r==="0"?"0x":n==="right"&&r.length%2===1?`0x${r}0`:`0x${r}`}var _r=new TextEncoder;function Kr(e){if(!(e instanceof Uint8Array)){if(!e)throw new ce(e);if(typeof e!="object")throw new ce(e);if(!("BYTES_PER_ELEMENT"in e))throw new ce(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new ce(e)}}function ct(...e){let t=0;for(let r of e)t+=r.length;let n=new Uint8Array(t);for(let r=0,a=0;r<e.length;r++){let o=e[r];n.set(o,a),a+=o.length}return n}function me(e){return e instanceof Uint8Array?e:typeof e=="string"?T(e):Kt(e)}function Kt(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function T(e,t={}){let{size:n}=t,r=e;n&&(W(e,n),r=ut(e,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);let o=a.length/2,s=new Uint8Array(o);for(let i=0,u=0;i<o;i++){let p=$t(a.charCodeAt(u++)),c=$t(a.charCodeAt(u++));if(p===void 0||c===void 0)throw new b(`Invalid byte sequence ("${a[u-2]}${a[u-1]}" in "${a}").`);s[i]=p*16+c}return s}function Wt(e,t){let n=A(e,t);return T(n)}function mt(e,t={}){let{size:n}=t,r=_r.encode(e);return typeof n=="number"?($e(r,n),Wr(r,n)):r}function Wr(e,t){return Mn(e,{dir:"right",size:t})}function Wn(e){return crypto.getRandomValues(new Uint8Array(e))}function K(e){return e.length}function Jt(e,t,n,r={}){let{strict:a}=r;zn(e,t);let o=e.slice(t,n);return a&&Rn(o,t,n),o}function qt(e,t={}){let{size:n}=t;typeof n<"u"&&$e(e,n);let r=P(e,t);return ft(r,t)}function Jn(e){return Vn(e,{dir:"right"})}function qn(e){try{return Kr(e),!0}catch{return!1}}var ce=class extends b{constructor(t){super(`Value \`${typeof t=="object"?j(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}},it=class extends b{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Ne=class extends b{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}},pt=class extends b{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};var Jr=new TextEncoder,qr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xn(e,t={}){let{strict:n=!1}=t;if(!e)throw new We(e);if(typeof e!="string")throw new We(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Je(e);if(!e.startsWith("0x"))throw new Je(e)}function $(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ye(e){return e instanceof Uint8Array?P(e):Array.isArray(e)?P(new Uint8Array(e)):e}function Xr(e,t={}){let n=`0x${Number(e)}`;return typeof t.size=="number"?(W(n,t.size),Zt(n,t.size)):n}function P(e,t={}){let n="";for(let a=0;a<e.length;a++)n+=qr[e[a]];let r=`0x${n}`;return typeof t.size=="number"?(W(r,t.size),ut(r,t.size)):r}function A(e,t={}){let{signed:n,size:r}=t,a=BigInt(e),o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));let s=typeof o=="bigint"&&n?-o-1n:0;if(o&&a>o||a<s){let p=typeof e=="bigint"?"n":"";throw new yt({max:o?`${o}${p}`:void 0,min:`${s}${p}`,signed:n,size:r,value:`${e}${p}`})}let u=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Zt(u,r):u}function lt(e,t={}){return P(Jr.encode(e),t)}function Zr(e,t){return Hn(T(e),T(t))}function Zt(e,t){return Nt(e,{dir:"left",size:t})}function ut(e,t){return Nt(e,{dir:"right",size:t})}function Yr(e){return P(Wn(e))}function I(e,t,n,r={}){let{strict:a}=r;$n(e,t);let o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return a&&Nn(o,t,n),o}function G(e){return Math.ceil((e.length-2)/2)}function qe(e){return _t(e,{dir:"left"})}function Qr(e){return _t(e,{dir:"right"})}function ft(e,t={}){let{signed:n}=t;t.size&&W(e,t.size);let r=BigInt(e);if(!n)return r;let a=(e.length-2)/2,o=(1n<<BigInt(a)*8n)-1n,s=o>>1n;return r<=s?r:r-o-1n}function ea(e,t={}){t.size&&W(e,t.size);let n=qe(e);if(n==="0x")return!1;if(n==="0x1")return!0;throw new dt(e)}function ta(e,t={}){return T(e,t)}function Kn(e,t={}){let{signed:n,size:r}=t;return Number(!n&&!r?e:ft(e,t))}function na(e,t={}){let{size:n}=t,r=T(e);return n&&($e(r,n),r=Jn(r)),new TextDecoder().decode(r)}function xt(e,t={}){let{strict:n=!1}=t;try{return Xn(e,{strict:n}),!0}catch{return!1}}var yt=class extends b{constructor({max:t,min:n,signed:r,size:a,value:o}){super(`Number \`${o}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},dt=class extends b{constructor(t){super(`Hex value \`"${t}"\` is not a valid boolean.`,{metaMessages:['The hex value must be `"0x0"` (false) or `"0x1"` (true).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexBooleanError"})}},We=class extends b{constructor(t){super(`Value \`${typeof t=="object"?j(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},Je=class extends b{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},Xt=class extends b{constructor(t){super(`Hex value \`"${t}"\` is an odd length (${t.length-2} nibbles).`,{metaMessages:["It must be an even length."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidLengthError"})}},_e=class extends b{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},fe=class extends b{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}},Ke=class extends b{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};var Ze={};Ve(Ze,{InvalidCompressedPrefixError:()=>gt,InvalidError:()=>bt,InvalidPrefixError:()=>Xe,InvalidSerializedSizeError:()=>wt,InvalidUncompressedPrefixError:()=>ht,assert:()=>Pt,compress:()=>ra,from:()=>J,fromBytes:()=>Zn,fromHex:()=>Yt,toBytes:()=>Qt,toHex:()=>Ot,validate:()=>aa});function Pt(e,t={}){let{compressed:n}=t,{prefix:r,x:a,y:o}=e;if(n===!1||typeof a=="bigint"&&typeof o=="bigint"){if(r!==4)throw new Xe({prefix:r,cause:new ht});return}if(n===!0||typeof a=="bigint"&&typeof o>"u"){if(r!==3&&r!==2)throw new Xe({prefix:r,cause:new gt});return}throw new bt({publicKey:e})}function ra(e){let{x:t,y:n}=e;return{prefix:n%2n===0n?2:3,x:t}}function J(e){let t=(()=>{if(xt(e))return Yt(e);if(qn(e))return Zn(e);let{prefix:n,x:r,y:a}=e;return typeof r=="bigint"&&typeof a=="bigint"?{prefix:n??4,x:r,y:a}:{prefix:n,x:r}})();return Pt(t),t}function Zn(e){return Yt(P(e))}function Yt(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new wt({publicKey:e});if(e.length===130){let r=BigInt(I(e,0,32)),a=BigInt(I(e,32,64));return{prefix:4,x:r,y:a}}if(e.length===132){let r=Number(I(e,0,1)),a=BigInt(I(e,1,33)),o=BigInt(I(e,33,65));return{prefix:r,x:a,y:o}}let t=Number(I(e,0,1)),n=BigInt(I(e,1,33));return{prefix:t,x:n}}function Qt(e,t={}){return T(Ot(e,t))}function Ot(e,t={}){Pt(e);let{prefix:n,x:r,y:a}=e,{includePrefix:o=!0}=t;return $(o?A(n,{size:1}):"0x",A(r,{size:32}),typeof a=="bigint"?A(a,{size:32}):"0x")}function aa(e,t={}){try{return Pt(e,t),!0}catch{return!1}}var bt=class extends b{constructor({publicKey:t}){super(`Value \`${j(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}},Xe=class extends b{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}},gt=class extends b{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}},ht=class extends b{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}},wt=class extends b{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${G(ye(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};var ar={};Ve(ar,{InvalidRError:()=>Bt,InvalidSError:()=>At,InvalidSerializedSizeError:()=>vt,InvalidVError:()=>Tt,InvalidYParityError:()=>q,MissingPropertiesError:()=>de,assert:()=>Et,extract:()=>oa,from:()=>nn,fromBytes:()=>Qn,fromDerBytes:()=>sa,fromDerHex:()=>er,fromHex:()=>tn,fromLegacy:()=>tr,fromRpc:()=>nr,fromTuple:()=>ia,toBytes:()=>pa,toDerBytes:()=>ua,toDerHex:()=>fa,toHex:()=>rr,toLegacy:()=>ca,toRpc:()=>ma,toTuple:()=>ya,vToYParity:()=>St,validate:()=>da,yParityToV:()=>rn});$r();var Ao=2n**(8n-1n)-1n,To=2n**(16n-1n)-1n,Eo=2n**(24n-1n)-1n,So=2n**(32n-1n)-1n,Uo=2n**(40n-1n)-1n,Go=2n**(48n-1n)-1n,Io=2n**(56n-1n)-1n,Do=2n**(64n-1n)-1n,Co=2n**(72n-1n)-1n,Ho=2n**(80n-1n)-1n,Lo=2n**(88n-1n)-1n,Fo=2n**(96n-1n)-1n,ko=2n**(104n-1n)-1n,zo=2n**(112n-1n)-1n,Ro=2n**(120n-1n)-1n,Mo=2n**(128n-1n)-1n,Vo=2n**(136n-1n)-1n,jo=2n**(144n-1n)-1n,$o=2n**(152n-1n)-1n,No=2n**(160n-1n)-1n,_o=2n**(168n-1n)-1n,Ko=2n**(176n-1n)-1n,Wo=2n**(184n-1n)-1n,Jo=2n**(192n-1n)-1n,qo=2n**(200n-1n)-1n,Xo=2n**(208n-1n)-1n,Zo=2n**(216n-1n)-1n,Yo=2n**(224n-1n)-1n,Qo=2n**(232n-1n)-1n,es=2n**(240n-1n)-1n,ts=2n**(248n-1n)-1n,ns=2n**(256n-1n)-1n,rs=-(2n**(8n-1n)),as=-(2n**(16n-1n)),os=-(2n**(24n-1n)),ss=-(2n**(32n-1n)),is=-(2n**(40n-1n)),ps=-(2n**(48n-1n)),us=-(2n**(56n-1n)),fs=-(2n**(64n-1n)),cs=-(2n**(72n-1n)),ms=-(2n**(80n-1n)),ys=-(2n**(88n-1n)),ds=-(2n**(96n-1n)),ls=-(2n**(104n-1n)),xs=-(2n**(112n-1n)),bs=-(2n**(120n-1n)),gs=-(2n**(128n-1n)),hs=-(2n**(136n-1n)),ws=-(2n**(144n-1n)),Ps=-(2n**(152n-1n)),Os=-(2n**(160n-1n)),vs=-(2n**(168n-1n)),Bs=-(2n**(176n-1n)),As=-(2n**(184n-1n)),Ts=-(2n**(192n-1n)),Es=-(2n**(200n-1n)),Ss=-(2n**(208n-1n)),Us=-(2n**(216n-1n)),Gs=-(2n**(224n-1n)),Is=-(2n**(232n-1n)),Ds=-(2n**(240n-1n)),Cs=-(2n**(248n-1n)),Hs=-(2n**(256n-1n)),Ls=2n**8n-1n,Fs=2n**16n-1n,ks=2n**24n-1n,zs=2n**32n-1n,Rs=2n**40n-1n,Ms=2n**48n-1n,Vs=2n**56n-1n,js=2n**64n-1n,$s=2n**72n-1n,Ns=2n**80n-1n,_s=2n**88n-1n,Ks=2n**96n-1n,Ws=2n**104n-1n,Js=2n**112n-1n,qs=2n**120n-1n,Xs=2n**128n-1n,Zs=2n**136n-1n,Ys=2n**144n-1n,Qs=2n**152n-1n,ei=2n**160n-1n,ti=2n**168n-1n,ni=2n**176n-1n,ri=2n**184n-1n,ai=2n**192n-1n,oi=2n**200n-1n,si=2n**208n-1n,ii=2n**216n-1n,pi=2n**224n-1n,ui=2n**232n-1n,fi=2n**240n-1n,ci=2n**248n-1n,en=2n**256n-1n;function Et(e,t={}){let{recovered:n}=t;if(typeof e.r>"u")throw new de({signature:e});if(typeof e.s>"u")throw new de({signature:e});if(n&&typeof e.yParity>"u")throw new de({signature:e});if(e.r<0n||e.r>en)throw new Bt({value:e.r});if(e.s<0n||e.s>en)throw new At({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new q({value:e.yParity})}function Qn(e){return tn(P(e))}function tn(e){if(e.length!==130&&e.length!==132)throw new vt({signature:e});let t=BigInt(I(e,0,32)),n=BigInt(I(e,32,64)),r=(()=>{let a=+`0x${e.slice(130)}`;if(!Number.isNaN(a))try{return St(a)}catch{throw new q({value:a})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function oa(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return nn(e)}function nn(e){let t=typeof e=="string"?tn(e):e instanceof Uint8Array?Qn(e):typeof e.r=="string"?nr(e):e.v?tr(e):f({r:e.r,s:e.s},typeof e.yParity<"u"?{yParity:e.yParity}:{});return Et(t),t}function sa(e){return er(P(e))}function er(e){let{r:t,s:n}=st.Signature.fromDER(ye(e).slice(2));return{r:t,s:n}}function tr(e){return{r:e.r,s:e.s,yParity:St(e.v)}}function nr(e){let t=(()=>{let n=e.v?Number(e.v):void 0,r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=St(n)),typeof r!="number")throw new q({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function ia(e){let[t,n,r]=e;return nn({r:n==="0x"?0n:BigInt(n),s:r==="0x"?0n:BigInt(r),yParity:t==="0x"?0:Number(t)})}function pa(e){return T(rr(e))}function rr(e){Et(e);let t=e.r,n=e.s;return $(A(t,{size:32}),A(n,{size:32}),typeof e.yParity=="number"?A(rn(e.yParity),{size:1}):"0x")}function ua(e){return new st.Signature(e.r,e.s).toDERRawBytes()}function fa(e){return`0x${new st.Signature(e.r,e.s).toDERHex()}`}function ca(e){return{r:e.r,s:e.s,v:rn(e.yParity)}}function ma(e){let{r:t,s:n,yParity:r}=e;return{r:A(t,{size:32}),s:A(n,{size:32}),yParity:r===0?"0x0":"0x1"}}function ya(e){let{r:t,s:n,yParity:r}=e;return[r?"0x01":"0x",t===0n?"0x":qe(A(t)),n===0n?"0x":qe(A(n))]}function da(e,t={}){try{return Et(e,t),!0}catch{return!1}}function St(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Tt({value:e})}function rn(e){if(e===0)return 27;if(e===1)return 28;throw new q({value:e})}var vt=class extends b{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${G(ye(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}},de=class extends b{constructor({signature:t}){super(`Signature \`${j(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}},Bt=class extends b{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}},At=class extends b{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}},q=class extends b{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}},Tt=class extends b{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}};var Or={};Ve(Or,{CredentialCreationFailedError:()=>N,CredentialRequestFailedError:()=>Ye,createChallenge:()=>br,createCredential:()=>Oa,getAuthenticatorData:()=>gr,getClientDataJSON:()=>hr,getCredentialCreationOptions:()=>wr,getCredentialRequestOptions:()=>Pr,getSignPayload:()=>va,sign:()=>Ba,verify:()=>Aa});var la=new TextEncoder,xa=new TextDecoder,Ut=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)])),Gt=h(f({},Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))),{61:0,45:62,95:63});function ba(e,t={}){let{pad:n=!0,url:r=!1}=t,a=new Uint8Array(Math.ceil(e.length/3)*4);for(let u=0,p=0;p<e.length;u+=4,p+=3){let c=(e[p]<<16)+(e[p+1]<<8)+(e[p+2]|0);a[u]=Ut[c>>18],a[u+1]=Ut[c>>12&63],a[u+2]=Ut[c>>6&63],a[u+3]=Ut[c&63]}let o=e.length%3,s=Math.floor(e.length/3)*4+(o&&o+1),i=xa.decode(new Uint8Array(a.buffer,0,s));return n&&o===1&&(i+="=="),n&&o===2&&(i+="="),r&&(i=i.replaceAll("+","-").replaceAll("/","_")),i}function or(e,t={}){return ba(T(e),t)}function It(e){let t=e.replace(/=+$/,""),n=t.length,r=new Uint8Array(n+3);la.encodeInto(t+"===",r);for(let o=0,s=0;o<t.length;o+=4,s+=3){let i=(Gt[r[o]]<<18)+(Gt[r[o+1]]<<12)+(Gt[r[o+2]]<<6)+Gt[r[o+3]];r[s]=i>>16,r[s+1]=i>>8&255,r[s+2]=i&255}let a=(n>>2)*3+(n%4&&n%4-1);return new Uint8Array(r.buffer,0,a)}kr();Rr();function ir(e,t={}){let{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=pn(me(e));return n==="Bytes"?r:P(r)}function Dt(e,t={}){let{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=vn(me(e));return n==="Bytes"?r:P(r)}zr();jr();Vr();var ur={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},fr={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},cr={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},ga=at(ur.p),ha=at(fr.p),wa=at(cr.p);var an=ot(h(f({},ur),{Fp:ga,lowS:!1}),hn);var Pi=ot(h(f({},fr),{Fp:ha,lowS:!1}),Pn);var Oi=ot(h(f({},cr),{Fp:wa,lowS:!1,allowedPrivateKeyLengths:[130,131,132]}),wn);var le=an,mr=an;function yr(e){let{hash:t,payload:n,publicKey:r,signature:a}=e;return mr.verify(a,n instanceof Uint8Array?n:T(n),Ot(r).substring(2),...t?[{prehash:!0,lowS:!0}]:[])}function lr(e){let t=e[4]===0?5:4,n=t+32,r=e[n+2]===0?n+3:n+2,a=BigInt(P(e.slice(t,n))),o=BigInt(P(e.slice(r)));return{r:a,s:o>le.CURVE.n/2n?le.CURVE.n-o:o}}function xr(e){return l(this,null,function*(){try{let t=e.getPublicKey();if(!t)throw new N;let n=new Uint8Array(t),r=yield crypto.subtle.importKey("spki",new Uint8Array(n),{name:"ECDSA",namedCurve:"P-256",hash:"SHA-256"},!0,["verify"]),a=new Uint8Array(yield crypto.subtle.exportKey("raw",r));return J(a)}catch(t){if(t.message!=="Permission denied to access object")throw t;let n=new Uint8Array(e.attestationObject),r=32,a=88,o=u=>{let p=new Uint8Array([u,a,r]);for(let c=0;c<n.length-p.length;c++)if(p.every((d,g)=>n[c+g]===d))return c+p.length;throw new N},s=o(33),i=o(34);return J(new Uint8Array([4,...n.slice(s,s+r),...n.slice(i,i+r)]))}})}var br=Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);function Oa(e){return l(this,null,function*(){let a=e,{createFn:t=window.navigator.credentials.create.bind(window.navigator.credentials)}=a,n=E(a,["createFn"]),r=wr(n);try{let o=yield t(r);if(!o)throw new N;let s=o.response,i=yield xr(s);return{id:o.id,publicKey:i,raw:o}}catch(o){throw new N({cause:o})}})}function gr(e={}){let{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,a=Dt(lt(n)),o=A(t,{size:1}),s=A(r,{size:4});return $(a,o,s)}function hr(e){let{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:a=window.location.origin}=e;return JSON.stringify(f({type:"webauthn.get",challenge:or(t,{url:!0,pad:!1}),origin:a,crossOrigin:n},r))}function wr(e){let{attestation:t="none",authenticatorSelection:n={residentKey:"preferred",requireResidentKey:!1,userVerification:"required"},challenge:r=br,excludeCredentialIds:a,name:o,rp:s={id:window.location.hostname,name:window.document.title},user:i,extensions:u}=e,p=i?.name??o;return{publicKey:h(f({attestation:t,authenticatorSelection:n,challenge:r},a?{excludeCredentials:a?.map(c=>({id:It(c),type:"public-key"}))}:{}),{pubKeyCredParams:[{type:"public-key",alg:-7}],rp:s,user:{id:i?.id??ir(mt(p),{as:"Bytes"}),name:p,displayName:i?.displayName??p},extensions:u})}}function Pr(e){let{credentialId:t,challenge:n,rpId:r=window.location.hostname,userVerification:a="required"}=e;return{publicKey:h(f({},t?{allowCredentials:[{id:It(t),type:"public-key"}]}:{}),{challenge:T(n),rpId:r,userVerification:a})}}function va(e){let{challenge:t,crossOrigin:n,extraClientData:r,flag:a,origin:o,rpId:s,signCount:i,userVerification:u="required"}=e,p=gr({flag:a,rpId:s,signCount:i}),c=hr({challenge:t,crossOrigin:n,extraClientData:r,origin:o}),d=Dt(lt(c)),g=c.indexOf('"challenge"'),m=c.indexOf('"type"'),O={authenticatorData:p,clientDataJSON:c,challengeIndex:g,typeIndex:m,userVerificationRequired:u==="required"},S=$(p,d);return{metadata:O,payload:S}}function Ba(e){return l(this,null,function*(){let a=e,{getFn:t=window.navigator.credentials.get.bind(window.navigator.credentials)}=a,n=E(a,["getFn"]),r=Pr(n);try{let o=yield t(r);if(!o)throw new Ye;let s=o.response,i=String.fromCharCode(...new Uint8Array(s.clientDataJSON)),u=i.indexOf('"challenge"'),p=i.indexOf('"type"'),c=lr(new Uint8Array(s.signature));return{metadata:{authenticatorData:P(new Uint8Array(s.authenticatorData)),clientDataJSON:i,challengeIndex:u,typeIndex:p,userVerificationRequired:r.publicKey.userVerification==="required"},signature:c,raw:o}}catch(o){throw new Ye({cause:o})}})}function Aa(e){let{challenge:t,hash:n=!0,metadata:r,publicKey:a,signature:o}=e,{authenticatorData:s,challengeIndex:i,clientDataJSON:u,typeIndex:p,userVerificationRequired:c}=r,d=T(s);if(d.length<37)return!1;let g=d[32];if((g&1)!==1||c&&(g&4)!==4||(g&8)!==8&&(g&16)===16)return!1;let m='"type":"webauthn.get"';if(m!==u.slice(Number(p),m.length+1))return!1;let O=u.slice(Number(i)).match(/^"challenge":"(.*?)"/);if(!O)return!1;let[S,v]=O;if(P(It(v))!==t)return!1;let C=Dt(mt(u),{as:"Bytes"}),V=ct(d,C);return yr({hash:n,payload:V,publicKey:a,signature:o})}var N=class extends b{constructor({cause:t}={}){super("Failed to create credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialCreationFailedError"})}},Ye=class extends b{constructor({cause:t}={}){super("Failed to request credential.",{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WebAuthnP256.CredentialRequestFailedError"})}};var vr={};Ve(vr,{createKeyPair:()=>Ta,sign:()=>Ea,verify:()=>Sa});function Ta(){return l(this,arguments,function*(e={}){let{extractable:t=!1}=e,n=yield globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),r=yield globalThis.crypto.subtle.exportKey("raw",n.publicKey),a=J(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:a}})}function Ea(e){return l(this,null,function*(){let{payload:t,privateKey:n}=e,r=yield globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,me(t)),a=Kt(new Uint8Array(r)),o=qt(Jt(a,0,32)),s=qt(Jt(a,32,64));return s>le.CURVE.n/2n&&(s=le.CURVE.n-s),{r:o,s}})}function Sa(e){return l(this,null,function*(){let{payload:t,signature:n}=e,r=yield globalThis.crypto.subtle.importKey("raw",Qt(e.publicKey),{name:"ECDSA",namedCurve:"P-256"},!0,["verify"]);return yield globalThis.crypto.subtle.verify({name:"ECDSA",hash:"SHA-256"},r,ct(Wt(n.r),Wt(n.s)),me(t))})}var xe=class extends y{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}};Object.defineProperty(xe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});var L=class extends y{constructor({cause:t,data:n,message:r}={}){let a=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${a?`with reason: ${a}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}};Object.defineProperty(L,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(L,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});var be=class extends y{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}};Object.defineProperty(be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});var ge=class extends y{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}};Object.defineProperty(ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});var he=class extends y{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}};Object.defineProperty(he,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});var we=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}};Object.defineProperty(we,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});var Pe=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}};Object.defineProperty(Pe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});var Oe=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a,sender:o}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`,o&&`sender: ${o}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}};Object.defineProperty(Oe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});var ve=class extends y{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}};Object.defineProperty(ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});var Be=class extends y{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}};Object.defineProperty(Be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});var Ae=class extends y{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}};Object.defineProperty(Ae,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});var Te=class extends y{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}};Object.defineProperty(Te,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});var Ee=class extends y{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}};Object.defineProperty(Ee,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});var X=class extends y{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}};Object.defineProperty(X,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});var Se=class extends y{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}};Object.defineProperty(Se,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});var F=class extends y{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}};Object.defineProperty(F,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(F,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});var Ue=class extends y{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}};Object.defineProperty(Ue,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});var Ge=class extends y{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}};Object.defineProperty(Ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});var Z=class extends y{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}};Object.defineProperty(Z,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});var Y=class extends y{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}};Object.defineProperty(Y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});var Ie=class extends y{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}};Object.defineProperty(Ie,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});var De=class extends y{constructor({cause:t,factory:n,factoryData:r,initCode:a}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}};Object.defineProperty(De,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});var Q=class extends y{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}};Object.defineProperty(Q,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});var Ce=class extends y{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}};Object.defineProperty(Ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});var ee=class extends y{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}};Object.defineProperty(ee,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});var He=class extends y{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}};Object.defineProperty(He,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});var Le=class extends y{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}};Object.defineProperty(Le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});var Fe=class extends y{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}};Object.defineProperty(Fe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});var ke=class extends y{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}};Object.defineProperty(ke,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});var te=class extends y{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}};Object.defineProperty(te,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});var ne=class extends y{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}};Object.defineProperty(ne,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});var re=class extends y{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}};Object.defineProperty(re,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});var ae=class extends y{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}};Object.defineProperty(ae,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});var Ct=class extends y{constructor({cause:t}){super(`An error occurred while executing user operation: ${t?.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}},ze=class extends y{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}};Object.defineProperty(ze,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});var Re=class extends y{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}};Object.defineProperty(Re,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});var Ht=class extends y{constructor(t,{callData:n,callGasLimit:r,docsPath:a,factory:o,factoryData:s,initCode:i,maxFeePerGas:u,maxPriorityFeePerGas:p,nonce:c,paymaster:d,paymasterAndData:g,paymasterData:m,paymasterPostOpGasLimit:O,paymasterVerificationGasLimit:S,preVerificationGas:v,sender:C,signature:V,verificationGasLimit:oe}){let et=yn({callData:n,callGasLimit:r,factory:o,factoryData:s,initCode:i,maxFeePerGas:typeof u<"u"&&`${jt(u)} gwei`,maxPriorityFeePerGas:typeof p<"u"&&`${jt(p)} gwei`,nonce:c,paymaster:d,paymasterAndData:g,paymasterData:m,paymasterPostOpGasLimit:O,paymasterVerificationGasLimit:S,preVerificationGas:v,sender:C,signature:V,verificationGasLimit:oe});super(t.shortMessage,{cause:t,docsPath:a,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",et].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}},Lt=class extends y{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}},Ft=class extends y{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}},Qe=class extends y{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}};var Ua=[L,X,F,Z,Y,Q,ee,ae,te,ne,re];function Br(e,t){let n=(e.details||"").toLowerCase();if(xe.message.test(n))return new xe({cause:e});if(be.message.test(n))return new be({cause:e});if(ge.message.test(n))return new ge({cause:e});if(he.message.test(n))return new he({cause:e});if(we.message.test(n))return new we({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Pe.message.test(n))return new Pe({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Oe.message.test(n))return new Oe({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(ve.message.test(n))return new ve({cause:e});if(Be.message.test(n))return new Be({cause:e});if(Te.message.test(n))return new Te({cause:e,nonce:t.nonce});if(Ae.message.test(n))return new Ae({cause:e});if(Ee.message.test(n))return new Ee({cause:e});if(Se.message.test(n))return new Se({cause:e});if(F.message.test(n))return new F({cause:e});if(Ue.message.test(n))return new Ue({cause:e});if(Ge.message.test(n))return new Ge({cause:e});if(Ie.message.test(n))return new Ie({cause:e});if(Ce.message.test(n))return new Ce({cause:e});if(De.message.test(n))return new De({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(He.message.test(n))return new He({cause:e});if(Le.message.test(n))return new Le({cause:e});if(ke.message.test(n))return new ke({cause:e});if(Fe.message.test(n))return new Fe({cause:e});if(ze.message.test(n))return new ze({cause:e});if(Re.message.test(n))return new Re({cause:e});let r=e.walk(a=>Ua.some(o=>o.code===a.code));if(r){if(r.code===L.code)return new L({cause:e,data:r.data,message:r.details});if(r.code===X.code)return new X({cause:e});if(r.code===F.code)return new F({cause:e});if(r.code===Z.code)return new Z({cause:e});if(r.code===Y.code)return new Y({cause:e});if(r.code===Q.code)return new Q({cause:e});if(r.code===ee.code)return new ee({cause:e});if(r.code===ae.code)return new ae({cause:e});if(r.code===te.code)return new te({cause:e});if(r.code===ne.code)return new ne({cause:e});if(r.code===re.code)return new re({cause:e})}return new Ct({cause:e})}function kt(e,a){var o=a,{calls:t,docsPath:n}=o,r=E(o,["calls","docsPath"]);let s=(()=>{let i=Br(e,r);if(t&&i instanceof L){let u=Ga(i),p=t?.filter(c=>c.abi);if(u&&p.length>0)return Ia({calls:p,revertData:u})}return i})();return new Ht(s,f({docsPath:n},r))}function Ga(e){let t;return e.walk(n=>{let r=n;if(typeof r.data=="string"||typeof r.data?.revertData=="string"||!(r instanceof y)&&typeof r.message=="string"){let a=(r.data?.revertData||r.data||r.message).match?.(/(0x[A-Za-z0-9]*)/);if(a)return t=a[1],!0}return!1}),t}function Ia(e){let{calls:t,revertData:n}=e,{abi:r,functionName:a,args:o,to:s}=(()=>{let u=t?.filter(c=>!!c.abi);if(u.length===1)return u[0];let p=u.filter(c=>{try{return!!cn({abi:c.abi,data:n})}catch{return!1}});return p.length===1?p[0]:{abi:[],functionName:u.reduce((c,d)=>`${c?`${c} | `:""}${d.functionName}`,""),args:void 0,to:void 0}})(),i=n==="0x"?new xn({functionName:a}):new ln({abi:r,data:n,functionName:a});return new dn(i,{abi:r,args:o,contractAddress:s,functionName:a})}function Ar(e){let t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function _(e){let t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=w(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=w(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=w(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=w(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=w(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=w(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=w(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=w(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=Da(e.authorization)),t}function Da(e){return{address:e.address,chainId:w(e.chainId),nonce:w(e.nonce),r:e.r?w(BigInt(e.r),{size:32}):D("0x",{size:32}),s:e.s?w(BigInt(e.s),{size:32}):D("0x",{size:32}),yParity:e.yParity?w(e.yParity,{size:1}):D("0x",{size:32})}}function Tr(e,t){return l(this,null,function*(){let c=t,{chainId:n,entryPointAddress:r,context:a}=c,o=E(c,["chainId","entryPointAddress","context"]),s=_(o),d=yield e.request({method:"pm_getPaymasterData",params:[h(f({},s),{callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"}),r,w(n),a]}),{paymasterPostOpGasLimit:i,paymasterVerificationGasLimit:u}=d,p=E(d,["paymasterPostOpGasLimit","paymasterVerificationGasLimit"]);return f(f(f({},p),i&&{paymasterPostOpGasLimit:se(i)}),u&&{paymasterVerificationGasLimit:se(u)})})}function Er(e,t){return l(this,null,function*(){let c=t,{chainId:n,entryPointAddress:r,context:a}=c,o=E(c,["chainId","entryPointAddress","context"]),s=_(o),d=yield e.request({method:"pm_getPaymasterStubData",params:[h(f({},s),{callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"}),r,w(n),a]}),{paymasterPostOpGasLimit:i,paymasterVerificationGasLimit:u}=d,p=E(d,["paymasterPostOpGasLimit","paymasterVerificationGasLimit"]);return f(f(f({},p),i&&{paymasterPostOpGasLimit:se(i)}),u&&{paymasterVerificationGasLimit:se(u)})})}var Ca=["factory","fees","gas","paymaster","nonce","signature","authorization"];function Me(e,t){return l(this,null,function*(){let n=t,{account:r=e.account,parameters:a=Ca,stateOverride:o}=n;if(!r)throw new pe;let s=ie(r),i=e,u=n.paymaster??i?.paymaster,p=typeof u=="string"?u:void 0,{getPaymasterStubData:c,getPaymasterData:d}=(()=>{if(u===!0)return{getPaymasterStubData:x=>U(i,Er,"getPaymasterStubData")(x),getPaymasterData:x=>U(i,Tr,"getPaymasterData")(x)};if(typeof u=="object"){let{getPaymasterStubData:x,getPaymasterData:B}=u;return{getPaymasterStubData:B&&x?x:B,getPaymasterData:B&&x?B:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),g=n.paymasterContext?n.paymasterContext:i?.paymasterContext,m=h(f({},n),{paymaster:p,sender:s.address}),[O,S,v,C,V]=yield Promise.all([l(this,null,function*(){return n.calls?s.encodeCalls(n.calls.map(x=>{let B=x;return B.abi?{data:fn(B),to:B.to,value:B.value}:B})):n.callData}),l(this,null,function*(){if(!a.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};let{factory:x,factoryData:B}=yield s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:x&&B?z([x,B]):void 0}:{factory:x,factoryData:B}}),l(this,null,function*(){if(a.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return m;if(i?.userOperation?.estimateFeesPerGas){let x=yield i.userOperation.estimateFeesPerGas({account:s,bundlerClient:i,userOperation:m});return f(f({},m),x)}try{let x=i.client??e,B=yield U(x,On,"estimateFeesPerGas")({chain:x.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*B.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*B.maxPriorityFeePerGas)}}catch{return}}}),l(this,null,function*(){if(a.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:s.getNonce()}),l(this,null,function*(){if(a.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(s.authorization&&!(yield s.isDeployed())){let x=yield In(s.client,s.authorization);return h(f({},x),{r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1})}}})]);typeof O<"u"&&(m.callData=O),typeof S<"u"&&(m=f(f({},m),S)),typeof v<"u"&&(m=f(f({},m),v)),typeof C<"u"&&(m.nonce=C),typeof V<"u"&&(m.authorization=V),a.includes("signature")&&(typeof n.signature<"u"?m.signature=n.signature:m.signature=yield s.getStubSignature(m)),s.entryPoint.version==="0.6"&&!m.initCode&&(m.initCode="0x");let oe;function et(){return l(this,null,function*(){return oe||(e.chain?e.chain.id:(oe=yield U(e,nt,"getChainId")({}),oe))})}let on=!1;if(a.includes("paymaster")&&c&&!p&&!n.paymasterAndData){let sn=yield c(f({chainId:yield et(),entryPointAddress:s.entryPoint.address,context:g},m)),{isFinal:x=!1,sponsor:B}=sn,Fr=E(sn,["isFinal","sponsor"]);on=x,m=f(f({},m),Fr)}if(s.entryPoint.version==="0.6"&&!m.paymasterAndData&&(m.paymasterAndData="0x"),a.includes("gas")){if(s.userOperation?.estimateGas){let x=yield s.userOperation.estimateGas(m);m=f(f({},m),x)}if(typeof m.callGasLimit>"u"||typeof m.preVerificationGas>"u"||typeof m.verificationGasLimit>"u"||m.paymaster&&typeof m.paymasterPostOpGasLimit>"u"||m.paymaster&&typeof m.paymasterVerificationGasLimit>"u"){let x=yield U(i,zt,"estimateUserOperationGas")(f(f({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:o},m.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{}),m));m=h(f({},m),{callGasLimit:m.callGasLimit??x.callGasLimit,preVerificationGas:m.preVerificationGas??x.preVerificationGas,verificationGasLimit:m.verificationGasLimit??x.verificationGasLimit,paymasterPostOpGasLimit:m.paymasterPostOpGasLimit??x.paymasterPostOpGasLimit,paymasterVerificationGasLimit:m.paymasterVerificationGasLimit??x.paymasterVerificationGasLimit})}}if(a.includes("paymaster")&&d&&!p&&!n.paymasterAndData&&!on){let x=yield d(f({chainId:yield et(),entryPointAddress:s.entryPoint.address,context:g},m));m=f(f({},m),x)}return delete m.calls,delete m.parameters,delete m.paymasterContext,typeof m.paymaster!="string"&&delete m.paymaster,m})}function zt(e,t){return l(this,null,function*(){let{account:n=e.account,entryPointAddress:r,stateOverride:a}=t;if(!n&&!t.sender)throw new pe;let o=n?ie(n):void 0,s=bn(a),i=o?yield U(e,Me,"prepareUserOperation")(h(f({},t),{parameters:["authorization","factory","nonce","paymaster","signature"]})):t;try{let u=[_(i),r??o?.entryPoint?.address],p=yield e.request({method:"eth_estimateUserOperationGas",params:s?[...u,s]:[...u]});return Ar(p)}catch(u){let p=t.calls;throw kt(u,f(f({},i),p?{calls:p}:{}))}})}function Sr(e){return e.request({method:"eth_supportedEntryPoints"})}function Ur(e){let t=f({},e);return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}function Gr(n,r){return l(this,arguments,function*(e,{hash:t}){let a=yield e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!a)throw new Ft({hash:t});let{blockHash:o,blockNumber:s,entryPoint:i,transactionHash:u,userOperation:p}=a;return{blockHash:o,blockNumber:BigInt(s),entryPoint:i,transactionHash:u,userOperation:Ur(p)}})}function Ir(e){let t=f({},e);return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>An(n))),e.receipt&&(t.receipt=Tn(t.receipt)),t}function Rt(n,r){return l(this,arguments,function*(e,{hash:t}){let a=yield e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!a)throw new Lt({hash:t});return Ir(a)})}function Dr(e,t){return l(this,null,function*(){let{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new pe;let a=n?ie(n):void 0,o=a?yield U(e,Me,"prepareUserOperation")(t):t,s=t.signature||(yield a?.signUserOperation?.(o)),i=_(h(f({},o),{signature:s}));try{return yield e.request({method:"eth_sendUserOperation",params:[i,r??a?.entryPoint?.address]},{retryCount:0})}catch(u){let p=t.calls;throw kt(u,h(f(f({},o),p?{calls:p}:{}),{signature:s}))}})}function Cr(e,t){let{hash:n,pollingInterval:r=e.pollingInterval,retryCount:a,timeout:o=12e4}=t,s=0,i=mn(["waitForUserOperationReceipt",e.uid,n]);return new Promise((u,p)=>{let c=Un(i,{resolve:u,reject:p},d=>{let g=O=>{m(),O(),c()},m=Gn(()=>l(this,null,function*(){a&&s>=a&&g(()=>d.reject(new Qe({hash:n})));try{let O=yield U(e,Rt,"getUserOperationReceipt")({hash:n});g(()=>d.resolve(O))}catch(O){let S=O;S.name!=="UserOperationReceiptNotFoundError"&&g(()=>d.reject(S))}s++}),{emitOnBegin:!0,interval:r});return o&&setTimeout(()=>g(()=>d.reject(new Qe({hash:n}))),o),m})})}function Hr(e){return{estimateUserOperationGas:t=>zt(e,t),getChainId:()=>nt(e),getSupportedEntryPoints:()=>Sr(e),getUserOperation:t=>Gr(e,t),getUserOperationReceipt:t=>Rt(e,t),prepareUserOperation:t=>Me(e,t),sendUserOperation:t=>Dr(e,t),waitForUserOperationReceipt:t=>Cr(e,t)}}function Ha(e){let{client:t,key:n="bundler",name:r="Bundler Client",paymaster:a,paymasterContext:o,transport:s,userOperation:i}=e;return Object.assign(Dn(h(f({},e),{chain:e.chain??t?.chain,key:n,name:r,transport:s,type:"bundlerClient"})),{client:t,paymaster:a,paymasterContext:o,userOperation:i}).extend(Hr)}var La=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Mt(e){let{authorization:t,factory:n,factoryData:r}=e;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";let a=t.address;return z([a,r??"0x"])}return n?z([n,r??"0x"]):"0x"}function Vt(e){let{callGasLimit:t,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:a,paymaster:o,paymasterData:s,paymasterPostOpGasLimit:i,paymasterVerificationGasLimit:u,sender:p,signature:c="0x",verificationGasLimit:d}=e,g=z([D(w(d||0n),{size:16}),D(w(t||0n),{size:16})]),m=Mt(e),O=z([D(w(r||0n),{size:16}),D(w(a||0n),{size:16})]),S=e.nonce??0n,v=o?z([o,D(w(u||0n),{size:16}),D(w(i||0n),{size:16}),s||"0x"]):"0x",C=e.preVerificationGas??0n;return{accountGasLimits:g,callData:n,initCode:m,gasFees:O,nonce:S,paymasterAndData:v,preVerificationGas:C,sender:p,signature:c}}var Fa={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function Lr(e){let{chainId:t,entryPointAddress:n,userOperation:r}=e,a=Vt(r);return{types:Fa,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:a}}function ka(e){let{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,a=e.userOperation,{authorization:o,callData:s="0x",callGasLimit:i,maxFeePerGas:u,maxPriorityFeePerGas:p,nonce:c,paymasterAndData:d="0x",preVerificationGas:g,sender:m,verificationGasLimit:O}=a;if(r==="0.8")return Sn(Lr({chainId:t,entryPointAddress:n,userOperation:a}));let S=(()=>{if(r==="0.6"){let v=a.initCode?.slice(0,42),C=a.initCode?.slice(42),V=Mt({authorization:o,factory:v,factoryData:C});return tt([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[m,c,k(V),k(s),i,O,g,u,p,k(d)])}if(r==="0.7"){let v=Vt(a);return tt([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[v.sender,v.nonce,k(v.initCode),k(v.callData),v.accountGasLimits,v.preVerificationGas,v.gasFees,k(v.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return k(tt([{type:"bytes32"},{type:"address"},{type:"uint256"}],[k(S),n,BigInt(t)]))}function za(e){return l(this,null,function*(){let s=e,{extend:t,nonceKeyManager:n=En({source:{get(){return Date.now()},set(){}}})}=s,r=E(s,["extend","nonceKeyManager"]),a=!1,o=yield e.getAddress();return h(f(h(f(f({},t),r),{address:o,getFactoryArgs(){return l(this,null,function*(){return"isDeployed"in this&&(yield this.isDeployed())?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()})},getNonce(p){return l(this,null,function*(){let c=p?.key??BigInt(yield n.consume({address:o,chainId:e.client.chain.id,client:e.client}));return e.getNonce?yield e.getNonce(h(f({},p),{key:c})):yield gn(e.client,{abi:un(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[o,c]})})},isDeployed(){return l(this,null,function*(){return a?!0:(a=!!(yield U(e.client,Bn,"getCode")({address:o})),a)})}}),e.sign?{sign(p){return l(this,null,function*(){let[{factory:c,factoryData:d},g]=yield Promise.all([this.getFactoryArgs(),e.sign(p)]);return c&&d?rt({address:c,data:d,signature:g}):g})}}:{}),{signMessage(p){return l(this,null,function*(){let[{factory:c,factoryData:d},g]=yield Promise.all([this.getFactoryArgs(),e.signMessage(p)]);return c&&d&&c!=="0x7702"?rt({address:c,data:d,signature:g}):g})},signTypedData(p){return l(this,null,function*(){let[{factory:c,factoryData:d},g]=yield Promise.all([this.getFactoryArgs(),e.signTypedData(p)]);return c&&d&&c!=="0x7702"?rt({address:c,data:d,signature:g}):g})},type:"smart"})})}var Ra="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789";export{La as a,ka as b,za as c,Ha as d,Ra as e,M as f,Ze as g,tn as h,ar as i,Or as j,vr as k};
