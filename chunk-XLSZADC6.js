import{a as Jr,c as nn}from"./chunk-YSWAE63R.js";import{b as k,c as $n,d as tn,e as Yn,g as zn,i as ge,j as qn,k as Jn,l as R,m as wt,n as T,p as Je}from"./chunk-CDMUM2L7.js";import{h as ot}from"./chunk-5LQ6A2AX.js";import{lb as At}from"./chunk-5G3DVQVW.js";import{a as u,b as h,e as Kn,f as be,h as qr,k as Zn,n as f}from"./chunk-VNDKUXGB.js";var In=qr((hc,Wt)=>{"use strict";var yr=Jr();Wt.exports=Pe;var mt=Po().console||{},_o={mapHttpRequest:Bt,mapHttpResponse:Bt,wrapRequestSerializer:Sn,wrapResponseSerializer:Sn,wrapErrorSerializer:Sn,req:Bt,res:Bt,err:wr,errWithCause:wr};function Fe(e,n){return e==="silent"?1/0:n.levels.values[e]}var Nn=Symbol("pino.logFuncs"),vn=Symbol("pino.hierarchy"),Eo={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function Ar(e,n){let t={logger:n,parent:e[vn]};n[vn]=t}function yo(e,n,t){let r={};n.forEach(s=>{r[s]=t[s]?t[s]:mt[s]||mt[Eo[s]||"log"]||tt}),e[Nn]=r}function Ao(e,n){return Array.isArray(e)?e.filter(function(r){return r!=="!stdSerializers.err"}):e===!0?Object.keys(n):!1}function Pe(e){e=e||{},e.browser=e.browser||{};let n=e.browser.transmit;if(n&&typeof n.send!="function")throw Error("pino: transmit option must have a send function");let t=e.browser.write||mt;e.browser.write&&(e.browser.asObject=!0);let r=e.serializers||{},s=Ao(e.browser.serialize,r),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let o=Object.keys(e.customLevels||{}),c=["error","fatal","warn","info","debug","trace"].concat(o);typeof t=="function"&&c.forEach(function(Q){t[Q]=t}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let l=e.level||"info",d=Object.create(t);d.log||(d.log=tt),yo(d,c,t),Ar({},d),Object.defineProperty(d,"levelVal",{get:g}),Object.defineProperty(d,"level",{get:W,set:J});let m={transmit:n,serialize:s,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:c,timestamp:bo(e),messageKey:e.messageKey||"msg",onChild:e.onChild||tt};d.levels=wo(e),d.level=l,d.isLevelEnabled=function(Q){return this.levels.values[Q]?this.levels.values[Q]>=this.levels.values[this.level]:!1},d.setMaxListeners=d.getMaxListeners=d.emit=d.addListener=d.on=d.prependListener=d.once=d.prependOnceListener=d.removeListener=d.removeAllListeners=d.listeners=d.listenerCount=d.eventNames=d.write=d.flush=tt,d.serializers=r,d._serialize=s,d._stdErrSerialize=a,d.child=function(...Q){return ue.call(this,m,...Q)},n&&(d._logEvent=Tn());function g(){return Fe(this.level,this)}function W(){return this._level}function J(Q){if(Q!=="silent"&&!this.levels.values[Q])throw Error("unknown level "+Q);this._level=Q,$e(this,m,d,"error"),$e(this,m,d,"fatal"),$e(this,m,d,"warn"),$e(this,m,d,"info"),$e(this,m,d,"debug"),$e(this,m,d,"trace"),o.forEach(G=>{$e(this,m,d,G)})}function ue(Q,G,ee){if(!G)throw new Error("missing bindings for child Pino");ee=ee||{},s&&G.serializers&&(ee.serializers=G.serializers);let ce=ee.serializers;if(s&&ce){var he=Object.assign({},r,ce),He=e.browser.serialize===!0?Object.keys(he):s;delete G.serializers,Rn([G],He,he,this._stdErrSerialize)}function Et(yt){this._childLevel=(yt._childLevel|0)+1,this.bindings=G,he&&(this.serializers=he,this._serialize=He),n&&(this._logEvent=Tn([].concat(yt._logEvent.bindings,G)))}Et.prototype=this;let at=new Et(this);return Ar(this,at),at.child=function(...yt){return ue.call(this,Q,...yt)},at.level=ee.level||this.level,Q.onChild(at),at}return d}function wo(e){let n=e.customLevels||{},t=Object.assign({},Pe.levels.values,n),r=Object.assign({},Pe.levels.labels,So(n));return{values:t,labels:r}}function So(e){let n={};return Object.keys(e).forEach(function(t){n[e[t]]=t}),n}Pe.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Pe.stdSerializers=_o;Pe.stdTimeFunctions=Object.assign({},{nullTime:Sr,epochTime:vr,unixTime:ko,isoTime:Oo});function vo(e){let n=[];e.bindings&&n.push(e.bindings);let t=e[vn];for(;t.parent;)t=t.parent,t.logger.bindings&&n.push(t.logger.bindings);return n.reverse()}function $e(e,n,t,r){if(Object.defineProperty(e,r,{value:Fe(e.level,t)>Fe(r,t)?tt:t[Nn][r],writable:!0,enumerable:!0,configurable:!0}),e[r]===tt){if(!n.transmit)return;let a=n.transmit.level||e.level,o=Fe(a,t);if(Fe(r,t)<o)return}e[r]=No(e,n,t,r);let s=vo(e);s.length!==0&&(e[r]=To(s,e[r]))}function To(e,n){return function(){return n.apply(this,[...e,...arguments])}}function No(e,n,t,r){return function(s){return function(){let o=n.timestamp(),c=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===mt?mt:this;for(var d=0;d<c.length;d++)c[d]=arguments[d];var m=!1;if(n.serialize&&(Rn(c,this._serialize,this.serializers,this._stdErrSerialize),m=!0),n.asObject||n.formatters?s.call(l,...Ro(this,r,c,o,n)):s.apply(l,c),n.transmit){let g=n.transmit.level||e._level,W=Fe(g,t),J=Fe(r,t);if(J<W)return;Io(this,{ts:o,methodLevel:r,methodValue:J,transmitLevel:g,transmitValue:t.levels.values[n.transmit.level||e._level],send:n.transmit.send,val:Fe(e._level,t)},c,m)}}}(e[Nn][r])}function Ro(e,n,t,r,s){let{level:a,log:o=g=>g}=s.formatters||{},c=t.slice(),l=c[0],d={},m=(e._childLevel|0)+1;if(m<1&&(m=1),r&&(d.time=r),a){let g=a(n,e.levels.values[n]);Object.assign(d,g)}else d.level=e.levels.values[n];if(s.asObjectBindingsOnly){if(l!==null&&typeof l=="object")for(;m--&&typeof c[0]=="object";)Object.assign(d,c.shift());return[o(d),...c]}else{if(l!==null&&typeof l=="object"){for(;m--&&typeof c[0]=="object";)Object.assign(d,c.shift());l=c.length?yr(c.shift(),c):void 0}else typeof l=="string"&&(l=yr(c.shift(),c));return l!==void 0&&(d[s.messageKey]=l),[o(d)]}}function Rn(e,n,t,r){for(let s in e)if(r&&e[s]instanceof Error)e[s]=Pe.stdSerializers.err(e[s]);else if(typeof e[s]=="object"&&!Array.isArray(e[s])&&n)for(let a in e[s])n.indexOf(a)>-1&&a in t&&(e[s][a]=t[a](e[s][a]))}function Io(e,n,t,r=!1){let s=n.send,a=n.ts,o=n.methodLevel,c=n.methodValue,l=n.val,d=e._logEvent.bindings;r||Rn(t,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=a,e._logEvent.messages=t.filter(function(m){return d.indexOf(m)===-1}),e._logEvent.level.label=o,e._logEvent.level.value=c,s(o,e._logEvent,l),e._logEvent=Tn(d)}function Tn(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function wr(e){let n={type:e.constructor.name,msg:e.message,stack:e.stack};for(let t in e)n[t]===void 0&&(n[t]=e[t]);return n}function bo(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Sr:vr}function Bt(){return{}}function Sn(e){return e}function tt(){}function Sr(){return!1}function vr(){return Date.now()}function ko(){return Math.round(Date.now()/1e3)}function Oo(){return new Date(Date.now()).toISOString()}function Po(){function e(n){return typeof n<"u"&&n}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}Wt.exports.default=Pe;Wt.exports.pino=Pe});var rn=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",Mi=[{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Di="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",ae={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:rn,SECURE_SITE_DASHBOARD:`${rn}/dashboard`,SECURE_SITE_FAVICON:`${rn}/images/favicon.png`,SOLANA_NATIVE_TOKEN_ADDRESS:"So11111111111111111111111111111111111111111",RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],SUGGESTED_TOKENS_BY_CHAIN:{"eip155:42161":["USD\u20AE0"]},BALANCE_SUPPORTED_CHAINS:[k.CHAIN.EVM,k.CHAIN.SOLANA],SEND_PARAMS_SUPPORTED_CHAINS:[k.CHAIN.EVM],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:[k.CHAIN.EVM],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:[k.CHAIN.EVM,k.CHAIN.SOLANA],PAY_WITH_EXCHANGE_SUPPORTED_CHAIN_NAMESPACES:[k.CHAIN.EVM,k.CHAIN.SOLANA],ACTIVITY_ENABLED_CHAIN_NAMESPACES:[k.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x",sui:"0x",stacks:"0x",ton:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:[k.CHAIN.EVM,k.CHAIN.SOLANA],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0,multiWallet:!1,emailCapture:!1,payWithExchange:!1,payments:!1,reownAuthentication:!1},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1,emailCapture:!1,reownAuthentication:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1,reownAuthentication:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa",ton:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}};var E={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5,transactionsHistory:15e3,tokenPrice:15e3,latestAppKitVersion:6048e5,tonWallets:864e5},isCacheExpired(e,n){return Date.now()-e>n},getActiveNetworkProps(){let e=E.getActiveNamespace(),n=E.getActiveCaipNetworkId(),t=n?n.split(":")[1]:void 0,r=t?isNaN(Number(t))?t:Number(t):void 0;return{namespace:e,caipNetworkId:n,chainId:r}},setWalletConnectDeepLink({name:e,href:n}){try{T.setItem(R.DEEPLINK_CHOICE,JSON.stringify({href:n,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{let e=T.getItem(R.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{T.removeItem(R.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{T.setItem(R.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{T.setItem(R.ACTIVE_CAIP_NETWORK_ID,e),E.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return T.getItem(R.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{T.removeItem(R.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{let n=wt(e);T.removeItem(n)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{let n=E.getRecentWallets();n.find(r=>r.id===e.id)||(n.unshift(e),n.length>2&&n.pop(),T.setItem(R.RECENT_WALLETS,JSON.stringify(n)),T.setItem(R.RECENT_WALLET,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{let e=T.getItem(R.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},getRecentWallet(){try{let e=T.getItem(R.RECENT_WALLET);return e?JSON.parse(e):null}catch{console.info("Unable to get AppKit recent")}return null},deleteRecentWallet(){try{T.removeItem(R.RECENT_WALLET)}catch{console.info("Unable to delete AppKit recent")}},setConnectedConnectorId(e,n){try{let t=wt(e);T.setItem(t,n)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return T.getItem(R.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{let n=wt(e);return T.getItem(n)}catch{console.info("Unable to get connected connector id in namespace",e)}},setConnectedSocialProvider(e){try{T.setItem(R.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return T.getItem(R.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{T.removeItem(R.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return T.getItem(R.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){return T.getItem(R.ACTIVE_CAIP_NETWORK_ID)?.split(":")?.[1]},setConnectionStatus(e){try{T.setItem(R.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return T.getItem(R.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{let e=T.getItem(R.CONNECTED_NAMESPACES);return e?.length?e.split(","):[]}catch{return[]}},setConnectedNamespaces(e){try{let n=Array.from(new Set(e));T.setItem(R.CONNECTED_NAMESPACES,n.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{let n=E.getConnectedNamespaces();n.includes(e)||(n.push(e),E.setConnectedNamespaces(n))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{let n=E.getConnectedNamespaces(),t=n.indexOf(e);t>-1&&(n.splice(t,1),E.setConnectedNamespaces(n))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return T.getItem(R.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{T.setItem(R.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{T.removeItem(R.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{let n=T.getItem(R.PORTFOLIO_CACHE);e=n?JSON.parse(n):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{let n=E.getBalanceCache();T.setItem(R.PORTFOLIO_CACHE,JSON.stringify(h(u({},n),{[e]:void 0})))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{let t=E.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;E.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{let n=E.getBalanceCache();n[e.caipAddress]=e,T.setItem(R.PORTFOLIO_CACHE,JSON.stringify(n))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{let n=T.getItem(R.NATIVE_BALANCE_CACHE);e=n?JSON.parse(n):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{let n=E.getBalanceCache();T.setItem(R.NATIVE_BALANCE_CACHE,JSON.stringify(h(u({},n),{[e]:void 0})))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{let t=E.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),E.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{let n=E.getNativeBalanceCache();n[e.caipAddress]=e,T.setItem(R.NATIVE_BALANCE_CACHE,JSON.stringify(n))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{let n=T.getItem(R.ENS_CACHE);e=n?JSON.parse(n):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{let t=E.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;E.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{let n=E.getEnsCache();n[e.address]=e,T.setItem(R.ENS_CACHE,JSON.stringify(n))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{let n=E.getEnsCache();T.setItem(R.ENS_CACHE,JSON.stringify(h(u({},n),{[e]:void 0})))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{let n=T.getItem(R.IDENTITY_CACHE);e=n?JSON.parse(n):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{let t=E.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;E.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{let n=E.getIdentityCache();n[e.address]={identity:e.identity,timestamp:e.timestamp},T.setItem(R.IDENTITY_CACHE,JSON.stringify(n))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{let n=E.getIdentityCache();T.setItem(R.IDENTITY_CACHE,JSON.stringify(h(u({},n),{[e]:void 0})))}catch{console.info("Unable to remove identity from cache",e)}},getTonWalletsCache(){try{let e=T.getItem(R.TON_WALLETS_CACHE),n=e?JSON.parse(e):void 0;if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.tonWallets))return n;E.removeTonWalletsCache()}catch{console.info("Unable to get ton wallets cache")}},updateTonWalletsCache(e){try{let n=E.getTonWalletsCache()||{timestamp:0,wallets:[]};n.timestamp=new Date().getTime(),n.wallets=e,T.setItem(R.TON_WALLETS_CACHE,JSON.stringify(n))}catch{console.info("Unable to update ton wallets cache",e)}},removeTonWalletsCache(){try{T.removeItem(R.TON_WALLETS_CACHE)}catch{console.info("Unable to remove ton wallets cache")}},clearAddressCache(){try{T.removeItem(R.PORTFOLIO_CACHE),T.removeItem(R.NATIVE_BALANCE_CACHE),T.removeItem(R.ENS_CACHE),T.removeItem(R.IDENTITY_CACHE),T.removeItem(R.HISTORY_TRANSACTIONS_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{T.setItem(R.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{let e=T.getItem(R.PREFERRED_ACCOUNT_TYPES);return e?JSON.parse(e):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(e,n){try{let t=E.getConnections(),r=t[n]??[],s=new Map;for(let o of r)s.set(o.connectorId,u({},o));for(let o of e){let c=s.get(o.connectorId),l=o.connectorId===k.CONNECTOR_ID.AUTH;if(c&&!l){let d=new Set(c.accounts.map(g=>g.address.toLowerCase())),m=o.accounts.filter(g=>!d.has(g.address.toLowerCase()));c.accounts.push(...m)}else s.set(o.connectorId,u({},o))}let a=h(u({},t),{[n]:Array.from(s.values())});T.setItem(R.CONNECTIONS,JSON.stringify(a))}catch(t){console.error("Unable to sync connections to storage",t)}},getConnections(){try{let e=T.getItem(R.CONNECTIONS);return e?JSON.parse(e):{}}catch(e){return console.error("Unable to get connections from storage",e),{}}},deleteAddressFromConnection({connectorId:e,address:n,namespace:t}){try{let r=E.getConnections(),s=r[t]??[],a=new Map(s.map(c=>[c.connectorId,c])),o=a.get(e);o&&(o.accounts.filter(l=>l.address.toLowerCase()!==n.toLowerCase()).length===0?a.delete(e):a.set(e,h(u({},o),{accounts:o.accounts.filter(l=>l.address.toLowerCase()!==n.toLowerCase())}))),T.setItem(R.CONNECTIONS,JSON.stringify(h(u({},r),{[t]:Array.from(a.values())})))}catch{console.error(`Unable to remove address "${n}" from connector "${e}" in namespace "${t}"`)}},getDisconnectedConnectorIds(){try{let e=T.getItem(R.DISCONNECTED_CONNECTOR_IDS);return e?JSON.parse(e):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(e,n){try{let t=E.getDisconnectedConnectorIds(),r=t[n]??[];r.push(e),T.setItem(R.DISCONNECTED_CONNECTOR_IDS,JSON.stringify(h(u({},t),{[n]:Array.from(new Set(r))})))}catch{console.error(`Unable to set disconnected connector id "${e}" for namespace "${n}"`)}},removeDisconnectedConnectorId(e,n){try{let t=E.getDisconnectedConnectorIds(),r=t[n]??[];r=r.filter(s=>s.toLowerCase()!==e.toLowerCase()),T.setItem(R.DISCONNECTED_CONNECTOR_IDS,JSON.stringify(h(u({},t),{[n]:Array.from(new Set(r))})))}catch{console.error(`Unable to remove disconnected connector id "${e}" for namespace "${n}"`)}},isConnectorDisconnected(e,n){try{return(E.getDisconnectedConnectorIds()[n]??[]).some(s=>s.toLowerCase()===e.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${e}" for namespace "${n}"`)}return!1},getTransactionsCache(){try{let e=T.getItem(R.HISTORY_TRANSACTIONS_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get transactions cache")}return{}},getTransactionsCacheForAddress({address:e,chainId:n=""}){try{let r=E.getTransactionsCache()[e]?.[n];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.transactionsHistory))return r.transactions;E.removeTransactionsCache({address:e,chainId:n})}catch{console.info("Unable to get transactions cache")}},updateTransactionsCache({address:e,chainId:n="",timestamp:t,transactions:r}){try{let s=E.getTransactionsCache();s[e]=h(u({},s[e]),{[n]:{timestamp:t,transactions:r}}),T.setItem(R.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(s))}catch{console.info("Unable to update transactions cache",{address:e,chainId:n,timestamp:t,transactions:r})}},removeTransactionsCache({address:e,chainId:n}){try{let r=E.getTransactionsCache(),t=r?.[e]||{},{[n]:a}=t,o=be(t,[Kn(n)]);T.setItem(R.HISTORY_TRANSACTIONS_CACHE,JSON.stringify(h(u({},r),{[e]:o})))}catch{console.info("Unable to remove transactions cache",{address:e,chainId:n})}},getTokenPriceCache(){try{let e=T.getItem(R.TOKEN_PRICE_CACHE);return e?JSON.parse(e):{}}catch{console.info("Unable to get token price cache")}return{}},getTokenPriceCacheForAddresses(e){try{let t=E.getTokenPriceCache()[e.join(",")];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.tokenPrice))return t.tokenPrice;E.removeTokenPriceCache(e)}catch{console.info("Unable to get token price cache for addresses",e)}},updateTokenPriceCache(e){try{let n=E.getTokenPriceCache();n[e.addresses.join(",")]={timestamp:e.timestamp,tokenPrice:e.tokenPrice},T.setItem(R.TOKEN_PRICE_CACHE,JSON.stringify(n))}catch{console.info("Unable to update token price cache",e)}},removeTokenPriceCache(e){try{let n=E.getTokenPriceCache();T.setItem(R.TOKEN_PRICE_CACHE,JSON.stringify(h(u({},n),{[e.join(",")]:void 0})))}catch{console.info("Unable to remove token price cache",e)}},getLatestAppKitVersion(){try{let e=this.getLatestAppKitVersionCache(),n=e?.version;return n&&!this.isCacheExpired(e.timestamp,this.cacheExpiry.latestAppKitVersion)?n:void 0}catch{console.info("Unable to get latest AppKit version")}},getLatestAppKitVersionCache(){try{let e=T.getItem(R.LATEST_APPKIT_VERSION);return e?JSON.parse(e):{}}catch{console.info("Unable to get latest AppKit version cache")}return{}},updateLatestAppKitVersion(e){try{let n=E.getLatestAppKitVersionCache();n.timestamp=e.timestamp,n.version=e.version,T.setItem(R.LATEST_APPKIT_VERSION,JSON.stringify(n))}catch{console.info("Unable to update latest AppKit version on local storage",e)}}};var O={getWindow(){if(!(typeof window>"u"))return window},isMobile(){return this.isClient()?!!(window?.matchMedia&&typeof window.matchMedia=="function"&&window.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(e,n=""){return e?.caipNetworkId.toLocaleLowerCase().includes(n.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return O.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;let e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){return this.isClient()?(window?.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(e){return e?e-Date.now()<=ae.TEN_SEC_MS:!0},isAllowedRetry(e,n=ae.ONE_SEC_MS){return Date.now()-e>=n},copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch{return!1}},isSafeApp(){if(O.isClient()&&window.self!==window.top)try{let e=window?.location?.ancestorOrigins?.[0],n="https://app.safe.global";if(e){let t=new URL(e),r=new URL(n);return t.hostname===r.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ae.FOUR_MINUTES_MS},getNetworkId(e){return e?.split(":")[1]},getPlainAddress(e){return e?.split(":")[2]},wait(e){return f(this,null,function*(){return new Promise(n=>{setTimeout(n,e)})})},debounce(e,n=500){let t;return(...r)=>{function s(){e(...r)}t&&clearTimeout(t),t=setTimeout(s,n)}},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},formatNativeUrl(e,n,t=null){if(O.isHttpUrl(e))return this.formatUniversalUrl(e,n);let r=e,s=t;r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!s?.endsWith("/")&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(n=encodeURIComponent(n));let a=encodeURIComponent(n);return{redirect:`${r}wc?uri=${a}`,redirectUniversalLink:s?`${s}wc?uri=${a}`:void 0,href:r}},formatUniversalUrl(e,n){if(!O.isHttpUrl(e))return this.formatNativeUrl(e,n);let t=e;t.endsWith("/")||(t=`${t}/`);let r=encodeURIComponent(n);return{redirect:`${t}wc?uri=${r}`,href:t}},getOpenTargetForPlatform(e){return e==="popupWindow"?e:this.isTelegram()?E.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,n,t){window?.open(e,this.getOpenTargetForPlatform(n),t||"noreferrer noopener")},returnOpenHref(e,n,t){return window?.open(e,this.getOpenTargetForPlatform(n),t||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){if(typeof window>"u")return!1;let e=window?.matchMedia&&typeof window.matchMedia=="function"?window.matchMedia("(display-mode: standalone)")?.matches:!1,n=window?.navigator?.standalone;return!!(e||n)},preloadImage(e){return f(this,null,function*(){let n=new Promise((t,r)=>{let s=new Image;s.onload=t,s.onerror=r,s.crossOrigin="anonymous",s.src=e});return Promise.race([n,O.wait(2e3)])})},parseBalance(e,n){let t="0.000";if(typeof e=="string"){let l=Number(e);if(!isNaN(l)){let d=(Math.floor(l*1e3)/1e3).toFixed(3);d&&(t=d)}}let[r,s]=t.split("."),a=r||"0",o=s||"000";return{formattedText:`${a}.${o}${n?` ${n}`:""}`,value:a,decimals:o,symbol:n}},getApiUrl(){return k.W3M_API_URL},getBlockchainApiUrl(){return k.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return k.PULSE_API_URL},getUUID(){return crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{let n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})},parseError(e){return typeof e=="string"?e:typeof e?.issues?.[0]?.message=="string"?e.issues[0].message:e instanceof Error?e.message:"Unknown error"},sortRequestedNetworks(e,n=[]){let t={};return n&&e&&(e.forEach((r,s)=>{t[r]=s}),n.sort((r,s)=>{let a=t[r.id],o=t[s.id];return a!==void 0&&o!==void 0?a-o:a!==void 0?-1:o!==void 0?1:0})),n},calculateBalance(e){let n=0;for(let t of e)n+=t.value??0;return n},formatTokenBalance(e){let n=e.toFixed(2),[t,r]=n.split(".");return{dollars:t,pennies:r}},isAddress(e,n="eip155"){switch(n){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||/^(?:0x)?[0-9A-F]{40}$/iu.test(e))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,n){let t=new Set;return e.filter(r=>{let s=r[n];return t.has(s)?!1:(t.add(s),!0)})},generateSdkVersion(e,n,t){let s=e.length===0?ae.ADAPTER_TYPES.UNIVERSAL:e.map(a=>a.adapterType).join(",");return`${n}-${s}-${t}`},createAccount(e,n,t,r,s){return{namespace:e,address:n,type:t,publicKey:r,path:s}},isCaipAddress(e){if(typeof e!="string")return!1;let n=e.split(":"),t=n[0];return n.filter(Boolean).length===3&&t in k.CHAIN_NAME_MAP},getAccount(e){return e?typeof e=="string"?{address:e,chainId:void 0}:{address:e.address,chainId:e.chainId}:{address:void 0,chainId:void 0}},isMac(){let e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){let n=`--${encodeURIComponent(window?.location.href)}`,t="state=";if(new URL(e).host==="auth.magic.link"){let s="provider_authorization_url=",a=e.substring(e.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(a),t,n);return e.replace(a,encodeURIComponent(o))}return this.injectIntoUrl(e,t,n)},injectIntoUrl(e,n,t){let r=e.indexOf(n);if(r===-1)throw new Error(`${n} parameter not found in the URL: ${e}`);let s=e.indexOf("&",r),a=n.length,o=s!==-1?s:e.length,c=e.substring(0,r+a),l=e.substring(r+a,o),d=e.substring(s),m=l+t;return c+m+d}};var Xr="https://secure.walletconnect.org/sdk",Xn=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Xr,Qn=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",er=(typeof process<"u"&&typeof process.env<"u"?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",y={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},re={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}};var sn={address:/^0x(?:[A-Fa-f0-9]{40})$/u,transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u};var St=30*1e3,ye={checkIfAllowedToTriggerEmail(){let e=oe.get(y.LAST_EMAIL_LOGIN_TIME);if(e){let n=Date.now()-Number(e);if(n<St){let t=Math.ceil((St-n)/1e3);throw new Error(`Please try again after ${t} seconds`)}}},getTimeToNextEmailLogin(){let e=oe.get(y.LAST_EMAIL_LOGIN_TIME);if(e){let n=Date.now()-Number(e);if(n<St)return Math.ceil((St-n)/1e3)}return 0},checkIfRequestExists(e){return re.NOT_SAFE_RPC_METHODS.includes(e.method)||re.SAFE_RPC_METHODS.includes(e.method)},getResponseType(e){return typeof e=="string"&&(e?.match(sn.transactionHash)||e?.match(sn.signedMessage))?y.RPC_RESPONSE_TYPE_TX:y.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(e){return re.SAFE_RPC_METHODS.includes(e.method)},isClient:typeof window<"u"};var oe={set(e,n){ye.isClient&&localStorage.setItem(`${y.STORAGE_KEY}${e}`,n)},get(e){return ye.isClient?localStorage.getItem(`${y.STORAGE_KEY}${e}`):null},delete(e,n){ye.isClient&&(n?localStorage.removeItem(e):localStorage.removeItem(`${y.STORAGE_KEY}${e}`))}};var z;(function(e){e.assertEqual=s=>s;function n(s){}e.assertIs=n;function t(s){throw new Error}e.assertNever=t,e.arrayToEnum=s=>{let a={};for(let o of s)a[o]=o;return a},e.getValidEnumValues=s=>{let a=e.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),o={};for(let c of a)o[c]=s[c];return e.objectValues(o)},e.objectValues=s=>e.objectKeys(s).map(function(a){return s[a]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let a=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&a.push(o);return a},e.find=(s,a)=>{for(let o of s)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(z||(z={}));var rr=function(e){return e.mergeShapes=(n,t)=>u(u({},n),t),e}(rr||{}),A=z.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),De=e=>{switch(typeof e){case"undefined":return A.undefined;case"string":return A.string;case"number":return isNaN(e)?A.nan:A.number;case"boolean":return A.boolean;case"function":return A.function;case"bigint":return A.bigint;case"symbol":return A.symbol;case"object":return Array.isArray(e)?A.array:e===null?A.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?A.promise:typeof Map<"u"&&e instanceof Map?A.map:typeof Set<"u"&&e instanceof Set?A.set:typeof Date<"u"&&e instanceof Date?A.date:A.object;default:return A.unknown}},C=z.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Qr=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),Oe=(()=>{class e extends Error{constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){let r=t||function(o){return o.message},s={_errors:[]},a=o=>{for(let c of o.issues)if(c.code==="invalid_union")c.unionErrors.map(a);else if(c.code==="invalid_return_type")a(c.returnTypeError);else if(c.code==="invalid_arguments")a(c.argumentsError);else if(c.path.length===0)s._errors.push(r(c));else{let l=s,d=0;for(;d<c.path.length;){let m=c.path[d];d===c.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(c))):l[m]=l[m]||{_errors:[]},l=l[m],d++}}};return a(this),s}toString(){return this.message}get message(){return JSON.stringify(this.issues,z.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){let r={},s=[];for(let a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}return e.create=n=>new e(n),e})(),ct=(e,n)=>{let t;switch(e.code){case C.invalid_type:e.received===A.undefined?t="Required":t=`Expected ${e.expected}, received ${e.received}`;break;case C.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(e.expected,z.jsonStringifyReplacer)}`;break;case C.unrecognized_keys:t=`Unrecognized key(s) in object: ${z.joinValues(e.keys,", ")}`;break;case C.invalid_union:t="Invalid input";break;case C.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${z.joinValues(e.options)}`;break;case C.invalid_enum_value:t=`Invalid enum value. Expected ${z.joinValues(e.options)}, received '${e.received}'`;break;case C.invalid_arguments:t="Invalid function arguments";break;case C.invalid_return_type:t="Invalid function return type";break;case C.invalid_date:t="Invalid date";break;case C.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(t=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?t=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?t=`Invalid input: must end with "${e.validation.endsWith}"`:z.assertNever(e.validation):e.validation!=="regex"?t=`Invalid ${e.validation}`:t="Invalid";break;case C.too_small:e.type==="array"?t=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?t=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?t=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?t=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:t="Invalid input";break;case C.too_big:e.type==="array"?t=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?t=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?t=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?t=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?t=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:t="Invalid input";break;case C.custom:t="Invalid input";break;case C.invalid_intersection_types:t="Intersection results could not be merged";break;case C.not_multiple_of:t=`Number must be a multiple of ${e.multipleOf}`;break;case C.not_finite:t="Number must be finite";break;default:t=n.defaultError,z.assertNever(e)}return{message:t}},sr=ct;function es(e){sr=e}function Tt(){return sr}var Nt=e=>{let{data:n,path:t,errorMaps:r,issueData:s}=e,a=[...t,...s.path||[]],o=h(u({},s),{path:a}),c="",l=r.filter(d=>!!d).slice().reverse();for(let d of l)c=d(o,{data:n,defaultError:c}).message;return h(u({},s),{path:a,message:s.message||c})},ts=[];function v(e,n){let t=Nt({issueData:n,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,Tt(),ct].filter(r=>!!r)});e.common.issues.push(t)}var fe=class e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(n,t){let r=[];for(let s of t){if(s.status==="aborted")return B;s.status==="dirty"&&n.dirty(),r.push(s.value)}return{status:n.value,value:r}}static mergeObjectAsync(n,t){return f(this,null,function*(){let r=[];for(let s of t)r.push({key:yield s.key,value:yield s.value});return e.mergeObjectSync(n,r)})}static mergeObjectSync(n,t){let r={};for(let s of t){let{key:a,value:o}=s;if(a.status==="aborted"||o.status==="aborted")return B;a.status==="dirty"&&n.dirty(),o.status==="dirty"&&n.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[a.value]=o.value)}return{status:n.value,value:r}}},B=Object.freeze({status:"aborted"}),ar=e=>({status:"dirty",value:e}),Ce=e=>({status:"valid",value:e}),on=e=>e.status==="aborted",cn=e=>e.status==="dirty",lt=e=>e.status==="valid",Rt=e=>typeof Promise<"u"&&e instanceof Promise,U=function(e){return e.errToObj=n=>typeof n=="string"?{message:n}:n||{},e.toString=n=>typeof n=="string"?n:n?.message,e}(U||{}),Re=class{constructor(n,t,r,s){this._cachedPath=[],this.parent=n,this.data=t,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},tr=(e,n)=>{if(lt(n))return{success:!0,data:n.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Oe(e.common.issues);return this._error=t,this._error}}};function j(e){if(!e)return{};let{errorMap:n,invalid_type_error:t,required_error:r,description:s}=e;if(n&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return n?{errorMap:n,description:s}:{errorMap:(o,c)=>o.code!=="invalid_type"?{message:c.defaultError}:typeof c.data>"u"?{message:r??c.defaultError}:{message:t??c.defaultError},description:s}}var V=class{constructor(n){this.spa=this.safeParseAsync,this._def=n,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(n){return De(n.data)}_getOrReturnCtx(n,t){return t||{common:n.parent.common,data:n.data,parsedType:De(n.data),schemaErrorMap:this._def.errorMap,path:n.path,parent:n.parent}}_processInputParams(n){return{status:new fe,ctx:{common:n.parent.common,data:n.data,parsedType:De(n.data),schemaErrorMap:this._def.errorMap,path:n.path,parent:n.parent}}}_parseSync(n){let t=this._parse(n);if(Rt(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(n){let t=this._parse(n);return Promise.resolve(t)}parse(n,t){let r=this.safeParse(n,t);if(r.success)return r.data;throw r.error}safeParse(n,t){var r;let s={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:n,parsedType:De(n)},a=this._parseSync({data:n,path:s.path,parent:s});return tr(s,a)}parseAsync(n,t){return f(this,null,function*(){let r=yield this.safeParseAsync(n,t);if(r.success)return r.data;throw r.error})}safeParseAsync(n,t){return f(this,null,function*(){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:n,parsedType:De(n)},s=this._parse({data:n,path:r.path,parent:r}),a=yield Rt(s)?s:Promise.resolve(s);return tr(r,a)})}refine(n,t){let r=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,a)=>{let o=n(s),c=()=>a.addIssue(u({code:C.custom},r(s)));return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(c(),!1)):o?!0:(c(),!1)})}refinement(n,t){return this._refinement((r,s)=>n(r)?!0:(s.addIssue(typeof t=="function"?t(r,s):t),!1))}_refinement(n){return new Ze({schema:this,typeName:L.ZodEffects,effect:{type:"refinement",refinement:n}})}superRefine(n){return this._refinement(n)}optional(){return Ke.create(this,this._def)}nullable(){return ut.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dt.create(this,this._def)}promise(){return Lt.create(this,this._def)}or(n){return gn.create([this,n],this._def)}and(n){return Cn.create(this,n,this._def)}transform(n){return new Ze(h(u({},j(this._def)),{schema:this,typeName:L.ZodEffects,effect:{type:"transform",transform:n}}))}default(n){let t=typeof n=="function"?n:()=>n;return new An(h(u({},j(this._def)),{innerType:this,defaultValue:t,typeName:L.ZodDefault}))}brand(){return new Pt(u({typeName:L.ZodBranded,type:this},j(this._def)))}catch(n){let t=typeof n=="function"?n:()=>n;return new ur(h(u({},j(this._def)),{innerType:this,catchValue:t,typeName:L.ZodCatch}))}describe(n){let t=this.constructor;return new t(h(u({},this._def),{description:n}))}pipe(n){return pt.create(this,n)}readonly(){return mr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ns=/^c[^\s-]{8,}$/i,rs=/^[a-z][a-z0-9]*$/,ss=/^[0-9A-HJKMNP-TV-Z]{26}$/,as=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,os=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,is="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",an,cs=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ls=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ds=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function us(e,n){return!!((n==="v4"||!n)&&cs.test(e)||(n==="v6"||!n)&&ls.test(e))}var Ut=(()=>{class e extends V{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==A.string){let o=this._getOrReturnCtx(t);return v(o,{code:C.invalid_type,expected:A.string,received:o.parsedType}),B}let s=new fe,a;for(let o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:C.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="max")t.data.length>o.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:C.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),s.dirty());else if(o.kind==="length"){let c=t.data.length>o.value,l=t.data.length<o.value;(c||l)&&(a=this._getOrReturnCtx(t,a),c?v(a,{code:C.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&v(a,{code:C.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),s.dirty())}else if(o.kind==="email")os.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"email",code:C.invalid_string,message:o.message}),s.dirty());else if(o.kind==="emoji")an||(an=new RegExp(is,"u")),an.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"emoji",code:C.invalid_string,message:o.message}),s.dirty());else if(o.kind==="uuid")as.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"uuid",code:C.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid")ns.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"cuid",code:C.invalid_string,message:o.message}),s.dirty());else if(o.kind==="cuid2")rs.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"cuid2",code:C.invalid_string,message:o.message}),s.dirty());else if(o.kind==="ulid")ss.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"ulid",code:C.invalid_string,message:o.message}),s.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),v(a,{validation:"url",code:C.invalid_string,message:o.message}),s.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"regex",code:C.invalid_string,message:o.message}),s.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(a=this._getOrReturnCtx(t,a),v(a,{code:C.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),s.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(a=this._getOrReturnCtx(t,a),v(a,{code:C.invalid_string,validation:{startsWith:o.value},message:o.message}),s.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(a=this._getOrReturnCtx(t,a),v(a,{code:C.invalid_string,validation:{endsWith:o.value},message:o.message}),s.dirty()):o.kind==="datetime"?ds(o).test(t.data)||(a=this._getOrReturnCtx(t,a),v(a,{code:C.invalid_string,validation:"datetime",message:o.message}),s.dirty()):o.kind==="ip"?us(t.data,o.version)||(a=this._getOrReturnCtx(t,a),v(a,{validation:"ip",code:C.invalid_string,message:o.message}),s.dirty()):z.assertNever(o);return{status:s.value,value:t.data}}_regex(t,r,s){return this.refinement(a=>t.test(a),u({validation:r,code:C.invalid_string},U.errToObj(s)))}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}email(t){return this._addCheck(u({kind:"email"},U.errToObj(t)))}url(t){return this._addCheck(u({kind:"url"},U.errToObj(t)))}emoji(t){return this._addCheck(u({kind:"emoji"},U.errToObj(t)))}uuid(t){return this._addCheck(u({kind:"uuid"},U.errToObj(t)))}cuid(t){return this._addCheck(u({kind:"cuid"},U.errToObj(t)))}cuid2(t){return this._addCheck(u({kind:"cuid2"},U.errToObj(t)))}ulid(t){return this._addCheck(u({kind:"ulid"},U.errToObj(t)))}ip(t){return this._addCheck(u({kind:"ip"},U.errToObj(t)))}datetime(t){var r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck(u({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(r=t?.offset)!==null&&r!==void 0?r:!1},U.errToObj(t?.message)))}regex(t,r){return this._addCheck(u({kind:"regex",regex:t},U.errToObj(r)))}includes(t,r){return this._addCheck(u({kind:"includes",value:t,position:r?.position},U.errToObj(r?.message)))}startsWith(t,r){return this._addCheck(u({kind:"startsWith",value:t},U.errToObj(r)))}endsWith(t,r){return this._addCheck(u({kind:"endsWith",value:t},U.errToObj(r)))}min(t,r){return this._addCheck(u({kind:"min",value:t},U.errToObj(r)))}max(t,r){return this._addCheck(u({kind:"max",value:t},U.errToObj(r)))}length(t,r){return this._addCheck(u({kind:"length",value:t},U.errToObj(r)))}nonempty(t){return this.min(1,U.errToObj(t))}trim(){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}return e.create=n=>{var t;return new e(u({checks:[],typeName:L.ZodString,coerce:(t=n?.coerce)!==null&&t!==void 0?t:!1},j(n)))},e})();function ps(e,n){let t=(e.toString().split(".")[1]||"").length,r=(n.toString().split(".")[1]||"").length,s=t>r?t:r,a=parseInt(e.toFixed(s).replace(".","")),o=parseInt(n.toFixed(s).replace(".",""));return a%o/Math.pow(10,s)}var dn=(()=>{class e extends V{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==A.number){let o=this._getOrReturnCtx(t);return v(o,{code:C.invalid_type,expected:A.number,received:o.parsedType}),B}let s,a=new fe;for(let o of this._def.checks)o.kind==="int"?z.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),v(s,{code:C.invalid_type,expected:"integer",received:"float",message:o.message}),a.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),v(s,{code:C.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),v(s,{code:C.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),a.dirty()):o.kind==="multipleOf"?ps(t.data,o.value)!==0&&(s=this._getOrReturnCtx(t,s),v(s,{code:C.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),v(s,{code:C.not_finite,message:o.message}),a.dirty()):z.assertNever(o);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,U.toString(r))}gt(t,r){return this.setLimit("min",t,!1,U.toString(r))}lte(t,r){return this.setLimit("max",t,!0,U.toString(r))}lt(t,r){return this.setLimit("max",t,!1,U.toString(r))}setLimit(t,r,s,a){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:U.toString(a)}]}))}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}int(t){return this._addCheck({kind:"int",message:U.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:U.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:U.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:U.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:U.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:U.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:U.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:U.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:U.toString(t)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&z.isInteger(t.value))}get isFinite(){let t=null,r=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(r)&&Number.isFinite(t)}}return e.create=n=>new e(u({checks:[],typeName:L.ZodNumber,coerce:n?.coerce||!1},j(n))),e})(),un=(()=>{class e extends V{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==A.bigint){let o=this._getOrReturnCtx(t);return v(o,{code:C.invalid_type,expected:A.bigint,received:o.parsedType}),B}let s,a=new fe;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(s=this._getOrReturnCtx(t,s),v(s,{code:C.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(s=this._getOrReturnCtx(t,s),v(s,{code:C.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),a.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),v(s,{code:C.not_multiple_of,multipleOf:o.value,message:o.message}),a.dirty()):z.assertNever(o);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,U.toString(r))}gt(t,r){return this.setLimit("min",t,!1,U.toString(r))}lte(t,r){return this.setLimit("max",t,!0,U.toString(r))}lt(t,r){return this.setLimit("max",t,!1,U.toString(r))}setLimit(t,r,s,a){return new e(h(u({},this._def),{checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:U.toString(a)}]}))}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:U.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:U.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:U.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:U.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:U.toString(r)})}get minValue(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}return e.create=n=>{var t;return new e(u({checks:[],typeName:L.ZodBigInt,coerce:(t=n?.coerce)!==null&&t!==void 0?t:!1},j(n)))},e})(),pn=(()=>{class e extends V{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==A.boolean){let s=this._getOrReturnCtx(t);return v(s,{code:C.invalid_type,expected:A.boolean,received:s.parsedType}),B}return Ce(t.data)}}return e.create=n=>new e(u({typeName:L.ZodBoolean,coerce:n?.coerce||!1},j(n))),e})(),mn=(()=>{class e extends V{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==A.date){let o=this._getOrReturnCtx(t);return v(o,{code:C.invalid_type,expected:A.date,received:o.parsedType}),B}if(isNaN(t.data.getTime())){let o=this._getOrReturnCtx(t);return v(o,{code:C.invalid_date}),B}let s=new fe,a;for(let o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:C.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),s.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(a=this._getOrReturnCtx(t,a),v(a,{code:C.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),s.dirty()):z.assertNever(o);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new e(h(u({},this._def),{checks:[...this._def.checks,t]}))}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:U.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:U.toString(r)})}get minDate(){let t=null;for(let r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(let r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}return e.create=n=>new e(u({checks:[],coerce:n?.coerce||!1,typeName:L.ZodDate},j(n))),e})(),or=(()=>{class e extends V{_parse(t){if(this._getType(t)!==A.symbol){let s=this._getOrReturnCtx(t);return v(s,{code:C.invalid_type,expected:A.symbol,received:s.parsedType}),B}return Ce(t.data)}}return e.create=n=>new e(u({typeName:L.ZodSymbol},j(n))),e})(),fn=(()=>{class e extends V{_parse(t){if(this._getType(t)!==A.undefined){let s=this._getOrReturnCtx(t);return v(s,{code:C.invalid_type,expected:A.undefined,received:s.parsedType}),B}return Ce(t.data)}}return e.create=n=>new e(u({typeName:L.ZodUndefined},j(n))),e})(),hn=(()=>{class e extends V{_parse(t){if(this._getType(t)!==A.null){let s=this._getOrReturnCtx(t);return v(s,{code:C.invalid_type,expected:A.null,received:s.parsedType}),B}return Ce(t.data)}}return e.create=n=>new e(u({typeName:L.ZodNull},j(n))),e})(),It=(()=>{class e extends V{constructor(){super(...arguments),this._any=!0}_parse(t){return Ce(t.data)}}return e.create=n=>new e(u({typeName:L.ZodAny},j(n))),e})(),it=(()=>{class e extends V{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ce(t.data)}}return e.create=n=>new e(u({typeName:L.ZodUnknown},j(n))),e})(),Ge=(()=>{class e extends V{_parse(t){let r=this._getOrReturnCtx(t);return v(r,{code:C.invalid_type,expected:A.never,received:r.parsedType}),B}}return e.create=n=>new e(u({typeName:L.ZodNever},j(n))),e})(),ir=(()=>{class e extends V{_parse(t){if(this._getType(t)!==A.undefined){let s=this._getOrReturnCtx(t);return v(s,{code:C.invalid_type,expected:A.void,received:s.parsedType}),B}return Ce(t.data)}}return e.create=n=>new e(u({typeName:L.ZodVoid},j(n))),e})(),dt=(()=>{class e extends V{_parse(t){let{ctx:r,status:s}=this._processInputParams(t),a=this._def;if(r.parsedType!==A.array)return v(r,{code:C.invalid_type,expected:A.array,received:r.parsedType}),B;if(a.exactLength!==null){let c=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(c||l)&&(v(r,{code:c?C.too_big:C.too_small,minimum:l?a.exactLength.value:void 0,maximum:c?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(v(r,{code:C.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(v(r,{code:C.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((c,l)=>a.type._parseAsync(new Re(r,c,r.path,l)))).then(c=>fe.mergeArray(s,c));let o=[...r.data].map((c,l)=>a.type._parseSync(new Re(r,c,r.path,l)));return fe.mergeArray(s,o)}get element(){return this._def.type}min(t,r){return new e(h(u({},this._def),{minLength:{value:t,message:U.toString(r)}}))}max(t,r){return new e(h(u({},this._def),{maxLength:{value:t,message:U.toString(r)}}))}length(t,r){return new e(h(u({},this._def),{exactLength:{value:t,message:U.toString(r)}}))}nonempty(t){return this.min(1,t)}}return e.create=(n,t)=>new e(u({type:n,minLength:null,maxLength:null,exactLength:null,typeName:L.ZodArray},j(t))),e})();function Xe(e){if(e instanceof Qe){let n={};for(let t in e.shape){let r=e.shape[t];n[t]=Ke.create(Xe(r))}return new Qe(h(u({},e._def),{shape:()=>n}))}else return e instanceof dt?new dt(h(u({},e._def),{type:Xe(e.element)})):e instanceof Ke?Ke.create(Xe(e.unwrap())):e instanceof ut?ut.create(Xe(e.unwrap())):e instanceof et?et.create(e.items.map(n=>Xe(n))):e}var Qe=(()=>{class e extends V{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let t=this._def.shape(),r=z.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==A.object){let m=this._getOrReturnCtx(t);return v(m,{code:C.invalid_type,expected:A.object,received:m.parsedType}),B}let{status:s,ctx:a}=this._processInputParams(t),{shape:o,keys:c}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ge&&this._def.unknownKeys==="strip"))for(let m in a.data)c.includes(m)||l.push(m);let d=[];for(let m of c){let g=o[m],W=a.data[m];d.push({key:{status:"valid",value:m},value:g._parse(new Re(a,W,a.path,m)),alwaysSet:m in a.data})}if(this._def.catchall instanceof Ge){let m=this._def.unknownKeys;if(m==="passthrough")for(let g of l)d.push({key:{status:"valid",value:g},value:{status:"valid",value:a.data[g]}});else if(m==="strict")l.length>0&&(v(a,{code:C.unrecognized_keys,keys:l}),s.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let g of l){let W=a.data[g];d.push({key:{status:"valid",value:g},value:m._parse(new Re(a,W,a.path,g)),alwaysSet:g in a.data})}}return a.common.async?Promise.resolve().then(()=>f(this,null,function*(){let m=[];for(let g of d){let W=yield g.key;m.push({key:W,value:yield g.value,alwaysSet:g.alwaysSet})}return m})).then(m=>fe.mergeObjectSync(s,m)):fe.mergeObjectSync(s,d)}get shape(){return this._def.shape()}strict(t){return U.errToObj,new e(u(h(u({},this._def),{unknownKeys:"strict"}),t!==void 0?{errorMap:(r,s)=>{var a,o,c,l;let d=(c=(o=(a=this._def).errorMap)===null||o===void 0?void 0:o.call(a,r,s).message)!==null&&c!==void 0?c:s.defaultError;return r.code==="unrecognized_keys"?{message:(l=U.errToObj(t).message)!==null&&l!==void 0?l:d}:{message:d}}}:{}))}strip(){return new e(h(u({},this._def),{unknownKeys:"strip"}))}passthrough(){return new e(h(u({},this._def),{unknownKeys:"passthrough"}))}extend(t){return new e(h(u({},this._def),{shape:()=>u(u({},this._def.shape()),t)}))}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>u(u({},this._def.shape()),t._def.shape()),typeName:L.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new e(h(u({},this._def),{catchall:t}))}pick(t){let r={};return z.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(r[s]=this.shape[s])}),new e(h(u({},this._def),{shape:()=>r}))}omit(t){let r={};return z.objectKeys(this.shape).forEach(s=>{t[s]||(r[s]=this.shape[s])}),new e(h(u({},this._def),{shape:()=>r}))}deepPartial(){return Xe(this)}partial(t){let r={};return z.objectKeys(this.shape).forEach(s=>{let a=this.shape[s];t&&!t[s]?r[s]=a:r[s]=a.optional()}),new e(h(u({},this._def),{shape:()=>r}))}required(t){let r={};return z.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])r[s]=this.shape[s];else{let o=this.shape[s];for(;o instanceof Ke;)o=o._def.innerType;r[s]=o}}),new e(h(u({},this._def),{shape:()=>r}))}keyof(){return dr(z.objectKeys(this.shape))}}return e.create=(n,t)=>new e(u({shape:()=>n,unknownKeys:"strip",catchall:Ge.create(),typeName:L.ZodObject},j(t))),e.strictCreate=(n,t)=>new e(u({shape:()=>n,unknownKeys:"strict",catchall:Ge.create(),typeName:L.ZodObject},j(t))),e.lazycreate=(n,t)=>new e(u({shape:n,unknownKeys:"strip",catchall:Ge.create(),typeName:L.ZodObject},j(t))),e})(),gn=(()=>{class e extends V{_parse(t){let{ctx:r}=this._processInputParams(t),s=this._def.options;function a(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let c=o.map(l=>new Oe(l.ctx.common.issues));return v(r,{code:C.invalid_union,unionErrors:c}),B}if(r.common.async)return Promise.all(s.map(o=>f(this,null,function*(){let c=h(u({},r),{common:h(u({},r.common),{issues:[]}),parent:null});return{result:yield o._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}}))).then(a);{let o,c=[];for(let d of s){let m=h(u({},r),{common:h(u({},r.common),{issues:[]}),parent:null}),g=d._parseSync({data:r.data,path:r.path,parent:m});if(g.status==="valid")return g;g.status==="dirty"&&!o&&(o={result:g,ctx:m}),m.common.issues.length&&c.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=c.map(d=>new Oe(d));return v(r,{code:C.invalid_union,unionErrors:l}),B}}get options(){return this._def.options}}return e.create=(n,t)=>new e(u({options:n,typeName:L.ZodUnion},j(t))),e})(),vt=e=>e instanceof _n?vt(e.schema):e instanceof Ze?vt(e.innerType()):e instanceof En?[e.value]:e instanceof xt?e.options:e instanceof yn?Object.keys(e.enum):e instanceof An?vt(e._def.innerType):e instanceof fn?[void 0]:e instanceof hn?[null]:null,bt=class e extends V{_parse(n){let{ctx:t}=this._processInputParams(n);if(t.parsedType!==A.object)return v(t,{code:C.invalid_type,expected:A.object,received:t.parsedType}),B;let r=this.discriminator,s=t.data[r],a=this.optionsMap.get(s);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(v(t,{code:C.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),B)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(n,t,r){let s=new Map;for(let a of t){let o=vt(a.shape[n]);if(!o)throw new Error(`A discriminator value for key \`${n}\` could not be extracted from all schema options`);for(let c of o){if(s.has(c))throw new Error(`Discriminator property ${String(n)} has duplicate value ${String(c)}`);s.set(c,a)}}return new e(u({typeName:L.ZodDiscriminatedUnion,discriminator:n,options:t,optionsMap:s},j(r)))}};function ln(e,n){let t=De(e),r=De(n);if(e===n)return{valid:!0,data:e};if(t===A.object&&r===A.object){let s=z.objectKeys(n),a=z.objectKeys(e).filter(c=>s.indexOf(c)!==-1),o=u(u({},e),n);for(let c of a){let l=ln(e[c],n[c]);if(!l.valid)return{valid:!1};o[c]=l.data}return{valid:!0,data:o}}else if(t===A.array&&r===A.array){if(e.length!==n.length)return{valid:!1};let s=[];for(let a=0;a<e.length;a++){let o=e[a],c=n[a],l=ln(o,c);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}else return t===A.date&&r===A.date&&+e==+n?{valid:!0,data:e}:{valid:!1}}var Cn=(()=>{class e extends V{_parse(t){let{status:r,ctx:s}=this._processInputParams(t),a=(o,c)=>{if(on(o)||on(c))return B;let l=ln(o.value,c.value);return l.valid?((cn(o)||cn(c))&&r.dirty(),{status:r.value,value:l.data}):(v(s,{code:C.invalid_intersection_types}),B)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([o,c])=>a(o,c)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}return e.create=(n,t,r)=>new e(u({left:n,right:t,typeName:L.ZodIntersection},j(r))),e})(),et=(()=>{class e extends V{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==A.array)return v(s,{code:C.invalid_type,expected:A.array,received:s.parsedType}),B;if(s.data.length<this._def.items.length)return v(s,{code:C.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),B;!this._def.rest&&s.data.length>this._def.items.length&&(v(s,{code:C.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...s.data].map((c,l)=>{let d=this._def.items[l]||this._def.rest;return d?d._parse(new Re(s,c,s.path,l)):null}).filter(c=>!!c);return s.common.async?Promise.all(o).then(c=>fe.mergeArray(r,c)):fe.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new e(h(u({},this._def),{rest:t}))}}return e.create=(n,t)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new e(u({items:n,typeName:L.ZodTuple,rest:null},j(t)))},e})(),kt=class e extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(n){let{status:t,ctx:r}=this._processInputParams(n);if(r.parsedType!==A.object)return v(r,{code:C.invalid_type,expected:A.object,received:r.parsedType}),B;let s=[],a=this._def.keyType,o=this._def.valueType;for(let c in r.data)s.push({key:a._parse(new Re(r,c,r.path,c)),value:o._parse(new Re(r,r.data[c],r.path,c))});return r.common.async?fe.mergeObjectAsync(t,s):fe.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(n,t,r){return t instanceof V?new e(u({keyType:n,valueType:t,typeName:L.ZodRecord},j(r))):new e(u({keyType:Ut.create(),valueType:n,typeName:L.ZodRecord},j(t)))}},cr=(()=>{class e extends V{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==A.map)return v(s,{code:C.invalid_type,expected:A.map,received:s.parsedType}),B;let a=this._def.keyType,o=this._def.valueType,c=[...s.data.entries()].map(([l,d],m)=>({key:a._parse(new Re(s,l,s.path,[m,"key"])),value:o._parse(new Re(s,d,s.path,[m,"value"]))}));if(s.common.async){let l=new Map;return Promise.resolve().then(()=>f(this,null,function*(){for(let d of c){let m=yield d.key,g=yield d.value;if(m.status==="aborted"||g.status==="aborted")return B;(m.status==="dirty"||g.status==="dirty")&&r.dirty(),l.set(m.value,g.value)}return{status:r.value,value:l}}))}else{let l=new Map;for(let d of c){let m=d.key,g=d.value;if(m.status==="aborted"||g.status==="aborted")return B;(m.status==="dirty"||g.status==="dirty")&&r.dirty(),l.set(m.value,g.value)}return{status:r.value,value:l}}}}return e.create=(n,t,r)=>new e(u({valueType:t,keyType:n,typeName:L.ZodMap},j(r))),e})(),lr=(()=>{class e extends V{_parse(t){let{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==A.set)return v(s,{code:C.invalid_type,expected:A.set,received:s.parsedType}),B;let a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(v(s,{code:C.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(v(s,{code:C.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());let o=this._def.valueType;function c(d){let m=new Set;for(let g of d){if(g.status==="aborted")return B;g.status==="dirty"&&r.dirty(),m.add(g.value)}return{status:r.value,value:m}}let l=[...s.data.values()].map((d,m)=>o._parse(new Re(s,d,s.path,m)));return s.common.async?Promise.all(l).then(d=>c(d)):c(l)}min(t,r){return new e(h(u({},this._def),{minSize:{value:t,message:U.toString(r)}}))}max(t,r){return new e(h(u({},this._def),{maxSize:{value:t,message:U.toString(r)}}))}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}return e.create=(n,t)=>new e(u({valueType:n,minSize:null,maxSize:null,typeName:L.ZodSet},j(t))),e})(),Ot=class e extends V{constructor(){super(...arguments),this.validate=this.implement}_parse(n){let{ctx:t}=this._processInputParams(n);if(t.parsedType!==A.function)return v(t,{code:C.invalid_type,expected:A.function,received:t.parsedType}),B;function r(c,l){return Nt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tt(),ct].filter(d=>!!d),issueData:{code:C.invalid_arguments,argumentsError:l}})}function s(c,l){return Nt({data:c,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Tt(),ct].filter(d=>!!d),issueData:{code:C.invalid_return_type,returnTypeError:l}})}let a={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Lt){let c=this;return Ce(function(...l){return f(this,null,function*(){let d=new Oe([]),m=yield c._def.args.parseAsync(l,a).catch(J=>{throw d.addIssue(r(l,J)),d}),g=yield Reflect.apply(o,this,m);return yield c._def.returns._def.type.parseAsync(g,a).catch(J=>{throw d.addIssue(s(g,J)),d})})})}else{let c=this;return Ce(function(...l){let d=c._def.args.safeParse(l,a);if(!d.success)throw new Oe([r(l,d.error)]);let m=Reflect.apply(o,this,d.data),g=c._def.returns.safeParse(m,a);if(!g.success)throw new Oe([s(m,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...n){return new e(h(u({},this._def),{args:et.create(n).rest(it.create())}))}returns(n){return new e(h(u({},this._def),{returns:n}))}implement(n){return this.parse(n)}strictImplement(n){return this.parse(n)}static create(n,t,r){return new e(u({args:n||et.create([]).rest(it.create()),returns:t||it.create(),typeName:L.ZodFunction},j(r)))}},_n=(()=>{class e extends V{get schema(){return this._def.getter()}_parse(t){let{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}return e.create=(n,t)=>new e(u({getter:n,typeName:L.ZodLazy},j(t))),e})(),En=(()=>{class e extends V{_parse(t){if(t.data!==this._def.value){let r=this._getOrReturnCtx(t);return v(r,{received:r.data,code:C.invalid_literal,expected:this._def.value}),B}return{status:"valid",value:t.data}}get value(){return this._def.value}}return e.create=(n,t)=>new e(u({value:n,typeName:L.ZodLiteral},j(t))),e})();function dr(e,n){return new xt(u({values:e,typeName:L.ZodEnum},j(n)))}var xt=(()=>{class e extends V{_parse(t){if(typeof t.data!="string"){let r=this._getOrReturnCtx(t),s=this._def.values;return v(r,{expected:z.joinValues(s),received:r.parsedType,code:C.invalid_type}),B}if(this._def.values.indexOf(t.data)===-1){let r=this._getOrReturnCtx(t),s=this._def.values;return v(r,{received:r.data,code:C.invalid_enum_value,options:s}),B}return Ce(t.data)}get options(){return this._def.values}get enum(){let t={};for(let r of this._def.values)t[r]=r;return t}get Values(){let t={};for(let r of this._def.values)t[r]=r;return t}get Enum(){let t={};for(let r of this._def.values)t[r]=r;return t}extract(t){return e.create(t)}exclude(t){return e.create(this.options.filter(r=>!t.includes(r)))}}return e.create=dr,e})(),yn=(()=>{class e extends V{_parse(t){let r=z.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==A.string&&s.parsedType!==A.number){let a=z.objectValues(r);return v(s,{expected:z.joinValues(a),received:s.parsedType,code:C.invalid_type}),B}if(r.indexOf(t.data)===-1){let a=z.objectValues(r);return v(s,{received:s.data,code:C.invalid_enum_value,options:a}),B}return Ce(t.data)}get enum(){return this._def.values}}return e.create=(n,t)=>new e(u({values:n,typeName:L.ZodNativeEnum},j(t))),e})(),Lt=(()=>{class e extends V{unwrap(){return this._def.type}_parse(t){let{ctx:r}=this._processInputParams(t);if(r.parsedType!==A.promise&&r.common.async===!1)return v(r,{code:C.invalid_type,expected:A.promise,received:r.parsedType}),B;let s=r.parsedType===A.promise?r.data:Promise.resolve(r.data);return Ce(s.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}return e.create=(n,t)=>new e(u({type:n,typeName:L.ZodPromise},j(t))),e})(),Ze=(()=>{class e extends V{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===L.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){let{status:r,ctx:s}=this._processInputParams(t),a=this._def.effect||null,o={addIssue:c=>{v(s,c),c.fatal?r.abort():r.dirty()},get path(){return s.path}};if(o.addIssue=o.addIssue.bind(o),a.type==="preprocess"){let c=a.transform(s.data,o);return s.common.issues.length?{status:"dirty",value:s.data}:s.common.async?Promise.resolve(c).then(l=>this._def.schema._parseAsync({data:l,path:s.path,parent:s})):this._def.schema._parseSync({data:c,path:s.path,parent:s})}if(a.type==="refinement"){let c=l=>{let d=a.refinement(l,o);if(s.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){let l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?B:(l.status==="dirty"&&r.dirty(),c(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?B:(l.status==="dirty"&&r.dirty(),c(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(s.common.async===!1){let c=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!lt(c))return c;let l=a.transform(c.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(c=>lt(c)?Promise.resolve(a.transform(c.value,o)).then(l=>({status:r.value,value:l})):c);z.assertNever(a)}}return e.create=(n,t,r)=>new e(u({schema:n,typeName:L.ZodEffects,effect:t},j(r))),e.createWithPreprocess=(n,t,r)=>new e(u({schema:t,effect:{type:"preprocess",transform:n},typeName:L.ZodEffects},j(r))),e})(),Ke=(()=>{class e extends V{_parse(t){return this._getType(t)===A.undefined?Ce(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}return e.create=(n,t)=>new e(u({innerType:n,typeName:L.ZodOptional},j(t))),e})(),ut=(()=>{class e extends V{_parse(t){return this._getType(t)===A.null?Ce(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}return e.create=(n,t)=>new e(u({innerType:n,typeName:L.ZodNullable},j(t))),e})(),An=(()=>{class e extends V{_parse(t){let{ctx:r}=this._processInputParams(t),s=r.data;return r.parsedType===A.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}return e.create=(n,t)=>new e(u({innerType:n,typeName:L.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default},j(t))),e})(),ur=(()=>{class e extends V{_parse(t){let{ctx:r}=this._processInputParams(t),s=h(u({},r),{common:h(u({},r.common),{issues:[]})}),a=this._def.innerType._parse({data:s.data,path:s.path,parent:u({},s)});return Rt(a)?a.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Oe(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Oe(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}return e.create=(n,t)=>new e(u({innerType:n,typeName:L.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch},j(t))),e})(),pr=(()=>{class e extends V{_parse(t){if(this._getType(t)!==A.nan){let s=this._getOrReturnCtx(t);return v(s,{code:C.invalid_type,expected:A.nan,received:s.parsedType}),B}return{status:"valid",value:t.data}}}return e.create=n=>new e(u({typeName:L.ZodNaN},j(n))),e})(),ms=Symbol("zod_brand"),Pt=class extends V{_parse(n){let{ctx:t}=this._processInputParams(n),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},pt=class e extends V{_parse(n){let{status:t,ctx:r}=this._processInputParams(n);if(r.common.async)return f(this,null,function*(){let a=yield this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?B:a.status==="dirty"?(t.dirty(),ar(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})});{let s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?B:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(n,t){return new e({in:n,out:t,typeName:L.ZodPipeline})}},mr=(()=>{class e extends V{_parse(t){let r=this._def.innerType._parse(t);return lt(r)&&(r.value=Object.freeze(r.value)),r}}return e.create=(n,t)=>new e(u({innerType:n,typeName:L.ZodReadonly},j(t))),e})(),fr=(e,n={},t)=>e?It.create().superRefine((r,s)=>{var a,o;if(!e(r)){let c=typeof n=="function"?n(r):typeof n=="string"?{message:n}:n,l=(o=(a=c.fatal)!==null&&a!==void 0?a:t)!==null&&o!==void 0?o:!0,d=typeof c=="string"?{message:c}:c;s.addIssue(h(u({code:"custom"},d),{fatal:l}))}}):It.create(),fs={object:Qe.lazycreate},L=function(e){return e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly",e}(L||{}),hs=(e,n={message:`Input not instance of ${e.name}`})=>fr(t=>t instanceof e,n),hr=Ut.create,gr=dn.create,gs=pr.create,Cs=un.create,Cr=pn.create,_s=mn.create,Es=or.create,ys=fn.create,As=hn.create,ws=It.create,Ss=it.create,vs=Ge.create,Ts=ir.create,Ns=dt.create,Rs=Qe.create,Is=Qe.strictCreate,bs=gn.create,ks=bt.create,Os=Cn.create,Ps=et.create,Us=kt.create,xs=cr.create,Ls=lr.create,Ms=Ot.create,Ds=_n.create,Fs=En.create,Bs=xt.create,Ws=yn.create,js=Lt.create,nr=Ze.create,Vs=Ke.create,Hs=ut.create,Gs=Ze.createWithPreprocess,Ks=pt.create,Zs=()=>hr().optional(),$s=()=>gr().optional(),Ys=()=>Cr().optional(),zs={string:e=>Ut.create(h(u({},e),{coerce:!0})),number:e=>dn.create(h(u({},e),{coerce:!0})),boolean:e=>pn.create(h(u({},e),{coerce:!0})),bigint:e=>un.create(h(u({},e),{coerce:!0})),date:e=>mn.create(h(u({},e),{coerce:!0}))},qs=B,i=Object.freeze({__proto__:null,defaultErrorMap:ct,setErrorMap:es,getErrorMap:Tt,makeIssue:Nt,EMPTY_PATH:ts,addIssueToContext:v,ParseStatus:fe,INVALID:B,DIRTY:ar,OK:Ce,isAborted:on,isDirty:cn,isValid:lt,isAsync:Rt,get util(){return z},get objectUtil(){return rr},ZodParsedType:A,getParsedType:De,ZodType:V,ZodString:Ut,ZodNumber:dn,ZodBigInt:un,ZodBoolean:pn,ZodDate:mn,ZodSymbol:or,ZodUndefined:fn,ZodNull:hn,ZodAny:It,ZodUnknown:it,ZodNever:Ge,ZodVoid:ir,ZodArray:dt,ZodObject:Qe,ZodUnion:gn,ZodDiscriminatedUnion:bt,ZodIntersection:Cn,ZodTuple:et,ZodRecord:kt,ZodMap:cr,ZodSet:lr,ZodFunction:Ot,ZodLazy:_n,ZodLiteral:En,ZodEnum:xt,ZodNativeEnum:yn,ZodPromise:Lt,ZodEffects:Ze,ZodTransformer:Ze,ZodOptional:Ke,ZodNullable:ut,ZodDefault:An,ZodCatch:ur,ZodNaN:pr,BRAND:ms,ZodBranded:Pt,ZodPipeline:pt,ZodReadonly:mr,custom:fr,Schema:V,ZodSchema:V,late:fs,get ZodFirstPartyTypeKind(){return L},coerce:zs,any:ws,array:Ns,bigint:Cs,boolean:Cr,date:_s,discriminatedUnion:ks,effect:nr,enum:Bs,function:Ms,instanceof:hs,intersection:Os,lazy:Ds,literal:Fs,map:xs,nan:gs,nativeEnum:Ws,never:vs,null:As,nullable:Hs,number:gr,object:Rs,oboolean:Ys,onumber:$s,optional:Vs,ostring:Zs,pipeline:Ks,preprocess:Gs,promise:js,record:Us,set:Ls,strictObject:Is,string:hr,symbol:Es,transformer:nr,tuple:Ps,undefined:ys,union:bs,unknown:Ss,void:Ts,NEVER:qs,ZodIssueCode:C,quotelessJson:Qr,ZodError:Oe});var le=i.object({message:i.string()});function w(e){return i.literal(y[e])}var Mt=i.object({serializedMessage:i.string().optional(),accountAddress:i.string(),chainId:i.string(),notBefore:i.string().optional(),domain:i.string(),uri:i.string(),version:i.string(),nonce:i.string(),statement:i.string().optional(),resources:i.array(i.string()).optional(),requestId:i.string().optional(),issuedAt:i.string().optional(),expirationTime:i.string().optional()}),oc=i.object({accessList:i.array(i.string()),blockHash:i.string().nullable(),blockNumber:i.string().nullable(),chainId:i.string().or(i.number()),from:i.string(),gas:i.string(),hash:i.string(),input:i.string().nullable(),maxFeePerGas:i.string(),maxPriorityFeePerGas:i.string(),nonce:i.string(),r:i.string(),s:i.string(),to:i.string(),transactionIndex:i.string().nullable(),type:i.string(),v:i.string(),value:i.string()}),Js=i.object({chainId:i.string().or(i.number()),rpcUrl:i.optional(i.string())}),Xs=i.object({email:i.string().email()}),Qs=i.object({otp:i.string()}),ea=i.object({uri:i.string(),preferredAccountType:i.optional(i.string()),chainId:i.optional(i.string().or(i.number())),siwxMessage:i.optional(Mt),rpcUrl:i.optional(i.string())}),ta=i.object({chainId:i.optional(i.string().or(i.number())),preferredAccountType:i.optional(i.string()),socialUri:i.optional(i.string()),siwxMessage:i.optional(Mt),rpcUrl:i.optional(i.string())}),na=i.object({provider:i.enum(["google","github","apple","facebook","x","discord"])}),ra=i.object({email:i.string().email()}),sa=i.object({otp:i.string()}),aa=i.object({otp:i.string()}),oa=i.object({themeMode:i.optional(i.enum(["light","dark"])),themeVariables:i.optional(i.record(i.string(),i.string().or(i.number()))),w3mThemeVariables:i.optional(i.record(i.string(),i.string()))}),ia=i.object({metadata:i.object({name:i.string(),description:i.string(),url:i.string(),icons:i.array(i.string())}).optional(),sdkVersion:i.string().optional(),sdkType:i.string().optional(),projectId:i.string()}),ca=i.object({type:i.string()}),la=i.object({action:i.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),da=i.object({url:i.string()}),ua=i.object({userName:i.string()}),pa=i.object({email:i.string().optional().nullable(),address:i.string(),chainId:i.string().or(i.number()),accounts:i.array(i.object({address:i.string(),type:i.enum([re.ACCOUNT_TYPES.EOA,re.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:i.string().optional().nullable(),preferredAccountType:i.optional(i.string()),signature:i.string().optional(),message:i.string().optional(),siwxMessage:i.optional(Mt)}),ma=i.object({action:i.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),fa=i.object({email:i.string().email().optional().nullable(),address:i.string(),chainId:i.string().or(i.number()),smartAccountDeployed:i.optional(i.boolean()),accounts:i.array(i.object({address:i.string(),type:i.enum([re.ACCOUNT_TYPES.EOA,re.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:i.optional(i.string()),signature:i.string().optional(),message:i.string().optional(),siwxMessage:i.optional(Mt)}),ha=i.object({uri:i.string()}),ga=i.object({isConnected:i.boolean()}),Ca=i.object({chainId:i.string().or(i.number())}),_a=i.object({chainId:i.string().or(i.number())}),Ea=i.object({newEmail:i.string().email()}),ya=i.object({smartAccountEnabledNetworks:i.array(i.number())}),ic=i.object({address:i.string(),isDeployed:i.boolean()}),Aa=i.object({version:i.string().optional()}),wa=i.object({type:i.string(),address:i.string()}),Sa=i.any(),va=i.object({method:i.literal("eth_accounts")}),Ta=i.object({method:i.literal("eth_blockNumber")}),Na=i.object({method:i.literal("eth_call"),params:i.array(i.any())}),Ra=i.object({method:i.literal("eth_chainId")}),Ia=i.object({method:i.literal("eth_estimateGas"),params:i.array(i.any())}),ba=i.object({method:i.literal("eth_feeHistory"),params:i.array(i.any())}),ka=i.object({method:i.literal("eth_gasPrice")}),Oa=i.object({method:i.literal("eth_getAccount"),params:i.array(i.any())}),Pa=i.object({method:i.literal("eth_getBalance"),params:i.array(i.any())}),Ua=i.object({method:i.literal("eth_getBlockByHash"),params:i.array(i.any())}),xa=i.object({method:i.literal("eth_getBlockByNumber"),params:i.array(i.any())}),La=i.object({method:i.literal("eth_getBlockReceipts"),params:i.array(i.any())}),Ma=i.object({method:i.literal("eth_getBlockTransactionCountByHash"),params:i.array(i.any())}),Da=i.object({method:i.literal("eth_getBlockTransactionCountByNumber"),params:i.array(i.any())}),Fa=i.object({method:i.literal("eth_getCode"),params:i.array(i.any())}),Ba=i.object({method:i.literal("eth_getFilterChanges"),params:i.array(i.any())}),Wa=i.object({method:i.literal("eth_getFilterLogs"),params:i.array(i.any())}),ja=i.object({method:i.literal("eth_getLogs"),params:i.array(i.any())}),Va=i.object({method:i.literal("eth_getProof"),params:i.array(i.any())}),Ha=i.object({method:i.literal("eth_getStorageAt"),params:i.array(i.any())}),Ga=i.object({method:i.literal("eth_getTransactionByBlockHashAndIndex"),params:i.array(i.any())}),Ka=i.object({method:i.literal("eth_getTransactionByBlockNumberAndIndex"),params:i.array(i.any())}),Za=i.object({method:i.literal("eth_getTransactionByHash"),params:i.array(i.any())}),$a=i.object({method:i.literal("eth_getTransactionCount"),params:i.array(i.any())}),Ya=i.object({method:i.literal("eth_getTransactionReceipt"),params:i.array(i.any())}),za=i.object({method:i.literal("eth_getUncleCountByBlockHash"),params:i.array(i.any())}),qa=i.object({method:i.literal("eth_getUncleCountByBlockNumber"),params:i.array(i.any())}),Ja=i.object({method:i.literal("eth_maxPriorityFeePerGas")}),Xa=i.object({method:i.literal("eth_newBlockFilter")}),Qa=i.object({method:i.literal("eth_newFilter"),params:i.array(i.any())}),eo=i.object({method:i.literal("eth_newPendingTransactionFilter")}),to=i.object({method:i.literal("eth_sendRawTransaction"),params:i.array(i.any())}),no=i.object({method:i.literal("eth_syncing"),params:i.array(i.any())}),ro=i.object({method:i.literal("eth_uninstallFilter"),params:i.array(i.any())}),_r=i.object({method:i.literal("personal_sign"),params:i.array(i.any())}),so=i.object({method:i.literal("eth_signTypedData_v4"),params:i.array(i.any())}),ao=i.object({method:i.literal("eth_sendTransaction"),params:i.array(i.any())}),oo=i.object({method:i.literal("solana_signMessage"),params:i.object({message:i.string(),pubkey:i.string()})}),io=i.object({method:i.literal("solana_signTransaction"),params:i.object({transaction:i.string()})}),co=i.object({method:i.literal("solana_signAllTransactions"),params:i.object({transactions:i.array(i.string())})}),lo=i.object({method:i.literal("solana_signAndSendTransaction"),params:i.object({transaction:i.string(),options:i.object({skipPreflight:i.boolean().optional(),preflightCommitment:i.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:i.number().optional(),minContextSlot:i.number().optional()}).optional()})}),uo=i.object({method:i.literal("wallet_sendCalls"),params:i.array(i.object({chainId:i.string().or(i.number()).optional(),from:i.string().optional(),version:i.string().optional(),capabilities:i.any().optional(),calls:i.array(i.object({to:i.string().startsWith("0x"),data:i.string().startsWith("0x").optional(),value:i.string().optional()}))}))}),po=i.object({method:i.literal("wallet_getCallsStatus"),params:i.array(i.string())}),mo=i.object({method:i.literal("wallet_getCapabilities"),params:i.array(i.string().or(i.number()).optional()).optional()}),fo=i.object({method:i.literal("wallet_grantPermissions"),params:i.array(i.any())}),ho=i.object({method:i.literal("wallet_revokePermissions"),params:i.any()}),go=i.object({method:i.literal("wallet_getAssets"),params:i.any()}),Er=i.object({token:i.string()}),S=i.object({id:i.string().optional()}),Dt={appEvent:S.extend({type:w("APP_SWITCH_NETWORK"),payload:Js}).or(S.extend({type:w("APP_CONNECT_EMAIL"),payload:Xs})).or(S.extend({type:w("APP_CONNECT_DEVICE")})).or(S.extend({type:w("APP_CONNECT_OTP"),payload:Qs})).or(S.extend({type:w("APP_CONNECT_SOCIAL"),payload:ea})).or(S.extend({type:w("APP_GET_FARCASTER_URI")})).or(S.extend({type:w("APP_CONNECT_FARCASTER")})).or(S.extend({type:w("APP_GET_USER"),payload:i.optional(ta)})).or(S.extend({type:w("APP_GET_SOCIAL_REDIRECT_URI"),payload:na})).or(S.extend({type:w("APP_SIGN_OUT")})).or(S.extend({type:w("APP_IS_CONNECTED"),payload:i.optional(Er)})).or(S.extend({type:w("APP_GET_CHAIN_ID")})).or(S.extend({type:w("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(S.extend({type:w("APP_INIT_SMART_ACCOUNT")})).or(S.extend({type:w("APP_SET_PREFERRED_ACCOUNT"),payload:ca})).or(S.extend({type:w("APP_RPC_REQUEST"),payload:_r.or(go).or(va).or(Ta).or(Na).or(Ra).or(Ia).or(ba).or(ka).or(Oa).or(Pa).or(Ua).or(xa).or(La).or(Ma).or(Da).or(Fa).or(Ba).or(Wa).or(ja).or(Va).or(Ha).or(Ga).or(Ka).or(Za).or($a).or(Ya).or(za).or(qa).or(Ja).or(Xa).or(Qa).or(eo).or(to).or(no).or(ro).or(_r).or(so).or(ao).or(oo).or(io).or(co).or(lo).or(po).or(uo).or(mo).or(fo).or(ho).and(i.object({chainId:i.string().or(i.number()).optional(),chainNamespace:i.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:i.string().optional()}))})).or(S.extend({type:w("APP_UPDATE_EMAIL"),payload:ra})).or(S.extend({type:w("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:sa})).or(S.extend({type:w("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:aa})).or(S.extend({type:w("APP_SYNC_THEME"),payload:oa})).or(S.extend({type:w("APP_SYNC_DAPP_DATA"),payload:ia})).or(S.extend({type:w("APP_RELOAD")})).or(S.extend({type:w("APP_RPC_ABORT")})),frameEvent:S.extend({type:w("FRAME_SWITCH_NETWORK_ERROR"),payload:le}).or(S.extend({type:w("FRAME_SWITCH_NETWORK_SUCCESS"),payload:_a})).or(S.extend({type:w("FRAME_CONNECT_EMAIL_SUCCESS"),payload:la})).or(S.extend({type:w("FRAME_CONNECT_EMAIL_ERROR"),payload:le})).or(S.extend({type:w("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:da})).or(S.extend({type:w("FRAME_GET_FARCASTER_URI_ERROR"),payload:le})).or(S.extend({type:w("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:ua})).or(S.extend({type:w("FRAME_CONNECT_FARCASTER_ERROR"),payload:le})).or(S.extend({type:w("FRAME_CONNECT_OTP_ERROR"),payload:le})).or(S.extend({type:w("FRAME_CONNECT_OTP_SUCCESS")})).or(S.extend({type:w("FRAME_CONNECT_DEVICE_ERROR"),payload:le})).or(S.extend({type:w("FRAME_CONNECT_DEVICE_SUCCESS")})).or(S.extend({type:w("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:pa})).or(S.extend({type:w("FRAME_CONNECT_SOCIAL_ERROR"),payload:le})).or(S.extend({type:w("FRAME_GET_USER_ERROR"),payload:le})).or(S.extend({type:w("FRAME_GET_USER_SUCCESS"),payload:fa})).or(S.extend({type:w("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:le})).or(S.extend({type:w("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:ha})).or(S.extend({type:w("FRAME_SIGN_OUT_ERROR"),payload:le})).or(S.extend({type:w("FRAME_SIGN_OUT_SUCCESS")})).or(S.extend({type:w("FRAME_IS_CONNECTED_ERROR"),payload:le})).or(S.extend({type:w("FRAME_IS_CONNECTED_SUCCESS"),payload:ga})).or(S.extend({type:w("FRAME_GET_CHAIN_ID_ERROR"),payload:le})).or(S.extend({type:w("FRAME_GET_CHAIN_ID_SUCCESS"),payload:Ca})).or(S.extend({type:w("FRAME_RPC_REQUEST_ERROR"),payload:le})).or(S.extend({type:w("FRAME_RPC_REQUEST_SUCCESS"),payload:Sa})).or(S.extend({type:w("FRAME_SESSION_UPDATE"),payload:Er})).or(S.extend({type:w("FRAME_UPDATE_EMAIL_ERROR"),payload:le})).or(S.extend({type:w("FRAME_UPDATE_EMAIL_SUCCESS"),payload:ma})).or(S.extend({type:w("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:le})).or(S.extend({type:w("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(S.extend({type:w("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:le})).or(S.extend({type:w("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:Ea})).or(S.extend({type:w("FRAME_SYNC_THEME_ERROR"),payload:le})).or(S.extend({type:w("FRAME_SYNC_THEME_SUCCESS")})).or(S.extend({type:w("FRAME_SYNC_DAPP_DATA_ERROR"),payload:le})).or(S.extend({type:w("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(S.extend({type:w("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:ya})).or(S.extend({type:w("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:le})).or(S.extend({type:w("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:le})).or(S.extend({type:w("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:wa})).or(S.extend({type:w("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:le})).or(S.extend({type:w("FRAME_READY"),payload:Aa})).or(S.extend({type:w("FRAME_RELOAD_ERROR"),payload:le})).or(S.extend({type:w("FRAME_RELOAD_SUCCESS")}))};function wn(e,n={}){return typeof n?.type=="string"&&n?.type?.includes(e)}function Co({projectId:e,chainId:n,enableLogger:t,rpcUrl:r=k.BLOCKCHAIN_API_RPC_URL,enableCloudAuthAccount:s=!1}){let a=new URL(Xn);a.searchParams.set("projectId",e),a.searchParams.set("chainId",String(n)),a.searchParams.set("version",er),a.searchParams.set("enableLogger",String(t)),a.searchParams.set("rpcUrl",r);let o=oe.get("dapp_smart_account_version");return o&&(o==="v6"||o==="v7")&&(console.warn(">> AppKit - Forcing smart account version",o),a.searchParams.set("smartAccountVersion",o)),s&&a.searchParams.set("enableCloudAuthAccount","true"),a.toString()}var Ft=class{constructor({projectId:n,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:s=!0,enableCloudAuthAccount:a=!1,rpcUrl:o=k.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{let c=document.getElementById("w3m-iframe");this.iframe&&!c&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(c,l,d)=>{function m({data:g}){if(!wn(y.FRAME_EVENT_KEY,g))return;let W=Dt.frameEvent.safeParse(g);if(!W.success){console.warn("W3mFrame: invalid frame event",W.error.message);return}W.data?.id===c&&(l(W.data),window.removeEventListener("message",m))}ye.isClient&&(window.addEventListener("message",m),d.addEventListener("abort",()=>{window.removeEventListener("message",m)}))},onFrameEvent:c=>{ye.isClient&&window.addEventListener("message",({data:l})=>{if(!wn(y.FRAME_EVENT_KEY,l))return;let d=Dt.frameEvent.safeParse(l);d.success?c(d.data):console.warn("W3mFrame: invalid frame event",d.error.message)})},onAppEvent:c=>{ye.isClient&&window.addEventListener("message",({data:l})=>{if(!wn(y.APP_EVENT_KEY,l))return;let d=Dt.appEvent.safeParse(l);d.success||console.warn("W3mFrame: invalid app event",d.error.message),c(l)})},postAppEvent:c=>{if(ye.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");this.iframe.contentWindow.postMessage(c,"*")}},postFrameEvent:c=>{if(ye.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");parent.postMessage(c,"*")}}},this.projectId=n,this.frameLoadPromise=new Promise((c,l)=>{this.frameLoadPromiseResolver={resolve:c,reject:l}}),this.rpcUrl=o,t&&(this.frameLoadPromise=new Promise((c,l)=>{this.frameLoadPromiseResolver={resolve:c,reject:l}}),ye.isClient)){let c=document.createElement("iframe");c.id="w3m-iframe",c.src=Co({projectId:n,chainId:r,enableLogger:s,rpcUrl:this.rpcUrl,enableCloudAuthAccount:a}),c.name="w3m-secure-iframe",c.style.position="fixed",c.style.zIndex="999999",c.style.display="none",c.style.border="none",c.style.animationDelay="0s, 50ms",c.style.borderBottomLeftRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",c.style.borderBottomRightRadius="clamp(0px, var(--apkt-borderRadius-8), 44px)",this.iframe=c,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent(l=>{l.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,this.frameLoadPromiseResolver?.resolve(void 0))})}}get networks(){let n=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(t=>({[t]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${t}&projectId=${this.projectId}`,chainId:t}}));return Object.assign({},...n)}};var Ue=Zn(In()),Uo=Zn(In());var xo={level:"info"},Zt="custom_context",Pn=1e3*1024,Lo=Object.defineProperty,Mo=(e,n,t)=>n in e?Lo(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Be=(e,n,t)=>Mo(e,typeof n!="symbol"?n+"":n,t),bn=class{constructor(n){Be(this,"nodeValue"),Be(this,"sizeInBytes"),Be(this,"next"),this.nodeValue=n,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},Vt=class{constructor(n){Be(this,"lengthInNodes"),Be(this,"sizeInBytes"),Be(this,"head"),Be(this,"tail"),Be(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=n,this.sizeInBytes=0}append(n){let t=new bn(n);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${n} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;let n=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=n.size}toArray(){let n=[],t=this.head;for(;t!==null;)n.push(t.value),t=t.next;return n}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let n=this.head;return{next:()=>{if(!n)return{done:!0,value:null};let t=n.value;return n=n.next,{done:!1,value:t}}}}},Do=Object.defineProperty,Fo=(e,n,t)=>n in e?Do(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,jt=(e,n,t)=>Fo(e,typeof n!="symbol"?n+"":n,t),Ht=class{constructor(n,t=Pn){jt(this,"logs"),jt(this,"level"),jt(this,"levelValue"),jt(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=n??"error",this.levelValue=Ue.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new Vt(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(n,t){t===Ue.levels.values.error?console.error(n):t===Ue.levels.values.warn?console.warn(n):t===Ue.levels.values.debug?console.debug(n):t===Ue.levels.values.trace?console.trace(n):console.log(n)}appendToLogs(n){this.logs.append(nn({timestamp:new Date().toISOString(),log:n}));let t=typeof n=="string"?JSON.parse(n).level:n.level;t>=this.levelValue&&this.forwardToConsole(n,t)}getLogs(){return this.logs}clearLogs(){this.logs=new Vt(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(n){let t=this.getLogArray();return t.push(nn({extraMetadata:n})),new Blob(t,{type:"application/json"})}},Bo=Object.defineProperty,Wo=(e,n,t)=>n in e?Bo(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,jo=(e,n,t)=>Wo(e,typeof n!="symbol"?n+"":n,t),kn=class{constructor(n,t=Pn){jo(this,"baseChunkLogger"),this.baseChunkLogger=new Ht(n,t)}write(n){this.baseChunkLogger.appendToLogs(n)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(n){return this.baseChunkLogger.logsToBlob(n)}downloadLogsBlobInBrowser(n){let t=URL.createObjectURL(this.logsToBlob(n)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}},Vo=Object.defineProperty,Ho=(e,n,t)=>n in e?Vo(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Go=(e,n,t)=>Ho(e,typeof n!="symbol"?n+"":n,t),On=class{constructor(n,t=Pn){Go(this,"baseChunkLogger"),this.baseChunkLogger=new Ht(n,t)}write(n){this.baseChunkLogger.appendToLogs(n)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(n){return this.baseChunkLogger.logsToBlob(n)}},Ko=Object.defineProperty,Zo=Object.defineProperties,$o=Object.getOwnPropertyDescriptors,Tr=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,zo=Object.prototype.propertyIsEnumerable,Nr=(e,n,t)=>n in e?Ko(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Gt=(e,n)=>{for(var t in n||(n={}))Yo.call(n,t)&&Nr(e,t,n[t]);if(Tr)for(var t of Tr(n))zo.call(n,t)&&Nr(e,t,n[t]);return e},Kt=(e,n)=>Zo(e,$o(n));function Rr(e){return Kt(Gt({},e),{level:e?.level||xo.level})}function qo(e,n,t=Zt){return e[t]=n,e}function Jo(e,n=Zt){return e[n]||""}function Xo(e,n,t=Zt){let r=Jo(e,t);return r.trim()?`${r}/${n}`:n}function Ir(e,n,t=Zt){let r=Xo(e,n,t),s=e.child({context:r});return qo(s,r,t)}function Qo(e){var n,t;let r=new kn((n=e.opts)==null?void 0:n.level,e.maxSizeInBytes);return{logger:(0,Ue.default)(Kt(Gt({},e.opts),{level:"trace",browser:Kt(Gt({},(t=e.opts)==null?void 0:t.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function ei(e){var n;let t=new On((n=e.opts)==null?void 0:n.level,e.maxSizeInBytes);return{logger:(0,Ue.default)(Kt(Gt({},e.opts),{level:"trace"}),t),chunkLoggerController:t}}function br(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Qo(e):ei(e)}var $t=class{constructor(n){let t=Rr({level:Qn}),{logger:r,chunkLoggerController:s}=br({opts:t});this.logger=Ir(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:n})})}};var Un=class{constructor({projectId:n,chainId:t,enableLogger:r=!0,onTimeout:s,abortController:a,getActiveCaipNetwork:o,getCaipNetworks:c,enableCloudAuthAccount:l,metadata:d,sdkVersion:m,sdkType:g}){this.openRpcRequests=new Map,this.isInitialized=!1,r&&(this.w3mLogger=new $t(n)),this.abortController=a,this.getActiveCaipNetwork=o,this.getCaipNetworks=c;let W=this.getRpcUrl(t);this.projectId=n,this.sdkVersion=m,this.sdkType=g,this.metadata=d,this.w3mFrame=new Ft({projectId:n,isAppClient:!0,chainId:t,enableLogger:r,rpcUrl:W,enableCloudAuthAccount:l}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}createFrame(){return f(this,null,function*(){this.w3mFrame.initFrame(),this.initPromise=new Promise(n=>{this.w3mFrame.events.onFrameEvent(t=>{t.type===y.FRAME_READY&&setTimeout(()=>{n()},500)})}),yield this.initPromise,yield this.syncDappData({metadata:this.metadata,projectId:this.projectId,sdkVersion:this.sdkVersion,sdkType:this.sdkType}),yield this.getSmartAccountEnabledNetworks(),this.isInitialized=!0,this.initPromise=void 0})}init(){return f(this,null,function*(){if(!this.isInitialized){if(this.initPromise){yield this.initPromise;return}yield this.createFrame()}})}getLoginEmailUsed(){return!!oe.get(y.EMAIL_LOGIN_USED_KEY)}getEmail(){return oe.get(y.EMAIL)}getUsername(){return oe.get(y.SOCIAL_USERNAME)}reload(){return f(this,null,function*(){try{yield this.appEvent({type:y.APP_RELOAD})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error reloading iframe"),n}})}connectEmail(n){return f(this,null,function*(){try{ye.checkIfAllowedToTriggerEmail(),yield this.init();let t=yield this.appEvent({type:y.APP_CONNECT_EMAIL,payload:n});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting email"),t}})}connectDevice(){return f(this,null,function*(){try{return this.appEvent({type:y.APP_CONNECT_DEVICE})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting device"),n}})}connectOtp(n){return f(this,null,function*(){try{return this.appEvent({type:y.APP_CONNECT_OTP,payload:n})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting otp"),t}})}isConnected(){return f(this,null,function*(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};let n=yield this.appEvent({type:y.APP_IS_CONNECTED});return n?.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:n},"Error checking connection"),n}})}getChainId(){return f(this,null,function*(){try{let n=yield this.appEvent({type:y.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error getting chain id"),n}})}getSocialRedirectUri(n){return f(this,null,function*(){try{return yield this.init(),this.appEvent({type:y.APP_GET_SOCIAL_REDIRECT_URI,payload:n})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error getting social redirect uri"),t}})}updateEmail(n){return f(this,null,function*(){try{let t=yield this.appEvent({type:y.APP_UPDATE_EMAIL,payload:n});return this.setNewLastEmailLoginTime(),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email"),t}})}updateEmailPrimaryOtp(n){return f(this,null,function*(){try{return this.appEvent({type:y.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:n})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email primary otp"),t}})}updateEmailSecondaryOtp(n){return f(this,null,function*(){try{let t=yield this.appEvent({type:y.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:n});return this.setLoginSuccess(t.newEmail),t}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error updating email secondary otp"),t}})}syncTheme(n){return f(this,null,function*(){try{return this.appEvent({type:y.APP_SYNC_THEME,payload:n})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing theme"),t}})}syncDappData(n){return f(this,null,function*(){try{return this.appEvent({type:y.APP_SYNC_DAPP_DATA,payload:n})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error syncing dapp data"),t}})}getSmartAccountEnabledNetworks(){return f(this,null,function*(){try{let n=yield this.appEvent({type:y.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:n},"Error getting smart account enabled networks"),n}})}setPreferredAccount(n){return f(this,null,function*(){try{return this.appEvent({type:y.APP_SET_PREFERRED_ACCOUNT,payload:{type:n}})}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error setting preferred account"),t}})}connect(n){return f(this,null,function*(){if(n?.socialUri)try{yield this.init();let t=this.getRpcUrl(n.chainId),r=yield this.appEvent({type:y.APP_CONNECT_SOCIAL,payload:{uri:n.socialUri,preferredAccountType:n.preferredAccountType,chainId:n.chainId,siwxMessage:n.siwxMessage,rpcUrl:t}});return r.userName&&this.setSocialLoginSuccess(r.userName),this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting social"),t}else try{let t=n?.chainId||this.getLastUsedChainId()||1,r=yield this.getUser({chainId:t,preferredAccountType:n?.preferredAccountType,siwxMessage:n?.siwxMessage,rpcUrl:this.getRpcUrl(t)});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}})}getUser(n){return f(this,null,function*(){try{yield this.init();let t=n?.chainId||this.getLastUsedChainId()||1,r=yield this.appEvent({type:y.APP_GET_USER,payload:h(u({},n),{chainId:t,rpcUrl:this.getRpcUrl(t)})});return this.user=r,r}catch(t){throw this.w3mLogger?.logger.error({error:t},"Error connecting"),t}})}connectSocial(s){return f(this,arguments,function*({uri:n,chainId:t,preferredAccountType:r}){try{yield this.init();let a=this.getRpcUrl(t),o=yield this.appEvent({type:y.APP_CONNECT_SOCIAL,payload:{uri:n,chainId:t,rpcUrl:a,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(a){throw this.w3mLogger?.logger.error({error:a},"Error connecting social"),a}})}getFarcasterUri(){return f(this,null,function*(){try{return yield this.init(),yield this.appEvent({type:y.APP_GET_FARCASTER_URI})}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error getting farcaster uri"),n}})}connectFarcaster(){return f(this,null,function*(){try{let n=yield this.appEvent({type:y.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error connecting farcaster"),n}})}switchNetwork(t){return f(this,arguments,function*({chainId:n}){try{let r=this.getRpcUrl(n),s=yield this.appEvent({type:y.APP_SWITCH_NETWORK,payload:{chainId:n,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw this.w3mLogger?.logger.error({error:r},"Error switching network"),r}})}disconnect(){return f(this,null,function*(){try{return this.deleteAuthLoginCache(),yield new Promise(t=>f(this,null,function*(){let r=setTimeout(()=>{t()},3e3);yield this.appEvent({type:y.APP_SIGN_OUT}),clearTimeout(r),t()}))}catch(n){throw this.w3mLogger?.logger.error({error:n},"Error disconnecting"),n}})}request(n){return f(this,null,function*(){let t=n;try{if(re.GET_CHAIN_ID===n.method)return this.getLastUsedChainId();let r=n.chainNamespace||"eip155",s=this.getActiveCaipNetwork(r)?.id;t.chainNamespace=r,t.chainId=s,t.rpcUrl=this.getRpcUrl(s),this.rpcRequestHandler?.(n);let a=yield this.appEvent({type:y.APP_RPC_REQUEST,payload:t});return this.rpcSuccessHandler?.(a,t),a}catch(r){throw this.rpcErrorHandler?.(r,t),this.w3mLogger?.logger.error({error:r},"Error requesting"),r}})}onRpcRequest(n){this.rpcRequestHandler=n}onRpcSuccess(n){this.rpcSuccessHandler=n}onRpcError(n){this.rpcErrorHandler=n}onIsConnected(n){this.w3mFrame.events.onFrameEvent(t=>{t.type===y.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&n()})}onNotConnected(n){this.w3mFrame.events.onFrameEvent(t=>{t.type===y.FRAME_IS_CONNECTED_ERROR&&n(),t.type===y.FRAME_IS_CONNECTED_SUCCESS&&!t.payload.isConnected&&n()})}onConnect(n){this.w3mFrame.events.onFrameEvent(t=>{t.type===y.FRAME_GET_USER_SUCCESS&&n(t.payload)})}onSocialConnected(n){this.w3mFrame.events.onFrameEvent(t=>{t.type===y.FRAME_CONNECT_SOCIAL_SUCCESS&&n(t.payload)})}getCapabilities(){return f(this,null,function*(){try{return(yield this.request({method:"wallet_getCapabilities"}))||{}}catch{return{}}})}onSetPreferredAccount(n){this.w3mFrame.events.onFrameEvent(t=>{t.type===y.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?n(t.payload):t.type===y.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&n({type:re.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){return f(this,null,function*(){try{yield Promise.all(Array.from(this.openRpcRequests.values()).map(r=>f(this,[r],function*({abortController:n,method:t}){re.SAFE_RPC_METHODS.includes(t)||n.abort(),yield this.appEvent({type:y.APP_RPC_ABORT})}))),this.openRpcRequests.clear()}catch(n){this.w3mLogger?.logger.error({error:n},"Error aborting RPC request")}})}appEvent(n){return f(this,null,function*(){let t,r;function s(l){return l.replace("@w3m-app/","")}let a=[y.APP_SYNC_DAPP_DATA,y.APP_SYNC_THEME,y.APP_SET_PREFERRED_ACCOUNT],o=s(n.type);return!this.w3mFrame.iframeIsReady&&!a.includes(n.type)&&(r=setTimeout(()=>{this.onTimeout?.("iframe_load_failed"),this.abortController.abort()},2e4)),yield this.w3mFrame.frameLoadPromise,clearTimeout(r),[y.APP_CONNECT_EMAIL,y.APP_CONNECT_DEVICE,y.APP_CONNECT_OTP,y.APP_CONNECT_SOCIAL,y.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(t=setTimeout(()=>{this.onTimeout?.("iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((l,d)=>{let m=Math.random().toString(36).substring(7);this.w3mLogger?.logger.info?.({event:n,id:m},"Sending app event"),this.w3mFrame.events.postAppEvent(h(u({},n),{id:m}));let g=new AbortController;if(o==="RPC_REQUEST"){let J=n;this.openRpcRequests.set(m,h(u({},J.payload),{abortController:g}))}g.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?d(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&d(new Error("Something went wrong"))});let W=(J,ue)=>{J.id===m&&(ue?.logger.info?.({framEvent:J,id:m},"Received frame response"),this.openRpcRequests.delete(J.id),J.type===`@w3m-frame/${o}_SUCCESS`?(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in J&&l(J.payload),l(void 0)):J.type===`@w3m-frame/${o}_ERROR`&&(t&&clearTimeout(t),r&&clearTimeout(r),"payload"in J&&d(new Error(J.payload?.message||"An error occurred")),d(new Error("An error occurred"))))};this.w3mFrame.events.registerFrameEventHandler(m,J=>W(J,this.w3mLogger),this.abortController.signal)})})}setNewLastEmailLoginTime(){oe.set(y.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(n){oe.set(y.SOCIAL_USERNAME,n)}setLoginSuccess(n){n&&oe.set(y.EMAIL,n),oe.set(y.EMAIL_LOGIN_USED_KEY,"true"),oe.delete(y.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){oe.delete(y.EMAIL_LOGIN_USED_KEY),oe.delete(y.EMAIL),oe.delete(y.LAST_USED_CHAIN_KEY),oe.delete(y.SOCIAL_USERNAME)}setLastUsedChainId(n){n&&oe.set(y.LAST_USED_CHAIN_KEY,String(n))}getLastUsedChainId(){let n=oe.get(y.LAST_USED_CHAIN_KEY)??void 0,t=Number(n);return isNaN(t)?n:t}persistSmartAccountEnabledNetworks(n){oe.set(y.SMART_ACCOUNT_ENABLED_NETWORKS,n.join(","))}getRpcUrl(n){let t=n===void 0?void 0:"eip155";typeof n=="string"&&(n.includes(":")?t=ge.parseCaipNetworkId(n)?.chainNamespace:Number.isInteger(Number(n))?t="eip155":t="solana");let r=this.getCaipNetworks(t);return(n?r.find(a=>String(a.id)===String(n)||a.caipNetworkId===n):r[0])?.rpcUrls.default.http?.[0]}};function ft(...e){return f(this,null,function*(){let n=yield fetch(...e);if(!n.ok)throw new Error(`HTTP status code: ${n.status}`,{cause:n});return n})}var Ie=class{constructor({baseUrl:n,clientId:t}){this.baseUrl=n,this.clientId=t}get(a){return f(this,null,function*(){var o=a,{headers:n,signal:t,cache:r}=o,s=be(o,["headers","signal","cache"]);let c=this.createUrl(s);return(yield ft(c,{method:"GET",headers:n,signal:t,cache:r})).json()})}getBlob(s){return f(this,null,function*(){var a=s,{headers:n,signal:t}=a,r=be(a,["headers","signal"]);let o=this.createUrl(r);return(yield ft(o,{method:"GET",headers:n,signal:t})).blob()})}post(a){return f(this,null,function*(){var o=a,{body:n,headers:t,signal:r}=o,s=be(o,["body","headers","signal"]);let c=this.createUrl(s);return(yield ft(c,{method:"POST",headers:t,body:n?JSON.stringify(n):void 0,signal:r})).json()})}put(a){return f(this,null,function*(){var o=a,{body:n,headers:t,signal:r}=o,s=be(o,["body","headers","signal"]);let c=this.createUrl(s);return(yield ft(c,{method:"PUT",headers:t,body:n?JSON.stringify(n):void 0,signal:r})).json()})}delete(a){return f(this,null,function*(){var o=a,{body:n,headers:t,signal:r}=o,s=be(o,["body","headers","signal"]);let c=this.createUrl(s);return(yield ft(c,{method:"DELETE",headers:t,body:n?JSON.stringify(n):void 0,signal:r})).json()})}createUrl({path:n,params:t}){let r=new URL(n,this.baseUrl);return t&&Object.entries(t).forEach(([s,a])=>{a&&r.searchParams.append(s,a)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}sendBeacon(r){var s=r,{body:n}=s,t=be(s,["body"]);let a=this.createUrl(t);return navigator.sendBeacon(a.toString(),n?JSON.stringify(n):void 0)}};var Mc=Symbol(),ti=Symbol();var kr=Object.getPrototypeOf,xn=new WeakMap,ni=e=>e&&(xn.has(e)?xn.get(e):kr(e)===Object.prototype||kr(e)===Array.prototype);var Or=e=>ni(e)&&e[ti]||null,Ln=(e,n=!0)=>{xn.set(e,n)};var Dn=e=>typeof e=="object"&&e!==null,ri=e=>Dn(e)&&!gt.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise),Ur=(e,n)=>{let t=Mn.get(e);if(t?.[0]===n)return t[1];let r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return Ln(r,!0),Mn.set(e,[n,r]),Reflect.ownKeys(e).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;let a=Reflect.get(e,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(e,s),c={value:a,enumerable:o,configurable:!0};if(gt.has(a))Ln(a,!1);else if(We.has(a)){let[l,d]=We.get(a);c.value=Ur(l,d())}Object.defineProperty(r,s,c)}),Object.preventExtensions(r)},si=(e,n,t,r)=>({deleteProperty(s,a){let o=Reflect.get(s,a);t(a);let c=Reflect.deleteProperty(s,a);return c&&r(["delete",[a],o]),c},set(s,a,o,c){let l=!e()&&Reflect.has(s,a),d=Reflect.get(s,a,c);if(l&&(Pr(d,o)||ht.has(o)&&Pr(d,ht.get(o))))return!0;t(a),Dn(o)&&(o=Or(o)||o);let m=!We.has(o)&&oi(o)?H(o):o;return n(a,m),Reflect.set(s,a,m,c),r(["set",[a],o,d]),!0}}),We=new WeakMap,gt=new WeakSet,Mn=new WeakMap,Yt=[1],ht=new WeakMap,Pr=Object.is,ai=(e,n)=>new Proxy(e,n),oi=ri,ii=Ur,ci=si;function H(e={}){if(!Dn(e))throw new Error("object required");let n=ht.get(e);if(n)return n;let t=Yt[0],r=new Set,s=(G,ee=++Yt[0])=>{t!==ee&&(a=t=ee,r.forEach(ce=>ce(G,ee)))},a=t,o=(G=Yt[0])=>(a!==G&&(a=G,l.forEach(([ee])=>{let ce=ee[1](G);ce>t&&(t=ce)})),t),c=G=>(ee,ce)=>{let he=[...ee];he[1]=[G,...he[1]],s(he,ce)},l=new Map,d=(G,ee)=>{let ce=!gt.has(ee)&&We.get(ee);if(ce){if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&l.has(G))throw new Error("prop listener already exists");if(r.size){let he=ce[2](c(G));l.set(G,[ce,he])}else l.set(G,[ce])}},m=G=>{var ee;let ce=l.get(G);ce&&(l.delete(G),(ee=ce[1])==null||ee.call(ce))},g=G=>(r.add(G),r.size===1&&l.forEach(([ce,he],He)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&he)throw new Error("remove already exists");let Et=ce[2](c(He));l.set(He,[ce,Et])}),()=>{r.delete(G),r.size===0&&l.forEach(([ce,he],He)=>{he&&(he(),l.set(He,[ce]))})}),W=!0,J=ci(()=>W,d,m,s),ue=ai(e,J);ht.set(e,ue);let Q=[e,o,g];return We.set(ue,Q),Reflect.ownKeys(e).forEach(G=>{let ee=Object.getOwnPropertyDescriptor(e,G);"value"in ee&&ee.writable&&(ue[G]=e[G])}),W=!1,ue}function te(e,n,t){let r=We.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s,a=[],o=r[2],c=!1,d=o(m=>{if(a.push(m),t){n(a.splice(0));return}s||(s=Promise.resolve().then(()=>{s=void 0,c&&n(a.splice(0))}))});return c=!0,()=>{c=!1,d()}}function ke(e){let n=We.get(e);(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!n&&console.warn("Please use proxy object");let[t,r]=n;return ii(t,r())}function xe(e){return gt.add(e),e}function Fn(){return{proxyStateMap:We,refSet:gt,snapCache:Mn,versionHolder:Yt,proxyCache:ht}}function ne(e,n,t,r){let s=e[n];return te(e,()=>{let a=e[n];Object.is(s,a)||t(s=a)},r)}var jc=Symbol();var{proxyStateMap:li,snapCache:di}=Fn(),zt=e=>li.has(e);function xr(e){let n=[],t=0,r=new Map,s=new WeakMap,a=()=>{let d=di.get(c),m=d?.[1];if(m&&!s.has(m)){let g=new Map(r);s.set(m,g)}},o=d=>s.get(d)||r;if(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError(`proxyMap:
	initial state must be iterable
		tip: structure should be [[key, value]]`);for(let[d,m]of e)r.set(d,t),n[t++]=m}let c={data:n,index:t,epoch:0,get size(){return zt(this)||a(),o(this).size},get(d){let g=o(this).get(d);if(g===void 0){this.epoch;return}return this.data[g]},has(d){let m=o(this);return this.epoch,m.has(d)},set(d,m){if(!zt(this))throw new Error("Cannot perform mutations on a snapshot");let g=r.get(d);return g===void 0?(r.set(d,this.index),this.data[this.index++]=m):this.data[g]=m,this.epoch++,this},delete(d){if(!zt(this))throw new Error("Cannot perform mutations on a snapshot");let m=r.get(d);return m===void 0?!1:(delete this.data[m],r.delete(d),this.epoch++,!0)},clear(){if(!zt(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(d){this.epoch,o(this).forEach((g,W)=>{d(this.data[g],W,this)})},*entries(){this.epoch;let d=o(this);for(let[m,g]of d)yield[m,this.data[g]]},*keys(){this.epoch;let d=o(this);for(let m of d.keys())yield m},*values(){this.epoch;let d=o(this);for(let m of d.values())yield this.data[m]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},l=H(c);return Object.defineProperties(l,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(l),l}var{proxyStateMap:Vc,snapCache:Hc}=Fn();var I=H({features:ae.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ae.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{},enableMobileFullScreen:!1,coinbasePreference:"all"}),x={state:I,subscribeKey(e,n){return ne(I,e,n)},setOptions(e){Object.assign(I,e)},setRemoteFeatures(e){if(!e)return;let n=u(u({},I.remoteFeatures),e);I.remoteFeatures=n,I.remoteFeatures?.socials&&(I.remoteFeatures.socials=Lr.filterSocialsByPlatform(I.remoteFeatures.socials)),I.features?.pay&&(I.remoteFeatures.email=!1,I.remoteFeatures.socials=!1)},setFeatures(e){if(!e)return;I.features||(I.features=ae.DEFAULT_FEATURES);let n=u(u({},I.features),e);I.features=n,I.features?.pay&&I.remoteFeatures&&(I.remoteFeatures.email=!1,I.remoteFeatures.socials=!1)},setProjectId(e){I.projectId=e},setCustomRpcUrls(e){I.customRpcUrls=e},setAllWallets(e){I.allWallets=e},setIncludeWalletIds(e){I.includeWalletIds=e},setExcludeWalletIds(e){I.excludeWalletIds=e},setFeaturedWalletIds(e){I.featuredWalletIds=e},setTokens(e){I.tokens=e},setTermsConditionsUrl(e){I.termsConditionsUrl=e},setPrivacyPolicyUrl(e){I.privacyPolicyUrl=e},setCustomWallets(e){I.customWallets=e},setIsSiweEnabled(e){I.isSiweEnabled=e},setIsUniversalProvider(e){I.isUniversalProvider=e},setSdkVersion(e){I.sdkVersion=e},setMetadata(e){I.metadata=e},setDisableAppend(e){I.disableAppend=e},setEIP6963Enabled(e){I.enableEIP6963=e},setDebug(e){I.debug=e},setEnableWalletGuide(e){I.enableWalletGuide=e},setEnableAuthLogger(e){I.enableAuthLogger=e},setEnableWallets(e){I.enableWallets=e},setPreferUniversalLinks(e){I.experimental_preferUniversalLinks=e},setSIWX(e){if(e)for(let[n,t]of Object.entries(ae.SIWX_DEFAULTS))e[n]??=t;I.siwx=e},setConnectMethodsOrder(e){I.features=h(u({},I.features),{connectMethodsOrder:e})},setWalletFeaturesOrder(e){I.features=h(u({},I.features),{walletFeaturesOrder:e})},setSocialsOrder(e){I.remoteFeatures=h(u({},I.remoteFeatures),{socials:e})},setCollapseWallets(e){I.features=h(u({},I.features),{collapseWallets:e})},setEnableEmbedded(e){I.enableEmbedded=e},setAllowUnsupportedChain(e){I.allowUnsupportedChain=e},setManualWCControl(e){I.manualWCControl=e},setEnableNetworkSwitch(e){I.enableNetworkSwitch=e},setEnableMobileFullScreen(e){I.enableMobileFullScreen=O.isMobile()&&e},setEnableReconnect(e){I.enableReconnect=e},setCoinbasePreference(e){I.coinbasePreference=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach(([n,t])=>{t&&(I.defaultAccountTypes[n]=t)})},setUniversalProviderConfigOverride(e){I.universalProviderConfigOverride=e},getUniversalProviderConfigOverride(){return I.universalProviderConfigOverride},getSnapshot(){return ke(I)}};var Lr={getFeatureValue(e,n){let t=n?.[e];return t===void 0?ae.DEFAULT_FEATURES[e]:t},filterSocialsByPlatform(e){if(!e||!e.length)return e;let n=e;return O.isTelegram()&&(O.isIos()&&(n=n.filter(t=>t!=="google")),O.isMac()&&(n=n.filter(t=>t!=="x")),O.isAndroid()&&(n=n.filter(t=>!["facebook","x"].includes(t)))),O.isMobile()&&(n=n.filter(t=>t!=="facebook")),n},isSocialsEnabled(){return Array.isArray(x.state.features?.socials)&&x.state.features?.socials.length>0||Array.isArray(x.state.remoteFeatures?.socials)&&x.state.remoteFeatures?.socials.length>0},isEmailEnabled(){return!!(x.state.features?.email||x.state.remoteFeatures?.email)}};var Ye=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),pe=H(u({},Ye)),ui={state:pe,subscribeKey(e,n){return ne(pe,e,n)},showLoading(e,n={}){this._showMessage(u({message:e,variant:"loading"},n))},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,n){this._showMessage({message:e,svg:n})},showError(e){let n=O.parseError(e);this._showMessage({message:n,variant:"error"})},hide(){pe.message=Ye.message,pe.variant=Ye.variant,pe.svg=Ye.svg,pe.open=Ye.open,pe.autoClose=Ye.autoClose},_showMessage({message:e,svg:n,variant:t="success",autoClose:r=Ye.autoClose}){pe.open?(pe.open=!1,setTimeout(()=>{pe.message=e,pe.variant=t,pe.svg=n,pe.open=!0,pe.autoClose=r},150)):(pe.message=e,pe.variant=t,pe.svg=n,pe.open=!0,pe.autoClose=r)}},je=ui;var ve={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"},BINANCE:{id:"2fafea35bb471d22889ccb49c08d99dd0a18a37982602c33f696a5723934ba25",appId:"yFK5FCqYprrXDiVFbhyRx7",deeplink:"bnc://app.binance.com/mp/app",url:"https://app.binance.com/en/download"}},Mr={handleMobileDeeplinkRedirect(e,n){let t=window.location.href,r=encodeURIComponent(t);if(e===ve.PHANTOM.id&&!("phantom"in window)){let s=t.startsWith("https")?"https":"http",a=t.split("/")[2],o=encodeURIComponent(`${s}://${a}`);window.location.href=`${ve.PHANTOM.url}/ul/browse/${r}?ref=${o}`}if(e===ve.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ve.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),n===k.CHAIN.SOLANA&&e===ve.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ve.COINBASE.url}/dapp?cb_url=${r}`),n===k.CHAIN.BITCOIN&&e===ve.BINANCE.id&&!("binancew3w"in window)){let s=p.state.activeCaipNetwork,a=window.btoa("/pages/browser/index"),o=window.btoa(`url=${r}&defaultChainId=${s?.id??1}`),c=new URL(ve.BINANCE.deeplink);c.searchParams.set("appId",ve.BINANCE.appId),c.searchParams.set("startPagePath",a),c.searchParams.set("startPageQuery",o);let l=new URL(ve.BINANCE.url);l.searchParams.set("_dp",window.btoa(c.toString())),window.location.href=l.toString()}}};var pi=Object.freeze({enabled:!0,events:[]}),mi=new Ie({baseUrl:O.getAnalyticsUrl(),clientId:null}),fi=5,hi=60*1e3,Ve=H(u({},pi)),Dr={state:Ve,subscribeKey(e,n){return ne(Ve,e,n)},sendError(e,n){return f(this,null,function*(){if(!Ve.enabled)return;let t=Date.now();if(Ve.events.filter(a=>{let o=new Date(a.properties.timestamp||"").getTime();return t-o<hi}).length>=fi)return;let s={type:"error",event:n,properties:{errorType:e.name,errorMessage:e.message,stackTrace:e.stack,timestamp:new Date().toISOString()}};Ve.events.push(s);try{if(typeof window>"u")return;let{projectId:a,sdkType:o,sdkVersion:c}=x.state;yield mi.post({path:"/e",params:{projectId:a,st:o,sv:c||"html-wagmi-4.2.2"},body:{eventId:O.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:n,errorType:e.name,errorMessage:e.message,stackTrace:e.stack}}})}catch{}})},enable(){Ve.enabled=!0},disable(){Ve.enabled=!1},clearEvents(){Ve.events=[]}};var ze=class e extends Error{constructor(n,t,r){super(n),this.originalName="AppKitError",this.name="AppKitError",this.category=t,this.originalError=r,r&&r instanceof Error&&(this.originalName=r.name),Object.setPrototypeOf(this,e.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){let a=r.stack,o=a.indexOf(`
`);if(o>-1){let c=a.substring(o+1);this.stack=`${this.name}: ${this.message}
${c}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,e):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function Fr(e,n){let t="";try{e instanceof Error?t=e.message:typeof e=="string"?t=e:typeof e=="object"&&e!==null?Object.keys(e).length===0?t="Unknown error":t=e?.message||JSON.stringify(e):t=String(e)}catch(s){t="Unknown error",console.error("Error parsing error message",s)}let r=e instanceof ze?e:new ze(t,n,e);throw Dr.sendError(r,r.category),r}function me(e,n="INTERNAL_SDK_ERROR"){let t={};return Object.keys(e).forEach(r=>{let s=e[r];if(typeof s=="function"){let a=s;s.constructor.name==="AsyncFunction"?a=(...o)=>f(this,null,function*(){try{return yield s(...o)}catch(c){return Fr(c,n)}}):a=(...o)=>{try{return s(...o)}catch(c){return Fr(c,n)}},t[r]=a}else t[r]=s}),t}var Te=H({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),gi={state:Te,subscribeNetworkImages(e){return te(Te.networkImages,()=>e(Te.networkImages))},subscribeKey(e,n){return ne(Te,e,n)},subscribe(e){return te(Te,()=>e(Te))},setWalletImage(e,n){Te.walletImages[e]=n},setNetworkImage(e,n){Te.networkImages[e]=n},setChainImage(e,n){Te.chainImages[e]=n},setConnectorImage(e,n){Te.connectorImages=h(u({},Te.connectorImages),{[e]:n})},setTokenImage(e,n){Te.tokenImages[e]=n},setCurrencyImage(e,n){Te.currencyImages[e]=n}},Ae=me(gi);var Ci={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:"",sui:"",stacks:"",ton:"20f673c0-095e-49b2-07cf-eb5049dcf600"},Bn=H({networkImagePromises:{}}),Br={fetchWalletImage(e){return f(this,null,function*(){if(e)return yield P._fetchWalletImage(e),this.getWalletImageById(e)})},fetchNetworkImage(e){return f(this,null,function*(){if(!e)return;let n=this.getNetworkImageById(e);return n||(Bn.networkImagePromises[e]||(Bn.networkImagePromises[e]=P._fetchNetworkImage(e)),yield Bn.networkImagePromises[e],this.getNetworkImageById(e))})},getWalletImageById(e){if(e)return Ae.state.walletImages[e]},getWalletImage(e){if(e?.image_url)return e?.image_url;if(e?.image_id)return Ae.state.walletImages[e.image_id]},getNetworkImage(e){if(e?.assets?.imageUrl)return e?.assets?.imageUrl;if(e?.assets?.imageId)return Ae.state.networkImages[e.assets.imageId]},getNetworkImageById(e){if(e)return Ae.state.networkImages[e]},getConnectorImage(e){if(e?.imageUrl)return e.imageUrl;if(e?.info?.icon)return e.info.icon;if(e?.imageId)return Ae.state.connectorImages[e.imageId]},getChainImage(e){return Ae.state.networkImages[Ci[e]]},getTokenImage(e){if(e)return Ae.state.tokenImages[e]}};var _i=O.getAnalyticsUrl(),Ei=new Ie({baseUrl:_i,clientId:null}),yi=["MODAL_CREATED"],Ai=45,Wr=1e3*10,de=H({timestamp:Date.now(),lastFlush:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"},pendingEvents:[],subscribedToVisibilityChange:!1,walletImpressions:[]}),Z={state:de,subscribe(e){return te(de,()=>e(de))},getSdkProperties(){let{projectId:e,sdkType:n,sdkVersion:t}=x.state;return{projectId:e,st:n,sv:t||"html-wagmi-4.2.2"}},shouldFlushEvents(){let e=JSON.stringify(de.pendingEvents).length/1024>Ai,n=de.lastFlush+Wr<Date.now();return e||n},_setPendingEvent(e){try{let n=p.getAccountData()?.address;if("address"in e.data&&e.data.address&&(n=e.data.address),yi.includes(e.data.event)||typeof window>"u")return;let t=p.getActiveCaipNetwork()?.caipNetworkId;this.state.pendingEvents.push({eventId:O.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:h(u({},e.data),{address:n,properties:h(u({},"properties"in e.data?e.data.properties:{}),{caipNetworkId:t})})}),de.reportedErrors.FORBIDDEN=!1,Z.shouldFlushEvents()&&Z._submitPendingEvents()}catch(n){console.warn("_setPendingEvent",n)}},sendEvent(e){de.timestamp=Date.now(),de.data=e;let n=["INITIALIZE","CONNECT_SUCCESS","SOCIAL_LOGIN_SUCCESS"];(x.state.features?.analytics||n.includes(e.event))&&Z._setPendingEvent(de),this.subscribeToFlushTriggers()},sendWalletImpressionEvent(e){de.walletImpressions.push(e)},_transformPendingEventsForBatch(e){try{return e.filter(n=>n.props.event!=="WALLET_IMPRESSION_V2")}catch{return e}},_submitPendingEvents(){if(de.lastFlush=Date.now(),!(de.pendingEvents.length===0&&de.walletImpressions.length===0))try{let e=Z._transformPendingEventsForBatch(de.pendingEvents);de.walletImpressions.length&&e.push({eventId:O.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:Date.now(),props:{type:"track",event:"WALLET_IMPRESSION_V2",items:[...de.walletImpressions]}}),Ei.sendBeacon({path:"/batch",params:Z.getSdkProperties(),body:e}),de.reportedErrors.FORBIDDEN=!1,de.pendingEvents=[],de.walletImpressions=[]}catch{de.reportedErrors.FORBIDDEN=!0}},subscribeToFlushTriggers(){de.subscribedToVisibilityChange||typeof document>"u"||(de.subscribedToVisibilityChange=!0,document?.addEventListener?.("visibilitychange",()=>{document.visibilityState==="hidden"&&Z._submitPendingEvents()}),document?.addEventListener?.("freeze",()=>{Z._submitPendingEvents()}),window?.addEventListener?.("pagehide",()=>{Z._submitPendingEvents()}),setInterval(()=>{Z._submitPendingEvents()},Wr))}};var wi=O.getApiUrl(),_e=new Ie({baseUrl:wi,clientId:null}),Si=40,jr=4,vi=20,M=H({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1,explorerWallets:[],explorerFilteredWallets:[],plan:{tier:"none",hasExceededUsageLimit:!1,limits:{isAboveRpcLimit:!1,isAboveMauLimit:!1}}}),P={state:M,subscribeKey(e,n){return ne(M,e,n)},_getSdkProperties(){let{projectId:e,sdkType:n,sdkVersion:t}=x.state;return{projectId:e,st:n||"appkit",sv:t||"html-wagmi-4.2.2"}},_filterOutExtensions(e){return x.state.isUniversalProvider?e.filter(n=>!!(n.mobile_link||n.desktop_link||n.webapp_link)):e},_fetchWalletImage(e){return f(this,null,function*(){let n=`${_e.baseUrl}/getWalletImage/${e}`,t=yield _e.getBlob({path:n,params:P._getSdkProperties()});Ae.setWalletImage(e,URL.createObjectURL(t))})},_fetchNetworkImage(e){return f(this,null,function*(){let n=`${_e.baseUrl}/public/getAssetImage/${e}`,t=yield _e.getBlob({path:n,params:P._getSdkProperties()});Ae.setNetworkImage(e,URL.createObjectURL(t))})},_fetchConnectorImage(e){return f(this,null,function*(){let n=`${_e.baseUrl}/public/getAssetImage/${e}`,t=yield _e.getBlob({path:n,params:P._getSdkProperties()});Ae.setConnectorImage(e,URL.createObjectURL(t))})},_fetchCurrencyImage(e){return f(this,null,function*(){let n=`${_e.baseUrl}/public/getCurrencyImage/${e}`,t=yield _e.getBlob({path:n,params:P._getSdkProperties()});Ae.setCurrencyImage(e,URL.createObjectURL(t))})},_fetchTokenImage(e){return f(this,null,function*(){let n=`${_e.baseUrl}/public/getTokenImage/${e}`,t=yield _e.getBlob({path:n,params:P._getSdkProperties()});Ae.setTokenImage(e,URL.createObjectURL(t))})},_filterWalletsByPlatform(e){let n=e.length,t=O.isMobile()?e?.filter(s=>s.mobile_link||s.webapp_link?!0:Object.values(ve).map(o=>o.id).includes(s.id)):e,r=n-t.length;return{filteredWallets:t,mobileFilteredOutWalletsLength:r}},fetchProjectConfig(){return f(this,null,function*(){return(yield _e.get({path:"/appkit/v1/config",params:P._getSdkProperties()})).features})},fetchUsage(){return f(this,null,function*(){try{let e=yield _e.get({path:"/appkit/v1/project-limits",params:P._getSdkProperties()}),{tier:n,isAboveMauLimit:t,isAboveRpcLimit:r}=e.planLimits,s=n==="starter",a=t||r;P.state.plan={tier:n,hasExceededUsageLimit:s&&a,limits:{isAboveRpcLimit:r,isAboveMauLimit:t}}}catch(e){console.warn("Failed to fetch usage",e)}})},fetchAllowedOrigins(){return f(this,null,function*(){try{let{allowedOrigins:e}=yield _e.get({path:"/projects/v1/origins",params:P._getSdkProperties()});return e}catch(e){if(e instanceof Error&&e.cause instanceof Response){let n=e.cause.status;if(n===k.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:e});if(n>=k.HTTP_STATUS_CODES.SERVER_ERROR&&n<600)throw new Error("SERVER_ERROR",{cause:e});return[]}return[]}})},fetchNetworkImages(){return f(this,null,function*(){let n=p.getAllRequestedCaipNetworks()?.map(({assets:t})=>t?.imageId).filter(Boolean).filter(t=>!Br.getNetworkImageById(t));n&&(yield Promise.allSettled(n.map(t=>P._fetchNetworkImage(t))))})},fetchConnectorImages(){return f(this,null,function*(){let{connectors:e}=N.state,n=e.map(({imageId:t})=>t).filter(Boolean);yield Promise.allSettled(n.map(t=>P._fetchConnectorImage(t)))})},fetchCurrencyImages(){return f(this,arguments,function*(e=[]){yield Promise.allSettled(e.map(n=>P._fetchCurrencyImage(n)))})},fetchTokenImages(){return f(this,arguments,function*(e=[]){yield Promise.allSettled(e.map(n=>P._fetchTokenImage(n)))})},fetchWallets(e){return f(this,null,function*(){let n=e.exclude??[];P._getSdkProperties().sv.startsWith("html-core-")&&n.push(...Object.values(ve).map(o=>o.id));let r=yield _e.get({path:"/getWallets",params:h(u(u({},P._getSdkProperties()),e),{page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:n.join(",")})}),{filteredWallets:s,mobileFilteredOutWalletsLength:a}=P._filterWalletsByPlatform(r?.data);return{data:s||[],count:r?.count,mobileFilteredOutWalletsLength:a}})},prefetchWalletRanks(){return f(this,null,function*(){let e=N.state.connectors;if(!e?.length)return;let n={page:1,entries:20,badge:"certified"};if(n.names=e.map(s=>s.name).join(","),p.state.activeChain===k.CHAIN.EVM){let s=[...e.flatMap(a=>a.connectors?.map(o=>o.info?.rdns)||[]),...e.map(a=>a.info?.rdns)].filter(a=>typeof a=="string"&&a.length>0);s.length&&(n.rdns=s.join(","))}let{data:t}=yield P.fetchWallets(n);M.explorerWallets=t,N.extendConnectorsWithExplorerWallets(t);let r=p.getRequestedCaipNetworkIds().join(",");M.explorerFilteredWallets=t.filter(s=>s.chains?.some(a=>r.includes(a)))})},fetchFeaturedWallets(){return f(this,null,function*(){let{featuredWalletIds:e}=x.state;if(e?.length){let n=h(u({},P._getSdkProperties()),{page:1,entries:e?.length??jr,include:e}),{data:t}=yield P.fetchWallets(n),r=[...t].sort((a,o)=>e.indexOf(a.id)-e.indexOf(o.id)),s=r.map(a=>a.image_id).filter(Boolean);yield Promise.allSettled(s.map(a=>P._fetchWalletImage(a))),M.featured=r,M.allFeatured=r}})},fetchRecommendedWallets(){return f(this,null,function*(){try{M.isFetchingRecommendedWallets=!0;let{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:t}=x.state,r=[...n??[],...t??[]].filter(Boolean),s=p.getRequestedCaipNetworkIds().join(","),a={page:1,entries:jr,include:e,exclude:r,chains:s},{data:o,count:c}=yield P.fetchWallets(a),l=E.getRecentWallets(),d=o.map(g=>g.image_id).filter(Boolean),m=l.map(g=>g.image_id).filter(Boolean);yield Promise.allSettled([...d,...m].map(g=>P._fetchWalletImage(g))),M.recommended=o,M.allRecommended=o,M.count=c??0}catch{}finally{M.isFetchingRecommendedWallets=!1}})},fetchWalletsByPage(n){return f(this,arguments,function*({page:e}){let{includeWalletIds:t,excludeWalletIds:r,featuredWalletIds:s}=x.state,a=p.getRequestedCaipNetworkIds().join(","),o=[...M.recommended.map(({id:W})=>W),...r??[],...s??[]].filter(Boolean),c={page:e,entries:Si,include:t,exclude:o,chains:a},{data:l,count:d,mobileFilteredOutWalletsLength:m}=yield P.fetchWallets(c);M.mobileFilteredOutWalletsLength=m+(M.mobileFilteredOutWalletsLength??0);let g=l.slice(0,vi).map(W=>W.image_id).filter(Boolean);yield Promise.allSettled(g.map(W=>P._fetchWalletImage(W))),M.wallets=O.uniqueBy([...M.wallets,...P._filterOutExtensions(l)],"id").filter(W=>W.chains?.some(J=>a.includes(J))),M.count=d>M.count?d:M.count,M.page=e})},initializeExcludedWallets(n){return f(this,arguments,function*({ids:e}){let t={page:1,entries:e.length,include:e},{data:r}=yield P.fetchWallets(t);r&&r.forEach(s=>{M.excludedWallets.push({rdns:s.rdns,name:s.name})})})},searchWallet(t){return f(this,arguments,function*({search:e,badge:n}){let{includeWalletIds:r,excludeWalletIds:s}=x.state,a=p.getRequestedCaipNetworkIds().join(",");M.search=[];let o={page:1,entries:100,search:e?.trim(),badge_type:n,include:r,exclude:s,chains:a},{data:c}=yield P.fetchWallets(o);Z.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:n??"",search:e??""}});let l=c.map(d=>d.image_id).filter(Boolean);yield Promise.allSettled([...l.map(d=>P._fetchWalletImage(d)),O.wait(300)]),M.search=P._filterOutExtensions(c)})},initPromise(e,n){let t=M.promises[e];return t||(M.promises[e]=n())},prefetch({fetchConnectorImages:e=!0,fetchFeaturedWallets:n=!0,fetchRecommendedWallets:t=!0,fetchNetworkImages:r=!0,fetchWalletRanks:s=!0}={}){let a=[e&&P.initPromise("connectorImages",P.fetchConnectorImages),n&&P.initPromise("featuredWallets",P.fetchFeaturedWallets),t&&P.initPromise("recommendedWallets",P.fetchRecommendedWallets),r&&P.initPromise("networkImages",P.fetchNetworkImages),s&&P.initPromise("walletRanks",P.prefetchWalletRanks)].filter(Boolean);return Promise.allSettled(a)},prefetchAnalyticsConfig(){x.state.features?.analytics&&P.fetchAnalyticsConfig()},fetchAnalyticsConfig(){return f(this,null,function*(){try{let{isAnalyticsEnabled:e}=yield _e.get({path:"/getAnalyticsConfig",params:P._getSdkProperties()});x.setFeatures({analytics:e})}catch{x.setFeatures({analytics:!1})}})},filterByNamespaces(e){if(!e?.length){M.featured=M.allFeatured,M.recommended=M.allRecommended;return}let n=p.getRequestedCaipNetworkIds().join(",");M.featured=M.allFeatured.filter(t=>t.chains?.some(r=>n.includes(r))),M.recommended=M.allRecommended.filter(t=>t.chains?.some(r=>n.includes(r))),M.filteredWallets=M.wallets.filter(t=>t.chains?.some(r=>n.includes(r)))},clearFilterByNamespaces(){M.filteredWallets=[]},setFilterByNamespace(e){if(!e){M.featured=M.allFeatured,M.recommended=M.allRecommended;return}let n=p.getRequestedCaipNetworkIds().join(",");M.featured=M.allFeatured.filter(t=>t.chains?.some(r=>n.includes(r))),M.recommended=M.allRecommended.filter(t=>t.chains?.some(r=>n.includes(r))),M.filteredWallets=M.wallets.filter(t=>t.chains?.some(r=>n.includes(r)))}};var Vr={onSwitchNetwork({network:e,ignoreSwitchConfirmation:n=!1}){let t=p.state.activeCaipNetwork,r=p.state.activeChain,s=D.state.data;if(e.id===t?.id)return;let o=!!p.getAccountData(r)?.address,c=!!p.getAccountData(e.chainNamespace)?.address,l=e.chainNamespace!==r,m=N.getConnectorId(r)===k.CONNECTOR_ID.AUTH,g=k.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(W=>W===e.chainNamespace);n||m&&g?D.push("SwitchNetwork",h(u({},s),{network:e})):o&&l&&!c?D.push("SwitchActiveChain",{switchToChain:e.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:e}):D.push("SwitchNetwork",h(u({},s),{network:e}))}};var nt=H({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Le={state:nt,subscribe(e){return te(nt,()=>e(nt))},subscribeOpen(e){return ne(nt,"open",e)},set(e){Object.assign(nt,u(u({},nt),e))}};var we=H({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Ti={state:we,subscribe(e){return te(we,()=>e(we))},subscribeKey(e,n){return ne(we,e,n)},open(e){return f(this,null,function*(){let n=e?.namespace,t=p.state.activeChain,r=n&&n!==t,s=p.getAccountData(e?.namespace)?.caipAddress,a=p.state.noAdapters;if(b.state.wcBasic?P.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1,fetchWalletRanks:!1}):yield P.prefetch(),N.setFilterByNamespace(e?.namespace),se.setLoading(!0,n),n&&r){let o=p.getNetworkData(n)?.caipNetwork||p.getRequestedCaipNetworks(n)[0];o&&(a?(yield p.switchActiveNetwork(o),D.push("ConnectingWalletConnectBasic")):Vr.onSwitchNetwork({network:o,ignoreSwitchConfirmation:!0}))}else x.state.manualWCControl||a&&!s?O.isMobile()?D.reset("AllWallets"):D.reset("ConnectingWalletConnectBasic"):e?.view?D.reset(e.view,e.data):s?D.reset("Account"):D.reset("Connect");we.open=!0,Le.set({open:!0}),Z.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})})},close(){let e=x.state.enableEmbedded,n=!!p.state.activeCaipAddress;we.open&&Z.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:n}}),we.open=!1,D.reset("Connect"),se.clearLoading(),e?n?D.replace("Account"):D.push("Connect"):Le.set({open:!1}),b.resetUri()},setLoading(e,n){n&&we.loadingNamespaceMap.set(n,e),we.loading=e,Le.set({loading:e})},clearLoading(){we.loadingNamespaceMap.clear(),we.loading=!1,Le.set({loading:!1})},shake(){we.shake||(we.shake=!0,setTimeout(()=>{we.shake=!1},500))}},se=me(Ti);var Ni=["ConnectingExternal","ConnectingMultiChain","ConnectingSocial","ConnectingFarcaster"],X=H({view:"Connect",history:["Connect"],transactionStack:[]}),Ri={state:X,subscribeKey(e,n){return ne(X,e,n)},pushTransactionStack(e){X.transactionStack.push(e)},popTransactionStack(e){let n=X.transactionStack.pop();if(!n)return;let{onSuccess:t,onError:r,onCancel:s}=n;switch(e){case"success":t?.();break;case"error":r?.(),D.goBack();break;case"cancel":s?.(),D.goBack();break;default:}},push(e,n){let t=e,r=n;P.state.plan.hasExceededUsageLimit&&Ni.includes(e)&&(t="UsageExceeded",r=void 0),t!==X.view&&(X.view=t,X.history.push(t),X.data=r)},reset(e,n){X.view=e,X.history=[e],X.data=n},replace(e,n){X.history.at(-1)===e||(X.view=e,X.history[X.history.length-1]=e,X.data=n)},goBack(){let e=p.state.activeCaipAddress,n=D.state.view==="ConnectingFarcaster",t=!e&&n;if(X.history.length>1){X.history.pop();let[r]=X.history.slice(-1);r&&(e&&r==="Connect"?X.view="Account":X.view=r)}else se.close();X.data?.wallet&&(X.data.wallet=void 0),X.data?.redirectView&&(X.data.redirectView=void 0),setTimeout(()=>{if(t){p.setAccountProp("farcasterUrl",void 0,p.state.activeChain);let r=N.getAuthConnector();r?.provider?.reload();let s=ke(x.state);r?.provider?.syncDappData?.({metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType})}},100)},goBackToIndex(e){if(X.history.length>1){X.history=X.history.slice(0,e+1);let[n]=X.history.slice(-1);n&&(X.view=n)}},goBackOrCloseModal(){D.state.history.length>1?D.goBack():se.close()}},D=me(Ri);var Me=H({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Wn={state:Me,subscribe(e){return te(Me,()=>e(Me))},setThemeMode(e){Me.themeMode=e;try{let n=N.getAuthConnector();if(n){let t=Wn.getSnapshot().themeVariables;n.provider.syncTheme({themeMode:e,themeVariables:t,w3mThemeVariables:Je(t,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){Me.themeVariables=u(u({},Me.themeVariables),e);try{let n=N.getAuthConnector();if(n){let t=Wn.getSnapshot().themeVariables;n.provider.syncTheme({themeVariables:t,w3mThemeVariables:Je(Me.themeVariables,Me.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return ke(Me)}},Ct=me(Wn);var Hr=Object.fromEntries(tn.map(e=>[e,void 0])),Ii=Object.fromEntries(tn.map(e=>[e,!0])),$=H({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:Hr,filterByNamespaceMap:Ii}),bi={state:$,subscribe(e){return te($,()=>{e($)})},subscribeKey(e,n){return ne($,e,n)},initialize(e){e.forEach(n=>{let t=E.getConnectedConnectorId(n);t&&N.setConnectorId(t,n)})},setActiveConnector(e){e&&($.activeConnector=xe(e))},setConnectors(e){e.filter(s=>!$.allConnectors.some(a=>a.id===s.id&&N.getConnectorName(a.name)===N.getConnectorName(s.name)&&a.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&$.allConnectors.push(xe(s))});let t=N.getEnabledNamespaces(),r=N.getEnabledConnectors(t);$.connectors=N.mergeMultiChainConnectors(r)},filterByNamespaces(e){Object.keys($.filterByNamespaceMap).forEach(n=>{$.filterByNamespaceMap[n]=!1}),e.forEach(n=>{$.filterByNamespaceMap[n]=!0}),N.updateConnectorsForEnabledNamespaces()},filterByNamespace(e,n){$.filterByNamespaceMap[e]=n,N.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){let e=N.getEnabledNamespaces(),n=N.getEnabledConnectors(e),t=N.areAllNamespacesEnabled();$.connectors=N.mergeMultiChainConnectors(n),t?P.clearFilterByNamespaces():P.filterByNamespaces(e)},getEnabledNamespaces(){return Object.entries($.filterByNamespaceMap).filter(([e,n])=>n).map(([e])=>e)},getEnabledConnectors(e){return $.allConnectors.filter(n=>e.includes(n.chain))},areAllNamespacesEnabled(){return Object.values($.filterByNamespaceMap).every(e=>e)},mergeMultiChainConnectors(e){let n=N.generateConnectorMapByName(e),t=[];return n.forEach(r=>{let s=r[0],a=s?.id===k.CONNECTOR_ID.AUTH;r.length>1&&s?t.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:a?"AUTH":"MULTI_CHAIN",chain:"eip155",id:s?.id||""}):s&&t.push(s)}),t},generateConnectorMapByName(e){let n=new Map;return e.forEach(t=>{let{name:r}=t,s=N.getConnectorName(r);if(!s)return;let a=n.get(s)||[];a.find(c=>c.chain===t.chain)||a.push(t),n.set(s,a)}),n},getConnectorName(e){return e&&({"Trust Wallet":"Trust"}[e]||e)},getUniqueConnectorsByName(e){let n=[];return e.forEach(t=>{n.find(r=>r.chain===t.chain)||n.push(t)}),n},addConnector(e){if(e.id===k.CONNECTOR_ID.AUTH){let n=e,t=ke(x.state),r=Ct.getSnapshot().themeMode,s=Ct.getSnapshot().themeVariables;n?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType}),n?.provider?.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Je(s,r)}),N.setConnectors([e])}else N.setConnectors([e])},getAuthConnector(e){let n=e||p.state.activeChain,t=$.connectors.find(r=>r.id===k.CONNECTOR_ID.AUTH);if(t)return t?.connectors?.length?t.connectors.find(s=>s.chain===n):t},getAnnouncedConnectorRdns(){return $.connectors.filter(e=>e.type==="ANNOUNCED").map(e=>e.info?.rdns)},getConnectorById(e){return $.allConnectors.find(n=>n.id===e)},getConnector({id:e,rdns:n,namespace:t}){let r=t||p.state.activeChain;return $.allConnectors.filter(a=>a.chain===r).find(a=>a.explorerId===e||a.info?.rdns===n)},syncIfAuthConnector(e){if(e.id!=="AUTH")return;let n=e,t=ke(x.state),r=Ct.getSnapshot().themeMode,s=Ct.getSnapshot().themeVariables;n?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,sdkType:t.sdkType,projectId:t.projectId}),n.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Je(s,r)})},getConnectorsByNamespace(e){let n=$.allConnectors.filter(t=>t.chain===e);return N.mergeMultiChainConnectors(n)},canSwitchToSmartAccount(e){return p.checkIfSmartAccountEnabled()&&Ne(e)===re.ACCOUNT_TYPES.EOA},selectWalletConnector(e){let n=D.state.data?.redirectView,t=N.getConnector({id:e.id,rdns:e.rdns});Mr.handleMobileDeeplinkRedirect(t?.explorerId||e.id,p.state.activeChain),t?D.push("ConnectingExternal",{connector:t,wallet:e,redirectView:n}):D.push("ConnectingWalletConnect",{wallet:e,redirectView:n})},getConnectors(e){return e?N.getConnectorsByNamespace(e):N.mergeMultiChainConnectors($.allConnectors)},setFilterByNamespace(e){$.filterByNamespace=e,$.connectors=N.getConnectors(e),P.setFilterByNamespace(e)},setConnectorId(e,n){e&&($.activeConnectorIds=h(u({},$.activeConnectorIds),{[n]:e}),E.setConnectedConnectorId(n,e))},removeConnectorId(e){$.activeConnectorIds=h(u({},$.activeConnectorIds),{[e]:void 0}),E.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return $.activeConnectorIds[e]},isConnected(e){return e?!!$.activeConnectorIds[e]:Object.values($.activeConnectorIds).some(n=>!!n)},resetConnectorIds(){$.activeConnectorIds=u({},Hr)},extendConnectorsWithExplorerWallets(e){$.allConnectors.forEach(r=>{let s=e.find(a=>a.id===r.id||a.rdns&&a.rdns===r.info?.rdns);s&&(r.explorerWallet=s)});let n=N.getEnabledNamespaces(),t=N.getEnabledConnectors(n);$.connectors=N.mergeMultiChainConnectors(t)}},N=me(bi);var ki=1e3,rt={checkNamespaceConnectorId(e,n){return N.getConnectorId(e)===n},isSocialProvider(e){return ae.DEFAULT_REMOTE_FEATURES.socials.includes(e)},connectWalletConnect({walletConnect:e,connector:n,closeModalOnConnect:t=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:a}){return new Promise((o,c)=>{if(e&&N.setActiveConnector(n),s?.(O.isMobile()&&e),r){let d=se.subscribeKey("open",m=>{m||(D.state.view!==r&&D.replace(r),d(),c(new Error("Modal closed")))})}let l=p.subscribeKey("activeCaipAddress",d=>{d&&(a?.(),t&&se.close(),l(),o(ge.parseCaipAddress(d)))})})},connectExternal(e){return new Promise((n,t)=>{let r=p.subscribeKey("activeCaipAddress",s=>{s&&(se.close(),r(),n(ge.parseCaipAddress(s)))});b.connectExternal(e,e.chain).catch(()=>{r(),t(new Error("Connection rejected"))})})},connectSocial({social:e,namespace:n,closeModalOnConnect:t=!0,onOpenFarcaster:r,onConnect:s}){let a,o=!1,c=null,l=n||p.state.activeChain,d=p.subscribeKey("activeCaipAddress",m=>{m&&(t&&se.close(),d())});return new Promise((m,g)=>{function W(ue){return f(this,null,function*(){if(ue.data?.resultUri)if(ue.origin===k.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",W,!1);try{let Q=N.getAuthConnector(l);if(Q&&!o){a&&a.close(),o=!0;let G=ue.data.resultUri;Z.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:e}}),E.setConnectedSocialProvider(e),yield b.connectExternal({id:Q.id,type:Q.type,socialUri:G},Q.chain);let ee=p.state.activeCaipAddress;if(!ee){g(new Error("Failed to connect"));return}m(ge.parseCaipAddress(ee)),Z.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:e}})}}catch(Q){Z.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:O.parseError(Q)}}),g(new Error("Failed to connect"))}}else Z.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:e,message:"Untrusted Origin"}})})}function J(){return f(this,null,function*(){if(Z.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:e}}),e==="farcaster"){r?.();let ue=se.subscribeKey("open",G=>{!G&&e==="farcaster"&&(g(new Error("Popup closed")),s?.(),ue())}),Q=N.getAuthConnector();if(Q&&!p.getAccountData(l)?.farcasterUrl)try{let{url:ee}=yield Q.provider.getFarcasterUri();p.setAccountProp("farcasterUrl",ee,l)}catch{g(new Error("Failed to connect to farcaster"))}}else{let ue=N.getAuthConnector();c=O.returnOpenHref(`${k.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(ue){let{uri:Q}=yield ue.provider.getSocialRedirectUri({provider:e});if(c&&Q){c.location.href=Q,a=c;let G=setInterval(()=>{a?.closed&&!o&&(g(new Error("Popup closed")),clearInterval(G))},1e3);window.addEventListener("message",W,!1)}else c?.close(),g(new Error("Failed to initiate social connection"))}}catch{g(new Error("Failed to initiate social connection")),c?.close()}}})}J()})},connectEmail({closeModalOnConnect:e=!0,redirectViewOnModalClose:n="Connect",onOpen:t,onConnect:r}){return new Promise((s,a)=>{if(t?.(),n){let c=se.subscribeKey("open",l=>{l||(D.state.view!==n&&D.replace(n),c(),a(new Error("Modal closed")))})}let o=p.subscribeKey("activeCaipAddress",c=>{c&&(r?.(),e&&se.close(),o(),s(ge.parseCaipAddress(c)))})})},updateEmail(){return f(this,null,function*(){let e=E.getConnectedConnectorId(p.state.activeChain),n=N.getAuthConnector();if(!n)throw new Error("No auth connector found");if(e!==k.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");let t=n.provider.getEmail()??"";return yield se.open({view:"UpdateEmailWallet",data:{email:t,redirectView:void 0}}),new Promise((r,s)=>{let a=setInterval(()=>{let c=n.provider.getEmail()??"";c!==t&&(se.close(),clearInterval(a),o(),r({email:c}))},ki),o=se.subscribeKey("open",c=>{c||(D.state.view!=="Connect"&&D.push("Connect"),clearInterval(a),o(),s(new Error("Modal closed")))})})})},canSwitchToSmartAccount(e){return p.checkIfSmartAccountEnabled()&&Ne(e)===re.ACCOUNT_TYPES.EOA}};function qt(){let e=p.state.activeCaipNetwork?.chainNamespace||"eip155",n=p.state.activeCaipNetwork?.id||1,t=ae.NATIVE_TOKEN_ADDRESS[e];return`${e}:${n}:${t}`}function Ne(e){return p.getAccountData(e)?.preferredAccountType}function Eu(e){return e?p.state.chains.get(e)?.networkState?.caipNetwork:p.state.activeCaipNetwork}var jn={getConnectionStatus(e,n){let t=N.state.activeConnectorIds[n],r=b.getConnections(n);return!!t&&e.connectorId===t?"connected":r.some(o=>o.connectorId.toLowerCase()===e.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:e,connectorId:n,addresses:t}){return e.map(r=>{if((n?r.connectorId.toLowerCase()===n.toLowerCase():!1)&&t){let a=r.accounts.filter(o=>!t.some(l=>l.toLowerCase()===o.address.toLowerCase()));return h(u({},r),{accounts:a})}return r})},excludeExistingConnections(e,n){let t=new Set(e);return n.filter(r=>!t.has(r.connectorId))},getConnectionsByConnectorId(e,n){return e.filter(t=>t.connectorId.toLowerCase()===n.toLowerCase())},getConnectionsData(e){let n=!!x.state.remoteFeatures?.multiWallet,t=N.state.activeConnectorIds[e],r=b.getConnections(e),a=(b.state.recentConnections.get(e)??[]).filter(c=>N.getConnectorById(c.connectorId)),o=jn.excludeExistingConnections([...r.map(c=>c.connectorId),...t?[t]:[]],a);return n?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===t?.toLowerCase()),recentConnections:[]}}};var ie=H({transactions:[],transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Oi={state:ie,subscribe(e){return te(ie,()=>e(ie))},setLastNetworkInView(e){ie.lastNetworkInView=e},fetchTransactions(e){return f(this,null,function*(){if(!e)throw new Error("Transactions can't be fetched without an accountAddress");ie.loading=!0;try{let n=yield F.fetchTransactions({account:e,cursor:ie.next,chainId:p.state.activeCaipNetwork?.caipNetworkId}),t=_t.filterSpamTransactions(n.data),r=_t.filterByConnectedChain(t),s=[...ie.transactions,...r];ie.loading=!1,ie.transactions=s,ie.transactionsByYear=_t.groupTransactionsByYearAndMonth(ie.transactionsByYear,r),ie.empty=s.length===0,ie.next=n.next?n.next:void 0}catch{let t=p.state.activeChain;Z.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:x.state.projectId,cursor:ie.next,isSmartAccount:Ne(t)===re.ACCOUNT_TYPES.SMART_ACCOUNT}}),je.showError("Failed to fetch transactions"),ie.loading=!1,ie.empty=!0,ie.next=void 0}})},groupTransactionsByYearAndMonth(e={},n=[]){let t=e;return n.forEach(r=>{let s=new Date(r.metadata.minedAt).getFullYear(),a=new Date(r.metadata.minedAt).getMonth(),o=t[s]??{},l=(o[a]??[]).filter(d=>d.id!==r.id);t[s]=h(u({},o),{[a]:[...l,r].sort((d,m)=>new Date(m.metadata.minedAt).getTime()-new Date(d.metadata.minedAt).getTime())})}),t},filterSpamTransactions(e){return e.filter(n=>!n.transfers.every(r=>r.nft_info?.flags.is_spam===!0))},filterByConnectedChain(e){let n=p.state.activeCaipNetwork?.caipNetworkId;return e.filter(r=>r.metadata.chain===n)},clearCursor(){ie.next=void 0},resetTransactions(){ie.transactions=[],ie.transactionsByYear={},ie.lastNetworkInView=void 0,ie.loading=!1,ie.empty=!1,ie.next=void 0}},_t=me(Oi,"API_ERROR");var q=H({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"}),qe,Pi={state:q,subscribe(e){return te(q,()=>e(q))},subscribeKey(e,n){return ne(q,e,n)},_getClient(){return q._client},setClient(e){q._client=xe(e)},initialize(e){let n=e.filter(t=>!!t.namespace).map(t=>t.namespace);b.syncStorageConnections(n)},syncStorageConnections(e){let n=E.getConnections(),t=e??Array.from(p.state.chains.keys());for(let r of t){let s=n[r]??[],a=new Map(q.recentConnections);a.set(r,s),q.recentConnections=a}},getConnections(e){return e?q.connections.get(e)??[]:[]},hasAnyConnection(e){let n=b.state.connections;return Array.from(n.values()).flatMap(t=>t).some(({connectorId:t})=>t===e)},connectWalletConnect(){return f(this,arguments,function*({cache:e="auto"}={}){let n=O.isTelegram()||O.isSafari()&&O.isIos();if(e==="always"||e==="auto"&&n){if(qe){yield qe,qe=void 0;return}if(!O.isPairingExpired(q?.wcPairingExpiry)){let t=q.wcUri;q.wcUri=t;return}qe=b._getClient()?.connectWalletConnect?.().catch(()=>{}),b.state.status="connecting",yield qe,qe=void 0,q.wcPairingExpiry=void 0,b.state.status="connected"}else yield b._getClient()?.connectWalletConnect?.()})},connectExternal(e,n,t=!0){return f(this,null,function*(){let r=yield b._getClient()?.connectExternal?.(e);t&&p.setActiveNamespace(n);let s=N.state.allConnectors.find(o=>o.id===e?.id),a=e.type==="AUTH"?"email":"browser";return Z.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:a,name:s?.name||"Unknown",view:D.state.view,walletRank:s?.explorerWallet?.order}}),r})},reconnectExternal(e){return f(this,null,function*(){yield b._getClient()?.reconnectExternal?.(e);let n=e.chain||p.state.activeChain;n&&N.setConnectorId(e.id,n)})},setPreferredAccountType(e,n){return f(this,null,function*(){if(!n)return;se.setLoading(!0,p.state.activeChain);let t=N.getAuthConnector();t&&(p.setAccountProp("preferredAccountType",e,n),yield t.provider.setPreferredAccount(e),E.setPreferredAccountTypes(Object.entries(p.state.chains).reduce((r,[s,a])=>{let o=s,c=Ne(o);return c!==void 0&&(r[o]=c),r},{})),yield b.reconnectExternal(t),se.setLoading(!1,p.state.activeChain),Z.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:p.state.activeCaipNetwork?.caipNetworkId||""}}))})},signMessage(e){return f(this,null,function*(){return b._getClient()?.signMessage(e)})},parseUnits(e,n){return b._getClient()?.parseUnits(e,n)},formatUnits(e,n){return b._getClient()?.formatUnits(e,n)},updateBalance(e){return b._getClient()?.updateBalance(e)},sendTransaction(e){return f(this,null,function*(){return b._getClient()?.sendTransaction(e)})},getCapabilities(e){return f(this,null,function*(){return b._getClient()?.getCapabilities(e)})},grantPermissions(e){return f(this,null,function*(){return b._getClient()?.grantPermissions(e)})},walletGetAssets(e){return f(this,null,function*(){return b._getClient()?.walletGetAssets(e)??{}})},estimateGas(e){return f(this,null,function*(){return b._getClient()?.estimateGas(e)})},writeContract(e){return f(this,null,function*(){return b._getClient()?.writeContract(e)})},getEnsAddress(e){return f(this,null,function*(){return b._getClient()?.getEnsAddress(e)})},getEnsAvatar(e){return f(this,null,function*(){return b._getClient()?.getEnsAvatar(e)})},checkInstalled(e){return b._getClient()?.checkInstalled?.(e)||!1},resetWcConnection(){q.wcUri=void 0,q.wcPairingExpiry=void 0,q.wcLinking=void 0,q.recentWallet=void 0,q.status="disconnected",_t.resetTransactions(),E.deleteWalletConnectDeepLink(),E.deleteRecentWallet()},resetUri(){q.wcUri=void 0,q.wcPairingExpiry=void 0,qe=void 0},finalizeWcConnection(e){let{wcLinking:n,recentWallet:t}=b.state;n&&E.setWalletConnectDeepLink(n),t&&E.setAppKitRecent(t),e&&Z.sendEvent({type:"track",event:"CONNECT_SUCCESS",address:e,properties:{method:n?"mobile":"qrcode",name:D.state.data?.wallet?.name||"Unknown",view:D.state.view,walletRank:t?.order}})},setWcBasic(e){q.wcBasic=e},setUri(e){q.wcUri=e,q.wcPairingExpiry=O.getPairingExpiry()},setWcLinking(e){q.wcLinking=e},setWcError(e){q.wcError=e,q.buffering=!1},setRecentWallet(e){q.recentWallet=e},setBuffering(e){q.buffering=e},setStatus(e){q.status=e},setIsSwitchingConnection(e){q.isSwitchingConnection=e},disconnect(){return f(this,arguments,function*({id:e,namespace:n,initialDisconnect:t}={}){try{yield b._getClient()?.disconnect({id:e,chainNamespace:n,initialDisconnect:t})}catch(r){throw new ze("Failed to disconnect","INTERNAL_SDK_ERROR",r)}})},disconnectConnector(t){return f(this,arguments,function*({id:e,namespace:n}){try{yield b._getClient()?.disconnectConnector({id:e,namespace:n})}catch(r){throw new ze("Failed to disconnect connector","INTERNAL_SDK_ERROR",r)}})},setConnections(e,n){let t=new Map(q.connections);t.set(n,e),q.connections=t},handleAuthAccountSwitch(t){return f(this,arguments,function*({address:e,namespace:n}){let s=p.getAccountData(n)?.user?.accounts?.find(o=>o.type==="smartAccount"),a=s&&s.address.toLowerCase()===e.toLowerCase()&&rt.canSwitchToSmartAccount(n)?"smartAccount":"eoa";yield b.setPreferredAccountType(a,n)})},handleActiveConnection(r){return f(this,arguments,function*({connection:e,namespace:n,address:t}){let s=N.getConnectorById(e.connectorId),a=e.connectorId===k.CONNECTOR_ID.AUTH;if(!s)throw new Error(`No connector found for connection: ${e.connectorId}`);if(a)t&&(yield b.handleAuthAccountSwitch({address:t,namespace:n}));else return(yield b.connectExternal({id:s.id,type:s.type,provider:s.provider,address:t,chain:n},n))?.address;return t})},handleDisconnectedConnection(s){return f(this,arguments,function*({connection:e,namespace:n,address:t,closeModalOnConnect:r}){let a=N.getConnectorById(e.connectorId),o=e.auth?.name?.toLowerCase(),c=e.connectorId===k.CONNECTOR_ID.AUTH,l=e.connectorId===k.CONNECTOR_ID.WALLET_CONNECT;if(!a)throw new Error(`No connector found for connection: ${e.connectorId}`);let d;if(c)if(o&&rt.isSocialProvider(o)){let{address:m}=yield rt.connectSocial({social:o,closeModalOnConnect:r,onOpenFarcaster(){se.open({view:"ConnectingFarcaster"})},onConnect(){D.replace("ProfileWallets")}});d=m}else{let{address:m}=yield rt.connectEmail({closeModalOnConnect:r,onOpen(){se.open({view:"EmailLogin"})},onConnect(){D.replace("ProfileWallets")}});d=m}else if(l){let{address:m}=yield rt.connectWalletConnect({walletConnect:!0,connector:a,closeModalOnConnect:r,onOpen(g){let W=g?"AllWallets":"ConnectingWalletConnect";se.state.open?D.push(W):se.open({view:W})},onConnect(){D.replace("ProfileWallets")}});d=m}else{let m=yield b.connectExternal({id:a.id,type:a.type,provider:a.provider,chain:n},n);m&&(d=m.address)}return c&&t&&(yield b.handleAuthAccountSwitch({address:t,namespace:n})),d})},switchConnection(a){return f(this,arguments,function*({connection:e,address:n,namespace:t,closeModalOnConnect:r,onChange:s}){let o,c=p.getAccountData(t)?.caipAddress;if(c){let{address:d}=ge.parseCaipAddress(c);o=d}let l=jn.getConnectionStatus(e,t);switch(l){case"connected":case"active":{let d=yield b.handleActiveConnection({connection:e,namespace:t,address:n});if(o&&d){let m=d.toLowerCase()!==o.toLowerCase();s?.({address:d,namespace:t,hasSwitchedAccount:m,hasSwitchedWallet:l==="active"})}break}case"disconnected":{let d=yield b.handleDisconnectedConnection({connection:e,namespace:t,address:n,closeModalOnConnect:r});d&&s?.({address:d,namespace:t,hasSwitchedAccount:!0,hasSwitchedWallet:!0});break}default:throw new Error(`Invalid connection status: ${l}`)}})}},b=me(Pi);var Jt={createBalance(e,n){let t={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:t.name,symbol:t.symbol,chainId:n,address:e.address==="native"?void 0:this.convertAddressToCAIP10Address(e.address,n),value:t.value,price:t.price,quantity:{decimals:t.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:t.decimals})},iconUrl:t.iconUrl}},convertHexToBalance({hex:e,decimals:n}){return At(BigInt(e),n)},convertAddressToCAIP10Address(e,n){return`${n}:${e}`},createCAIP2ChainId(e,n){return`${n}:${parseInt(e,16)}`},getChainIdHexFromCAIP2ChainId(e){let n=e.split(":");if(n.length<2||!n[1])return"0x0";let t=n[1],r=parseInt(t,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(e){return typeof e!="object"||e===null?!1:Object.values(e).every(n=>Array.isArray(n)&&n.every(t=>this.isValidAsset(t)))},isValidAsset(e){return typeof e=="object"&&e!==null&&typeof e.address=="string"&&typeof e.balance=="string"&&(e.type==="ERC20"||e.type==="NATIVE")&&typeof e.metadata=="object"&&e.metadata!==null&&typeof e.metadata.name=="string"&&typeof e.metadata.symbol=="string"&&typeof e.metadata.decimals=="number"&&typeof e.metadata.price=="number"&&typeof e.metadata.iconUrl=="string"}};var Vn;function Gr(){return f(this,null,function*(){if(!Vn){let{createPublicClient:e,http:n,defineChain:t}=yield import("./chunk-SH52VKI5.js");Vn={createPublicClient:e,http:n,defineChain:t}}return Vn})}var Xt={getBlockchainApiRpcUrl(e,n){let t=new URL("https://rpc.walletconnect.org/v1/");return t.searchParams.set("chainId",e),t.searchParams.set("projectId",n),t.toString()},getViemChain(e){return f(this,null,function*(){let{defineChain:n}=yield Gr(),{chainId:t}=ge.parseCaipNetworkId(e.caipNetworkId);return n(h(u({},e),{id:Number(t)}))})},createViemPublicClient(e){return f(this,null,function*(){let{createPublicClient:n,http:t}=yield Gr(),r=x.state.projectId,s=yield Xt.getViemChain(e);if(!s)throw new Error(`Chain ${e.caipNetworkId} not found in viem/chains`);return n({chain:s,transport:t(Xt.getBlockchainApiRpcUrl(e.caipNetworkId,r))})})}};var st={getMyTokensWithBalance(e){return f(this,null,function*(){let n=p.getAccountData()?.address,t=p.state.activeCaipNetwork,r=N.getConnectorId("eip155")===k.CONNECTOR_ID.AUTH;if(!n||!t)return[];let s=`${t.caipNetworkId}:${n}`,a=E.getBalanceCacheForCaipAddress(s);if(a)return a.balances;if(t.chainNamespace===k.CHAIN.EVM&&r){let c=yield this.getEIP155Balances(n,t);if(c)return this.filterLowQualityTokens(c)}let o=yield F.getBalance(n,t.caipNetworkId,e);return this.filterLowQualityTokens(o.balances)})},getEIP155Balances(e,n){return f(this,null,function*(){try{let t=Jt.getChainIdHexFromCAIP2ChainId(n.caipNetworkId);if(!(yield b.getCapabilities(e))?.[t]?.assetDiscovery?.supported)return null;let s=yield b.walletGetAssets({account:e,chainFilter:[t]});if(!Jt.isWalletGetAssetsResponse(s))return null;let o=(s[t]||[]).map(c=>Jt.createBalance(c,n.caipNetworkId));return E.updateBalanceCache({caipAddress:`${n.caipNetworkId}:${e}`,balance:{balances:o},timestamp:Date.now()}),o}catch{return null}})},filterLowQualityTokens(e){return e.filter(n=>n.quantity.decimals!=="0")},fetchERC20Balance(r){return f(this,arguments,function*({caipAddress:e,assetAddress:n,caipNetwork:t}){let s=yield Xt.createViemPublicClient(t),{address:a}=ge.parseCaipAddress(e),[{result:o},{result:c},{result:l},{result:d}]=yield s.multicall({contracts:[{address:n,functionName:"name",args:[],abi:ot},{address:n,functionName:"symbol",args:[],abi:ot},{address:n,functionName:"balanceOf",args:[a],abi:ot},{address:n,functionName:"decimals",args:[],abi:ot}]});return{name:o,symbol:c,decimals:d,balance:l&&d?At(l,d):"0"}})}};var Hn={adapters:{}},Kr={state:Hn,initialize(e){Hn.adapters=u({},e)},get(e){return Hn.adapters[e]}};var Qt={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0,sui:void 0,stacks:void 0,ton:void 0},Se=H({providers:u({},Qt),providerIds:u({},Qt)}),Zr={state:Se,subscribeKey(e,n){return ne(Se,e,n)},subscribe(e){return te(Se,()=>{e(Se)})},subscribeProviders(e){return te(Se.providers,()=>e(Se.providers))},setProvider(e,n){e&&n&&(Se.providers[e]=xe(n))},getProvider(e){if(e)return Se.providers[e]},setProviderId(e,n){n&&(Se.providerIds[e]=n)},getProviderId(e){if(e)return Se.providerIds[e]},reset(){Se.providers=u({},Qt),Se.providerIds=u({},Qt)},resetChain(e){Se.providers[e]=void 0,Se.providerIds[e]=void 0}};var $r={getTokenList(e){return f(this,null,function*(){return(yield F.fetchSwapTokens({chainId:e}))?.tokens?.map(r=>h(u({},r),{eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0}))||[]})},fetchGasPrice(){return f(this,null,function*(){let e=p.state.activeCaipNetwork;if(!e)return null;try{switch(e.chainNamespace){case"solana":let n=(yield b?.estimateGas({chainNamespace:"solana"}))?.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return yield F.fetchGasPrice({chainId:e.caipNetworkId})}}catch{return null}})},fetchSwapAllowance(s){return f(this,arguments,function*({tokenAddress:e,userAddress:n,sourceTokenAmount:t,sourceTokenDecimals:r}){let a=yield F.fetchSwapAllowance({tokenAddress:e,userAddress:n});if(a?.allowance&&t&&r){let o=b.parseUnits(t,r)||0;return BigInt(a.allowance)>=o}return!1})},getMyTokensWithBalance(e){return f(this,null,function*(){let n=yield st.getMyTokensWithBalance(e);return p.setAccountProp("tokenBalance",n,p.state.activeChain),this.mapBalancesToSwapTokens(n)})},mapBalancesToSwapTokens(e){return e?.map(n=>h(u({},n),{address:n?.address?n.address:qt(),decimals:parseInt(n.quantity.decimals,10),logoUri:n.iconUrl,eip2612:!1}))||[]},handleSwapError(e){return f(this,null,function*(){try{let n=e?.cause;return n?.json&&(yield n.json())?.reasons?.[0]?.description?.includes("insufficient liquidity")?"Insufficient liquidity":void 0}catch{return}})}};var Y=H({tokenBalances:[],loading:!1}),Ui={state:Y,subscribe(e){return te(Y,()=>e(Y))},subscribeKey(e,n){return ne(Y,e,n)},setToken(e){e&&(Y.token=xe(e))},setTokenAmount(e){Y.sendTokenAmount=e},setReceiverAddress(e){Y.receiverAddress=e},setReceiverProfileImageUrl(e){Y.receiverProfileImageUrl=e},setReceiverProfileName(e){Y.receiverProfileName=e},setNetworkBalanceInUsd(e){Y.networkBalanceInUSD=e},setLoading(e){Y.loading=e},getSdkEventProperties(e){return{message:O.parseError(e),isSmartAccount:Ne(p.state.activeChain)===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:Y.token?.symbol||"",amount:Y.sendTokenAmount??0,network:p.state.activeCaipNetwork?.caipNetworkId||""}},sendToken(){return f(this,null,function*(){try{switch(K.setLoading(!0),p.state.activeCaipNetwork?.chainNamespace){case"eip155":yield K.sendEvmToken();return;case"solana":yield K.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}catch(e){throw qn.isUserRejectedRequestError(e)?new Jn(e):e}finally{K.setLoading(!1)}})},sendEvmToken(){return f(this,null,function*(){let e=p.state.activeChain;if(!e)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");let n=Ne(e);if(!K.state.sendTokenAmount||!K.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!K.state.token)throw new Error("A token is required");if(K.state.token?.address){Z.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:n===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token.address,amount:K.state.sendTokenAmount,network:p.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:t}=yield K.sendERC20Token({receiverAddress:K.state.receiverAddress,tokenAddress:K.state.token.address,sendTokenAmount:K.state.sendTokenAmount,decimals:K.state.token.quantity.decimals});t&&(Y.hash=t)}else{Z.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:n===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token.symbol||"",amount:K.state.sendTokenAmount,network:p.state.activeCaipNetwork?.caipNetworkId||""}});let{hash:t}=yield K.sendNativeToken({receiverAddress:K.state.receiverAddress,sendTokenAmount:K.state.sendTokenAmount,decimals:K.state.token.quantity.decimals});t&&(Y.hash=t)}})},fetchTokenBalance(e){return f(this,null,function*(){Y.loading=!0;let n=p.state.activeChain,t=p.state.activeCaipNetwork?.caipNetworkId,r=p.state.activeCaipNetwork?.chainNamespace,s=p.getAccountData(n)?.caipAddress??p.state.activeCaipAddress,a=s?O.getPlainAddress(s):void 0;if(Y.lastRetry&&!O.isAllowedRetry(Y.lastRetry,30*ae.ONE_SEC_MS))return Y.loading=!1,[];try{if(a&&t&&r){let o=yield st.getMyTokensWithBalance();return Y.tokenBalances=o,Y.lastRetry=void 0,o}}catch(o){Y.lastRetry=Date.now(),e?.(o),je.showError("Token Balance Unavailable")}finally{Y.loading=!1}return[]})},fetchNetworkBalance(){if(Y.tokenBalances.length===0)return;let e=$r.mapBalancesToSwapTokens(Y.tokenBalances);if(!e)return;let n=e.find(t=>t.address===qt());n&&(Y.networkBalanceInUSD=n?Yn.multiply(n.quantity.numeric,n.price).toString():"0")},sendNativeToken(e){return f(this,null,function*(){D.pushTransactionStack({});let n=e.receiverAddress,t=p.getAccountData()?.address,r=b.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),a=yield b.sendTransaction({chainNamespace:k.CHAIN.EVM,to:n,address:t,data:"0x",value:r??BigInt(0)});return Z.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ne("eip155")===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token?.symbol||"",amount:e.sendTokenAmount,network:p.state.activeCaipNetwork?.caipNetworkId||"",hash:a||""}}),b._getClient()?.updateBalance("eip155"),K.resetSend(),{hash:a}})},sendERC20Token(e){return f(this,null,function*(){D.pushTransactionStack({onSuccess(){D.replace("Account")}});let n=b.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals)),t=p.getAccountData()?.address;if(t&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){let r=O.getPlainAddress(e.tokenAddress);if(!r)throw new Error("SendController:sendERC20Token - tokenAddress is required");let s=yield b.writeContract({fromAddress:t,tokenAddress:r,args:[e.receiverAddress,n??BigInt(0)],method:"transfer",abi:zn.getERC20Abi(r),chainNamespace:k.CHAIN.EVM});return Z.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Ne("eip155")===re.ACCOUNT_TYPES.SMART_ACCOUNT,token:K.state.token?.symbol||"",amount:e.sendTokenAmount,network:p.state.activeCaipNetwork?.caipNetworkId||"",hash:s||""}}),K.resetSend(),{hash:s}}return{hash:void 0}})},sendSolanaToken(){return f(this,null,function*(){if(!K.state.sendTokenAmount||!K.state.receiverAddress)throw new Error("An amount and receiver address are required");D.pushTransactionStack({onSuccess(){D.replace("Account")}});let e;K.state.token&&K.state.token.address!==ae.SOLANA_NATIVE_TOKEN_ADDRESS&&(O.isCaipAddress(K.state.token.address)?e=O.getPlainAddress(K.state.token.address):e=K.state.token.address);let n=yield b.sendTransaction({chainNamespace:"solana",tokenMint:e,to:K.state.receiverAddress,value:K.state.sendTokenAmount});n&&(Y.hash=n),b._getClient()?.updateBalance("solana"),Z.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:!1,token:K.state.token?.symbol||"",amount:K.state.sendTokenAmount,network:p.state.activeCaipNetwork?.caipNetworkId||"",hash:n||""}}),K.resetSend()})},resetSend(){Y.token=void 0,Y.sendTokenAmount=void 0,Y.receiverAddress=void 0,Y.receiverProfileImageUrl=void 0,Y.receiverProfileName=void 0,Y.loading=!1,Y.tokenBalances=[]}},K=me(Ui);var Gn={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},en={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},_=H({chains:xr(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{connectionControllerClient:void 0},isSwitchingNamespace:!1}),Yr={state:_,subscribe(e){return te(_,()=>{e(_)})},subscribeKey(e,n){return ne(_,e,n)},subscribeAccountStateProp(e,n,t){let r=t||_.activeChain;return r?ne(_.chains.get(r)?.accountState||{},e,n):()=>{}},subscribeChainProp(e,n,t){let r;return te(_.chains,()=>{let s=t||_.activeChain;if(s){let a=_.chains.get(s)?.[e];r!==a&&(r=a,n(a))}})},initialize(e,n,t){let{chainId:r,namespace:s}=E.getActiveNetworkProps(),a=n?.find(m=>m.id.toString()===r?.toString()),c=e.find(m=>m?.namespace===s)||e?.[0],l=e.map(m=>m.namespace).filter(m=>m!==void 0),d=x.state.enableEmbedded?new Set([...l]):new Set([...n?.map(m=>m.chainNamespace)??[]]);(e?.length===0||!c)&&(_.noAdapters=!0),_.noAdapters||(_.activeChain=c?.namespace,_.activeCaipNetwork=a,p.setChainNetworkData(c?.namespace,{caipNetwork:a}),_.activeChain&&Le.set({activeChain:c?.namespace})),d.forEach(m=>{let g=n?.filter(ue=>ue.chainNamespace===m),W=E.getPreferredAccountTypes()||{},J=u(u({},x.state.defaultAccountTypes),W);p.state.chains.set(m,u({namespace:m,networkState:H(h(u({},en),{caipNetwork:g?.[0]})),accountState:H(h(u({},Gn),{preferredAccountType:J[m]})),caipNetworks:g??[]},t)),p.setRequestedCaipNetworks(g??[],m)})},removeAdapter(e){if(_.activeChain===e){let n=Array.from(_.chains.entries()).find(([t])=>t!==e);if(n){let t=n[1]?.caipNetworks?.[0];t&&p.setActiveCaipNetwork(t)}}_.chains.delete(e)},addAdapter(e,{connectionControllerClient:n},t){if(!e.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");_.chains.set(e.namespace,{namespace:e.namespace,networkState:h(u({},en),{caipNetwork:t[0]}),accountState:u({},Gn),caipNetworks:t,connectionControllerClient:n}),p.setRequestedCaipNetworks(t?.filter(r=>r.chainNamespace===e.namespace)??[],e.namespace)},addNetwork(e){let n=_.chains.get(e.chainNamespace);if(n){let t=[...n.caipNetworks||[]];n.caipNetworks?.find(r=>r.id===e.id)||t.push(e),_.chains.set(e.chainNamespace,h(u({},n),{caipNetworks:t})),p.setRequestedCaipNetworks(t,e.chainNamespace),N.filterByNamespace(e.chainNamespace,!0)}},removeNetwork(e,n){let t=_.chains.get(e);if(t){let r=_.activeCaipNetwork?.id===n,s=[...t.caipNetworks?.filter(a=>a.id!==n)||[]];r&&t?.caipNetworks?.[0]&&p.setActiveCaipNetwork(t.caipNetworks[0]),_.chains.set(e,h(u({},t),{caipNetworks:s})),p.setRequestedCaipNetworks(s||[],e),s.length===0&&N.filterByNamespace(e,!1)}},setAdapterNetworkState(e,n){let t=_.chains.get(e);t&&(t.networkState=u(u({},t.networkState||en),n),_.chains.set(e,t))},setChainAccountData(e,n,t=!0){if(!e)throw new Error("Chain is required to update chain account data");let r=_.chains.get(e);if(r){let s=u(u({},r.accountState||Gn),n);_.chains.set(e,h(u({},r),{accountState:s})),(_.chains.size===1||_.activeChain===e)&&n.caipAddress&&(_.activeCaipAddress=n.caipAddress)}},setChainNetworkData(e,n){if(!e)return;let t=_.chains.get(e);if(t){let r=u(u({},t.networkState||en),n);_.chains.set(e,h(u({},t),{networkState:r}))}},setAccountProp(e,n,t,r=!0){p.setChainAccountData(t,{[e]:n},r)},setActiveNamespace(e){_.activeChain=e;let n=e?_.chains.get(e):void 0,t=n?.networkState?.caipNetwork;t?.id&&e&&(_.activeCaipAddress=n?.accountState?.caipAddress,_.activeCaipNetwork=t,p.setChainNetworkData(e,{caipNetwork:t}),E.setActiveCaipNetworkId(t?.caipNetworkId),Le.set({activeChain:e,selectedNetworkId:t?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;let n=_.activeChain===e.chainNamespace;n||p.setIsSwitchingNamespace(!0);let t=_.chains.get(e.chainNamespace);_.activeChain=e.chainNamespace,_.activeCaipNetwork=e,p.setChainNetworkData(e.chainNamespace,{caipNetwork:e});let r=t?.accountState?.address;if(r)_.activeCaipAddress=`${e.chainNamespace}:${e.id}:${r}`;else if(n&&_.activeCaipAddress){let{address:a}=ge.parseCaipAddress(_.activeCaipAddress);r=a,_.activeCaipAddress=`${e.caipNetworkId}:${r}`}else _.activeCaipAddress=void 0;p.setChainAccountData(e.chainNamespace,{address:r,caipAddress:_.activeCaipAddress}),K.resetSend(),Le.set({activeChain:_.activeChain,selectedNetworkId:_.activeCaipNetwork?.caipNetworkId}),E.setActiveCaipNetworkId(e.caipNetworkId),!p.checkIfSupportedNetwork(e.chainNamespace)&&x.state.enableNetworkSwitch&&!x.state.allowUnsupportedChain&&!b.state.wcBasic&&p.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;let n=_.chains.get(e.chainNamespace);n&&n?.caipNetworks?.push(e)},switchActiveNamespace(e){return f(this,null,function*(){if(!e)return;let n=e!==p.state.activeChain,t=p.getNetworkData(e)?.caipNetwork,r=p.getCaipNetworkByNamespace(e,t?.id);n&&r&&(yield p.switchActiveNetwork(r))})},switchActiveNetwork(t){return f(this,arguments,function*(e,{throwOnFailure:n=!1}={}){let r=p.state.activeChain;if(!r)throw new Error("ChainController:switchActiveNetwork - namespace is required");let s=Zr.getProviderId(_.activeChain)==="AUTH",a=p.getAccountData(r)?.address,o=k.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e.chainNamespace);try{if(a&&e.chainNamespace===r||s&&o){let c=Kr.get(e.chainNamespace);if(!c)throw new Error("Adapter not found");yield c.switchNetwork({caipNetwork:e})}p.setActiveCaipNetwork(e)}catch(c){if(n)throw c}Z.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}})})},getConnectionControllerClient(e){let n=e||_.activeChain;if(!n)throw new Error("Chain is required to get connection controller client");let t=_.chains.get(n);if(!t?.connectionControllerClient)throw new Error("ConnectionController client not set");return t.connectionControllerClient},getNetworkProp(e,n){let t=_.chains.get(n)?.networkState;if(t)return t[e]},getRequestedCaipNetworks(e){let n=_.chains.get(e),{approvedCaipNetworkIds:t=[],requestedCaipNetworks:r=[]}=n?.networkState||{};return O.sortRequestedNetworks(t,r).filter(o=>o?.id)},getAllRequestedCaipNetworks(){let e=[];return _.chains.forEach(n=>{if(!n.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");let t=p.getRequestedCaipNetworks(n.namespace);e.push(...t)}),e},setRequestedCaipNetworks(e,n){p.setAdapterNetworkState(n,{requestedCaipNetworks:e});let r=p.getAllRequestedCaipNetworks().map(a=>a.chainNamespace),s=Array.from(new Set(r));N.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){let e=[];return _.chains.forEach(n=>{if(!n.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");let t=p.getApprovedCaipNetworkIds(n.namespace);e.push(...t)}),e},getActiveCaipNetwork(e){return e?_.chains.get(e)?.networkState?.caipNetwork:_.activeCaipNetwork},getActiveCaipAddress(){return _.activeCaipAddress},getApprovedCaipNetworkIds(e){return _.chains.get(e)?.networkState?.approvedCaipNetworkIds||[]},setApprovedCaipNetworksData(e,n){p.setAdapterNetworkState(e,n)},checkIfSupportedNetwork(e,n){let t=n||_.activeCaipNetwork?.caipNetworkId,r=p.getRequestedCaipNetworks(e);return r.length?r?.some(s=>s.caipNetworkId===t):!0},checkIfSupportedChainId(e){return _.activeChain?p.getRequestedCaipNetworks(_.activeChain)?.some(t=>t.id===e):!0},checkIfSmartAccountEnabled(){let e=$n.caipNetworkIdToNumber(_.activeCaipNetwork?.caipNetworkId);return!_.activeChain||!e?!1:!!(oe.get(y.SMART_ACCOUNT_ENABLED_NETWORKS)?.split(",")||[])?.includes(e.toString())},showUnsupportedChainUI(){se.open({view:"UnsupportedChain"})},checkIfNamesSupported(){let e=_.activeCaipNetwork;return!!(e?.chainNamespace&&ae.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){p.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(e){let n=e;if(!n)throw new Error("Chain is required to set account prop");let t=p.state.chains.get(n)?.accountState?.preferredAccountType,r=x.state.defaultAccountTypes[n];_.activeCaipAddress=void 0,p.setChainAccountData(n,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:r||t,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),N.removeConnectorId(n)},setIsSwitchingNamespace(e){_.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){let e=[],n;if(_.chains.forEach(t=>{k.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(r=>r===t.namespace)&&t.namespace&&e.push(t.namespace)}),e.length>0){let t=e[0];return n=t?_.chains.get(t)?.caipNetworks?.[0]:void 0,n}},getAccountData(e){let n=e||_.activeChain;if(n)return p.state.chains.get(n)?.accountState},getNetworkData(e){let n=e||_.activeChain;if(n)return p.state.chains.get(n)?.networkState},getCaipNetworkByNamespace(e,n){if(!e)return;let t=p.state.chains.get(e),r=t?.caipNetworks?.find(s=>s.id.toString()===n?.toString());return r||t?.networkState?.caipNetwork||t?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){let e=N.state.filterByNamespace;return(e?[_.chains.get(e)]:Array.from(_.chains.values())).flatMap(t=>t?.caipNetworks||[]).map(t=>t.caipNetworkId)},getCaipNetworks(e){return e?p.getRequestedCaipNetworks(e):p.getAllRequestedCaipNetworks()},getCaipNetworkById(e,n){return Yr.getCaipNetworks(n).find(t=>t.id.toString()===e.toString()||t.caipNetworkId.toString()===e.toString())},setLastConnectedSIWECaipNetwork(e){_.lastConnectedSIWECaipNetwork=e},getLastConnectedSIWECaipNetwork(){return _.lastConnectedSIWECaipNetwork},fetchTokenBalance(e){return f(this,null,function*(){let n=p.getAccountData();if(!n)return[];let t=p.state.activeCaipNetwork?.caipNetworkId,r=p.state.activeCaipNetwork?.chainNamespace,s=p.state.activeCaipAddress,a=s?O.getPlainAddress(s):void 0;if(p.setAccountProp("balanceLoading",!0,r),n.lastRetry&&!O.isAllowedRetry(n.lastRetry,30*ae.ONE_SEC_MS))return p.setAccountProp("balanceLoading",!1,r),[];try{if(a&&t&&r){let o=yield st.getMyTokensWithBalance();return p.setAccountProp("tokenBalance",o,r),p.setAccountProp("lastRetry",void 0,r),p.setAccountProp("balanceLoading",!1,r),o}}catch(o){p.setAccountProp("lastRetry",Date.now(),r),e?.(o),je.showError("Token Balance Unavailable")}finally{p.setAccountProp("balanceLoading",!1,r)}return[]})},isCaipNetworkDisabled(e){let n=e.chainNamespace,t=!!p.getAccountData(n)?.caipAddress,r=p.getAllApprovedCaipNetworkIds(),s=p.getNetworkProp("supportsAllNetworks",n)!==!1,a=N.getConnectorId(n),o=N.getAuthConnector(),c=a===k.CONNECTOR_ID.AUTH&&o;return!t||s||c?!1:!r?.includes(e.caipNetworkId)}},p=me(Yr);var xi={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},zr=O.getBlockchainApiUrl(),Ee=H({clientId:null,api:new Ie({baseUrl:zr,clientId:null}),supportedChains:{http:[],ws:[]}}),F={state:Ee,get(e){return f(this,null,function*(){let{st:n,sv:t}=F.getSdkProperties(),r=x.state.projectId,s=h(u({},e.params||{}),{st:n,sv:t,projectId:r});return Ee.api.get(h(u({},e),{params:s}))})},getSdkProperties(){let{sdkType:e,sdkVersion:n}=x.state;return{st:e||"unknown",sv:n||"unknown"}},isNetworkSupported(e){return f(this,null,function*(){if(!e)return!1;try{Ee.supportedChains.http.length||(yield F.getSupportedNetworks())}catch{return!1}return Ee.supportedChains.http.includes(e)})},getSupportedNetworks(){return f(this,null,function*(){try{let e=yield F.get({path:"v1/supported-chains"});return Ee.supportedChains=e,e}catch{return Ee.supportedChains}})},fetchIdentity(n){return f(this,arguments,function*({address:e}){let t=E.getIdentityFromCacheForAddress(e);if(t)return t;let r=yield F.get({path:`/v1/identity/${e}`,params:{sender:p.state.activeCaipAddress?O.getPlainAddress(p.state.activeCaipAddress):void 0}});return E.updateIdentityCache({address:e,identity:r,timestamp:Date.now()}),r})},fetchTransactions(a){return f(this,arguments,function*({account:e,cursor:n,signal:t,cache:r,chainId:s}){if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))return{data:[],next:void 0};let c=E.getTransactionsCacheForAddress({address:e,chainId:s});if(c)return c;let l=yield F.get({path:`/v1/account/${e}/history`,params:{cursor:n,chainId:s},signal:t,cache:r});return E.updateTransactionsCache({address:e,chainId:s,timestamp:Date.now(),transactions:l}),l})},fetchSwapQuote(a){return f(this,arguments,function*({amount:e,userAddress:n,from:t,to:r,gasPrice:s}){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?F.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:n,from:t,to:r,gasPrice:s}}):{quotes:[]}})},fetchSwapTokens(n){return f(this,arguments,function*({chainId:e}){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?F.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]}})},getAddressBalance(t){return f(this,arguments,function*({caipNetworkId:e,address:n}){return Ee.api.post({path:`/v1?chainId=${e}&projectId=${x.state.projectId}`,body:{id:"1",jsonrpc:"2.0",method:"getAddressBalance",params:{address:n}}}).then(r=>r.result)})},fetchTokenPrice(n){return f(this,arguments,function*({addresses:e}){if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))return{fungibles:[]};let r=E.getTokenPriceCacheForAddresses(e);if(r)return r;let s=yield Ee.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:x.state.projectId},headers:{"Content-Type":"application/json"}});return E.updateTokenPriceCache({addresses:e,timestamp:Date.now(),tokenPrice:s}),s})},fetchSwapAllowance(t){return f(this,arguments,function*({tokenAddress:e,userAddress:n}){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?F.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:n},headers:{"Content-Type":"application/json"}}):{allowance:"0"}})},fetchGasPrice(n){return f(this,arguments,function*({chainId:e}){let{st:t,sv:r}=F.getSdkProperties();if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))throw new Error("Network not supported for Gas Price");return F.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:r}})})},generateSwapCalldata(a){return f(this,arguments,function*({amount:e,from:n,to:t,userAddress:r,disableEstimate:s}){if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))throw new Error("Network not supported for Swaps");return Ee.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:ae.CONVERT_SLIPPAGE_TOLERANCE},projectId:x.state.projectId,from:n,to:t,userAddress:r,disableEstimate:s}})})},generateApproveCalldata(r){return f(this,arguments,function*({from:e,to:n,userAddress:t}){let{st:s,sv:a}=F.getSdkProperties();if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))throw new Error("Network not supported for Swaps");return F.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:t,from:e,to:n,st:s,sv:a}})})},getBalance(e,n,t){return f(this,null,function*(){let{st:r,sv:s}=F.getSdkProperties();if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))return je.showError("Token Balance Unavailable"),{balances:[]};let o=`${n}:${e}`,c=E.getBalanceCacheForCaipAddress(o);if(c)return c;let l=yield F.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:n,forceUpdate:t,st:r,sv:s}});return E.updateBalanceCache({caipAddress:o,balance:l,timestamp:Date.now()}),l})},lookupEnsName(e){return f(this,null,function*(){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?F.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}})},reverseLookupEnsName(n){return f(this,arguments,function*({address:e}){if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))return[];let r=p.getAccountData()?.address;return F.get({path:`/v1/profile/reverse/${e}`,params:{sender:r,apiVersion:"2"}})})},getEnsNameSuggestions(e){return f(this,null,function*(){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?F.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]}})},registerEnsName(s){return f(this,arguments,function*({coinType:e,address:n,message:t,signature:r}){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?Ee.api.post({path:"/v1/profile/account",body:{coin_type:e,address:n,message:t,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}})},generateOnRampURL(a){return f(this,arguments,function*({destinationWallets:e,partnerUserId:n,defaultNetwork:t,purchaseAmount:r,paymentAmount:s}){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?(yield Ee.api.post({path:"/v1/generators/onrampurl",params:{projectId:x.state.projectId},body:{destinationWallets:e,defaultNetwork:t,partnerUserId:n,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""})},getOnrampOptions(){return f(this,null,function*(){if(!(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId)))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return yield F.get({path:"/v1/onramp/options"})}catch{return xi}})},getOnrampQuote(s){return f(this,arguments,function*({purchaseCurrency:e,paymentCurrency:n,amount:t,network:r}){try{return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?yield Ee.api.post({path:"/v1/onramp/quote",params:{projectId:x.state.projectId},body:{purchaseCurrency:e,paymentCurrency:n,amount:t,network:r}}):null}catch{return{networkFee:{amount:t,currency:n.id},paymentSubtotal:{amount:t,currency:n.id},paymentTotal:{amount:t,currency:n.id},purchaseAmount:{amount:t,currency:n.id},quoteId:"mocked-quote-id"}}})},getSmartSessions(e){return f(this,null,function*(){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?F.get({path:`/v1/sessions/${e}`}):[]})},revokeSmartSession(e,n,t){return f(this,null,function*(){return(yield F.isNetworkSupported(p.state.activeCaipNetwork?.caipNetworkId))?Ee.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:x.state.projectId},body:{pci:n,signature:t}}):{success:!1}})},setClientId(e){Ee.clientId=e,Ee.api=new Ie({baseUrl:zr,clientId:e})}};export{H as a,te as b,xe as c,ne as d,Mi as e,Di as f,ae as g,E as h,O as i,re as j,oe as k,ye as l,Rr as m,Jo as n,Ir as o,br as p,Un as q,Lr as r,x as s,je as t,F as u,ze as v,me as w,Ae as x,Br as y,Z as z,P as A,D as B,Ct as C,N as D,qt as E,Ne as F,Eu as G,jn as H,_t as I,b as J,st as K,Kr as L,Zr as M,Le as N,$r as O,K as P,p as Q,Vr as R,se as S};
